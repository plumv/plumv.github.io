<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"plumv.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta name="description" content="Jsp学习">
<meta property="og:type" content="article">
<meta property="og:title" content="Jsp学习">
<meta property="og:url" content="https://plumv.github.io/2021/02/22/%E5%B0%9A%E7%A1%85%E8%B0%B7%E8%AF%B4Java/%E5%89%8D%E7%AB%AF/JSP/index.html">
<meta property="og:site_name" content="李川的个人博客">
<meta property="og:description" content="Jsp学习">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20210215184106.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20210215185540.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20210217210925.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20210220104735.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20210222090656.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20210222091600.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20210222092034.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20210222092700.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20210222092841.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20210222093153.png">
<meta property="article:published_time" content="2021-02-21T16:00:00.000Z">
<meta property="article:modified_time" content="2021-03-22T01:47:29.138Z">
<meta property="article:author" content="Plum Reiver">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20210215184106.png">

<link rel="canonical" href="https://plumv.github.io/2021/02/22/%E5%B0%9A%E7%A1%85%E8%B0%B7%E8%AF%B4Java/%E5%89%8D%E7%AB%AF/JSP/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Jsp学习 | 李川的个人博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">李川的个人博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">学习生活</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>日志</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://plumv.github.io/2021/02/22/%E5%B0%9A%E7%A1%85%E8%B0%B7%E8%AF%B4Java/%E5%89%8D%E7%AB%AF/JSP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Plum Reiver">
      <meta itemprop="description" content="技术，日常，笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="李川的个人博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Jsp学习
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-02-22 00:00:00" itemprop="dateCreated datePublished" datetime="2021-02-22T00:00:00+08:00">2021-02-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-03-22 09:47:29" itemprop="dateModified" datetime="2021-03-22T09:47:29+08:00">2021-03-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">Java学习</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java%E5%AD%A6%E4%B9%A0/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>Jsp学习</p>
<span id="more"></span>
<h1 id="第一章-JSP基础"><a href="#第一章-JSP基础" class="headerlink" title="第一章 JSP基础"></a>第一章 JSP基础</h1><h2 id="1-1-什么是JSP"><a href="#1-1-什么是JSP" class="headerlink" title="1.1 什么是JSP"></a>1.1 什么是JSP</h2><ul>
<li><p>JSP,即Java Server Pages, Java服务器页面,即运行在服务器端的页面。它是由Sun公司倡导，许多国际性大公司参与, -起建立的一种动态网页技术。JSP技术是在传统的静态网页HTML文件中插入Java代码片断和JSP标签后形成的一种文件，其后缀名为.jsp。使用JSP开发的Web应用是跨平台的，既能在Linux上运行，也能在其他操作系統上运行。</p>
</li>
<li><p>特别注意的是，JSP文件的本质是Servlet。只不过，JSP 与servlet不同的是，JSP是专门用于进行数据展示的Servlet,其有特殊的写法。而普通的Servlet是用于完成业务逻辑处理的。由于servlet是运行在单例多线程环境下的,所以JSP同样也是运行在单例多线程环境下的。</p>
</li>
<li><p>例如index.jsp被翻译后变成index_jsp.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">index_jsp</span> <span class="keyword">extends</span> <span class="title">org</span>.<span class="title">apache</span>.<span class="title">jasper</span>.<span class="title">runtime</span>.<span class="title">HttpJspBase</span></span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">org</span>.<span class="title">apache</span>.<span class="title">jasper</span>.<span class="title">runtime</span>.<span class="title">JspSourceDependent</span>,</span></span><br><span class="line"><span class="class">                 <span class="title">org</span>.<span class="title">apache</span>.<span class="title">jasper</span>.<span class="title">runtime</span>.<span class="title">JspSourceImports</span> </span>&#123;</span><br><span class="line">                 &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="1-2-JSP规范"><a href="#1-2-JSP规范" class="headerlink" title="1.2 JSP规范"></a>1.2 JSP规范</h2><ul>
<li>将JSP页面翻译为servlet 的过程，是由Tomcat完成。在Tomcat中内置了一个JSP翻译引擎，当第一次访问该JSP页面时，翻译引擎会将JISP 页面翻译为Servlet 的java文件，再将其编译为.class文件进行运行。</li>
<li>SUN公司制定的JavaEE规范中包含两个很重要的子规范: Servlet 规范，及JSP规范。其中JSP规范中就包含了如何将JSP页面翻译为Senvlet。例如,JSP页面中的HTML CSS JavaScript,及普通文本部分，均会被翻译到out. writer ()中。</li>
<li>Tomcat中的JSP翻译引擎，就遵循了这个JSP规范。</li>
</ul>
<h2 id="1-3-JSP注释"><a href="#1-3-JSP注释" class="headerlink" title="1.3 JSP注释"></a>1.3 JSP注释</h2><ul>
<li>在JSP页面中使用注释，可以将要注释的内容使用&lt;%-  -%&gt;括起来。 </li>
<li>当然，在JSP页面中也可以使用HTML的注释&lt;!-  -&gt;。 但它们的使用效果是 不同的。<ul>
<li>(1) HTML注释会被JSP翻译引擎翻译到Servlet 的out.write()中; 而JSP注释则会被JSP翻译引擎忽略，在Servlet中是看不到的。</li>
<li>(2) 在客户端浏览器查看源码时, HTML注释是可以查看到的;但JISP 注释在客户端是查看不到的。</li>
</ul>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page isELIgnored=<span class="string">&quot;false&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;%--这是JSP注释--%&gt;</span><br><span class="line">  &lt;!--这是HTML注释。不推荐在JSP文件中添加此注释--&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="1-4-JSP的Java代码块"><a href="#1-4-JSP的Java代码块" class="headerlink" title="1.4 JSP的Java代码块"></a>1.4 JSP的Java代码块</h2><ul>
<li><p>JSP的Java代码块也称为JSP小脚本，是以&lt;% %&gt;括起来的部分， 其中可以编写Java代码。编写在Java代码块中的代码，会被JSP翻译引擎将其置入到Serlet的_jspservice()方法中作为方法中的Java语句出现。所以，其中存放的必须是以分号结尾的Java语句。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;% JSP的Java代码块 %&gt;   ==&gt; Serlet的_jspservice()方法中</span><br></pre></td></tr></table></figure></li>
<li><p>需要注意的是，JSP代码块可以放置在JSP页面的任意位置，可以放置任意数量。但它们都会被按照顺序放置到Servlet 的_jspservicel()方法中 。也就是说,其执行顺序是与其在JSP页面中的出现顺序是一致的。</p>
</li>
<li><p>由于JSP小脚本是被翻译到了Servlet 的_jspserice()方法中,所以JSP小脚本中是不能出现如下内容的: </p>
<ul>
<li>(1)声明的变量是不能添加权限访问控制符的。</li>
<li>(2)不能定义方法。</li>
<li>(3)不能定义静态语句块。</li>
</ul>
</li>
</ul>
<p>1.5 JSP的声明语句块</p>
<ul>
<li><p>在JSP页面中使用&lt;%!  %&gt;括起来的部分 ,称为声明语句块。声明语句块中的内容,将被JSP引擎翻译到Servlet 的类体中，没有包含到哪个方法体中。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%! JSP的声明语句块  %&gt;  ==&gt; Servlet的类体中</span><br></pre></td></tr></table></figure></li>
<li><p>这样的话，在JSP的声明语句块中就可声明实例变量、实例方法、静态方法、静态代码块等内容。并且，这些内容均可被JISP 的Java代码块中代码访问。因为它们原本就是一个Servlet类中的代码。</p>
</li>
<li><p>不过，还是不建议在JSP的声明语句块中声明实例变量。因为JSP是运行在单例多线程环境下的，实例变量将会引起线程安全问题。</p>
</li>
<li><p>需要注意的是，在JSP的声明语句块中，是不能编写普通的Java语句的。否则的话，这些语句将会直接出现在Servlet的类体虫。</p>
</li>
<li><p>声明语句块也可以定义在JSP页面的任意位置，且可以定义任意多个。</p>
</li>
</ul>
<h2 id="1-6-JSP的表达式块"><a href="#1-6-JSP的表达式块" class="headerlink" title="1.6 JSP的表达式块"></a>1.6 JSP的表达式块</h2><ul>
<li><p>在JSP页面中使用&lt;%= %&gt;括起来的部分,称为表达式块。其可在JSP页面中输出变量、常量,及它们组成的各种表达式的值。注意，是表达式，而不是语句，是没有分号的。该表达式将被JSP引擎翻译到_ jspservice()方法的 out.writel()方法中输出。例如</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%=name %&gt;   ==&gt;Servlet中的_jspservice()方法中的out.print(name);</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="第二章-JSP核心"><a href="#第二章-JSP核心" class="headerlink" title="第二章 JSP核心"></a>第二章 JSP核心</h1><h2 id="2-1-内置对象"><a href="#2-1-内置对象" class="headerlink" title="2.1 内置对象"></a>2.1 内置对象</h2><ul>
<li><p>在JSP的Java代码块、表达式块等中可以直接使用的引用，称为JSP的内置对象肛常用的内置对象有九个，分别是:</p>
<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20210215184106.png"></p>
</li>
<li><p>这九个对象在JSP的Java代码块、表达式块中可以直接使用。只所以可以直接使用，是因为Java代码块与表达式块被JSP引擎翻译后均出现在了Servlet 的_ jspService()方法中。 而这九个对象，就是_ jspService()方法中的局部变量。在JSP的Java代码块、表达式块中的代码就是_ jspservice()方法中的代码， 所以在其中可以直接使用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//JSP的Servlet部分源码</span></span><br><span class="line"><span class="keyword">final</span> javax.servlet.jsp.PageContext pageContext;</span><br><span class="line">javax.servlet.http.HttpSession session = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">final</span> javax.servlet.ServletContext application;</span><br><span class="line"><span class="keyword">final</span> javax.servlet.ServletConfig config;</span><br><span class="line">javax.servlet.jsp.JspWriter out = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">final</span> java.lang.Object page = <span class="keyword">this</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>pageContext</strong></p>
<ul>
<li>pageContext,页面上下文，其具有一个只在当前页面范围的戴属性空间,即其具有settribute()方法与gettribute()方法。 但，由于在当前页面范围,数据不在放到域属性空间也可直接使用，将数据存放到域属性空间反而感觉“多此一举”， 所以这些方法并不常用。</li>
<li>不过，在同一页面中，为了使用EL表达式(后面学习)来访问某变量的值，此时一般使用pageContext。</li>
<li>pageContext具有一些get方法,可以获取到Request、Response .Session、ServletContext、ServletConfig、page (即当前Servlet)、 exception、 out 等另外八个内置对象。</li>
</ul>
<p><strong>out</strong></p>
<ul>
<li>out,类型为javax.servlet.jspJspWriter.查看JavaEE 文档，发现JspWriter 类继承自10流的Writer类。即out就是一一个输出流对象。</li>
</ul>
<p><strong>page</strong></p>
<ul>
<li><p>查看JSP翻译为的Servlet,可以看到page对象即Servlet 对象本身。这个对象在实际应用中并不常用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> java.lang.Object page = <span class="keyword">this</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>application</strong></p>
<ul>
<li>application,即ServletContext。所以ServletContext所具有的方法，applcation都具有。</li>
</ul>
<p><strong>exception</strong></p>
<ul>
<li>在普通的JSP页面中是不能使用exception内置对象的。因为打开JSP翻译为的Servlet,发现其中并没有exception对象。若要在页面中直接使用exception 对象，则需要配合着page指令使用。page 指令后面讲解。</li>
</ul>
<p><strong>其他对象</strong></p>
<ul>
<li>其它对象，还有request. response. session, 及config。它们的用法与之前Servlet 学习时的用法相同。只不过是直接使用在了JSP 页面中了。</li>
</ul>
<h2 id="2-2-JSP指令"><a href="#2-2-JSP指令" class="headerlink" title="2.2 JSP指令"></a>2.2 JSP指令</h2><ul>
<li><p>JSP指令的作用是为当前页面做-些基本 的属性设置,为当前的页面的运行提供基本的环境。</p>
</li>
<li><p>根据功能的不同，JSP中包含三类指令: </p>
<ul>
<li>page指令，即页面指令; </li>
<li>include 指令，即包含指令;</li>
<li>及taglib指令,即标签库指令。</li>
</ul>
</li>
<li><p>无论哪种指令,其使用的语法格式均为如下形式:</p>
<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20210215185540.png"></p>
</li>
</ul>
<h3 id="2-2-1-page指令"><a href="#2-2-1-page指令" class="headerlink" title="2.2.1 page指令"></a>2.2.1 page指令</h3><ul>
<li>page指令用于设置当前JISP页面的相关信息。一个JSP文件中可以包含多个page指令。</li>
<li>常用的page指令的属性意义及用法如下: <ul>
<li>language属性可有可无，且language属性只能设置为java</li>
</ul>
</li>
</ul>
<p><strong>pageEncoding属性</strong></p>
<ul>
<li><p>pageEncoding属性用于设置当前JSP页面所使用的字符编码格式。即,用户在浏览器中<br>通过右击查看编码所看到的编码格式。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page  pageEncoding=<span class="string">&quot;UTF-8&quot;</span> %&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>其被JISP翻译引擎翻译到servlet 中的语句，是_jspService()方注中的setContentType()。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>contentType属性</strong></p>
<ul>
<li>contentType属性也是用于设置当前JSP页面所使用的字符编码格式。</li>
<li>与pageEncoding属性属性不同的是：<ul>
<li>pageEncoding属性默认设置为text/html格式。</li>
<li>而contentType属性还可以将其设置为其他格式。例如text/xml</li>
</ul>
</li>
</ul>
<p><strong>import属性</strong></p>
<ul>
<li><p>import属性用于完成在JSP页面中导入指定的类。其被JSP引擎翻译为Servlet 中的import语句。例如</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.Date&quot;</span> %&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>其被JISP翻译引擎翻译到servlet 中的语句为</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Date;</span><br></pre></td></tr></table></figure></li>
<li><p>若要导入多个包，则需要以逗号隔开多个包。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.Date,java.text.*&quot;</span> %&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>errorPage属性</strong></p>
<ul>
<li><p>errorPage属性用于指定当前页面发生错误，异常时跳转到哪个页面。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page errorPage=<span class="string">&quot;/error.jsp&quot;</span> %&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>其被JISP翻译引擎翻译到servlet 中的语句为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pageContext = _jspxFactory.getPageContext(<span class="keyword">this</span>, request, response,<span class="string">&quot;/error.jsp&quot;</span>, <span class="keyword">true</span>, <span class="number">8192</span>, <span class="keyword">true</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>isErrorPage属性</strong></p>
<ul>
<li><p>isErrorPage属性用于指定此页面是错误页面。属性值默认为false.</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page isErrorPage=<span class="string">&quot;true&quot;</span> %&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>当页面设置为此属性为true时，其其被JISP翻译引擎翻译的servlet 中就会出现如下代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Throwable exception = org.apache.jasper.runtime.JspRuntimeLibrary.getThrowable(request);</span><br><span class="line"><span class="keyword">if</span> (exception != <span class="keyword">null</span>) &#123;</span><br><span class="line">  response.setStatus(javax.servlet.http.HttpServletResponse.SC_INTERNAL_SERVER_ERROR);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>此时就可以使用exception对象来获取错误信息。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ex = &lt;%=exception.getMessage()%&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>session属性</strong></p>
<ul>
<li><p>session属性用于指定JSP页面是否使用session。默认为true。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page session=<span class="string">&quot;true&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>当session属性为true时，jsp自带新建的Session对象。此时只能往里面存放数据。</li>
<li>当session属性为false时，jsp中不含有session对象。此时需要自己获取session。然后获取session中的数据。如下：</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">  <span class="comment">//使用request的getSession()的原则</span></span><br><span class="line">  <span class="comment">//若向Session域中存放数据，则使用getSession(true),即getSession()</span></span><br><span class="line">  <span class="comment">//若向Session域中读取数据，则使用getSession(false)</span></span><br><span class="line">  HttpSession session = request.getSession(<span class="keyword">false</span>);</span><br><span class="line">  <span class="keyword">if</span> (session != <span class="keyword">null</span>)&#123;</span><br><span class="line">    Object name = session.getAttribute(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">    out.print(name);</span><br><span class="line">  &#125;</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>session属性默认为true，此时使用的是getSession(true)获取的session对象。</p>
</li>
</ul>
<h3 id="2-2-2-include指令"><a href="#2-2-2-include指令" class="headerlink" title="2.2.2 include指令"></a>2.2.2 include指令</h3><ul>
<li><p>include指令,即包含指令，用于将指定的文件包含到当前的JSP文件中。该指令只有一个属性file,用于指定要包含的文件。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%<span class="meta">@include</span> file=<span class="string">&quot;next.jsp&quot;</span> %&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>特点：</p>
<ul>
<li>被包含的页面会依附在父页面中，父页面和被包含的页面只会翻译成一个Servlet。</li>
<li>因此被包含的页面和父页面的数据是相通的。</li>
</ul>
</li>
<li><p>include指令相当于html中的ifarme标签。</p>
</li>
</ul>
<h2 id="2-3-JSP动作"><a href="#2-3-JSP动作" class="headerlink" title="2.3 JSP动作"></a>2.3 JSP动作</h2><ul>
<li>在JSP页面中大量使用Java代码块表达式块等内容,会使JSP页面看起来“杂乱无章”。为了使JSP页面看得简洁明了,为了简化Java代码, -般情况下，我们会尽量少的使用Java代码块与表达式块。取而代之的则是使用EL表达式、JSTL 标签,及JSP动作。</li>
<li>JSP动作是指，使用系统定义好的标签来完成本应由Java代码来完成的功能。</li>
<li>JSP动作的语法格式为:</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:动作名称 属性名=属性值 属性名=属性值 ...&gt;&lt;/jsp:动作名称&gt;</span><br><span class="line">//或</span><br><span class="line">&lt;jsp:动作名称 属性名=属性值 属性名=属性值 .../&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>JSP动作很多,但在实际开发时常用的就两个:转发动作与包含动作。</li>
<li>这两份个动作的完成，底层使用的是RequestDispatcher的forward(|与include()方法实现的。而这两份种请求转发方式的本质区别是，标准输出流的开启时间不同。forward()方式的标准输出流是在目标资源中开启的标准输出流,而include()方式的标准输出流则是在当前发出包含运作的页面中开启的。所以，forward(动作的发起页面中是无法向标准输出流中写入数据的;而include()动作的发起页面及目标页面中均可向标准输出流中写入数据。</li>
<li>这两份个动作都具有一个page属性，用于指定要转向的页面。</li>
</ul>
<h3 id="2-3-1-forward动作"><a href="#2-3-1-forward动作" class="headerlink" title="2.3.1 forward动作"></a>2.3.1 forward动作</h3><ul>
<li><p>页面中一旦具有了forward 动作，那么当前页面中的所有要显示的内容都将无法显示。因为页面直接转发到了下一个页面。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:forward page=&quot;next.jsp&quot;&gt;&lt;/jsp:forward&gt;</span><br><span class="line">&lt;%--</span><br><span class="line">等价于Java代码</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">	_jspx_page_context.forward(<span class="string">&quot;next.jsp&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">--%&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>特点：</p>
<ul>
<li>与servlet的请求转发的forward相似，当前的页面的数据无法显示在，只有请求的页面的数据才能显示。</li>
<li>当前页面和请求的页面都会被编译成Servlet。</li>
</ul>
</li>
</ul>
<h3 id="2-3-2-include动作"><a href="#2-3-2-include动作" class="headerlink" title="2.3.2 include动作"></a>2.3.2 include动作</h3><ul>
<li><p>include动作用于完成将指定页面包含到当前页面中的功能。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:include page=&quot;next.jsp&quot;&gt;&lt;/jsp:include&gt;</span><br><span class="line">&lt;%-- </span><br><span class="line"> 等价于Java代码</span><br><span class="line">org.apache.jasper.runtime.JspRuntimeLibrary.include(request, response, <span class="string">&quot;next.jsp&quot;</span>, out, <span class="keyword">false</span>);  </span><br><span class="line">  --%&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>特点：</p>
<ul>
<li>与servlet的请求转发的include相似，当前的页面和请求的页面的数据都能显示，且按照代码的顺序显示。</li>
<li>当前页面和请求的页面都会被编译成Servlet。</li>
</ul>
</li>
</ul>
<p><strong>动态联编</strong></p>
<ul>
<li>由于当前页面和请求的页面都会被编译成Servlet，也就是说会有两个Servlet存在。包含动作的包含，是在运行期完成的，而非在编译期。这个包含动作,是在程序运行过程中，由当前页面的.java文件中的_ jspService()方法通过JspRuntimeLibrary类的include()方法调用了请求页面的.java文件中的jspService()方法 。在运行期所执行的这种包含,称.为动态联编。</li>
<li>include指令的执行方式被称为静态联编。</li>
<li>在静态联编与动态联编均可使用时，一般使用静态联编。因为在程序运行时只存在一个Servlet，对资源的消耗较少，且不存在调用问题，执行效率较高。<ul>
<li>若在两个文件间需要共享同一变量，此时只能使用静态联编。</li>
<li>若在两个文件间存在同名变量，且不能混淆，此时只能使用动态联编。</li>
</ul>
</li>
</ul>
<h2 id="2-4-EL表达式"><a href="#2-4-EL表达式" class="headerlink" title="2.4 EL表达式"></a>2.4 EL表达式</h2><ul>
<li>EL, Expression Language,表达式语言,是一种在JSP页面中获取数据的简单方式。EL表达式是从JSP2.0版本开始才引入的概念。</li>
<li>EL表达式的基本语法形式很简单:在JSP页面的任何<font color="red">静态部分</font>均可通过S{expression}的形式获取到指定表达式的值。</li>
</ul>
<h3 id="2-4-1-获取数据"><a href="#2-4-1-获取数据" class="headerlink" title="2.4.1 获取数据"></a>2.4.1 获取数据</h3><p><strong>1.从四大域中依次查找数据</strong></p>
<ul>
<li><p>EL只能从pageConext、request, session、 application 四大域属性空间中获取数据。</p>
<ul>
<li>且查找的顺序是pageConext、request, session、 application 。</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--EL只能从四大域中获取数据。</span><br><span class="line">其查找数据的顺序是：依次按照由小到大的顺序从四大域中查找指定名称的属性值--%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">pageContext.setAttribute(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;lisi&quot;</span>);</span><br><span class="line">request.setAttribute(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line">session.setAttribute(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;wangwu&quot;</span>);</span><br><span class="line">application.setAttribute(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;songliu&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">name = $&#123;name&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>2.从指定域中获取数据</strong></p>
<ul>
<li><p>从pageContext依次查找到application 域空间，会降低执行效率。若某属性确定存放在某个域属性空间，则可指定直接从该空间中查找。此时需要借助EL的四个域属性空间相关的内置对象。</p>
<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20210217210925.png"></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--通过EL的内置对象，可以指定查找数据的范围是在哪个域中--%&gt;</span><br><span class="line">name = $&#123;applicationScope.name&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>3.访问Bean/对象的属性</strong></p>
<ul>
<li>EL可以通过$key,属性} 的方式获取到指定对象的指定属性值。其底层实际调用的是该对象的相应属性的get方法。</li>
<li>当然，也可以使用$key[属性]或${key[“属性”]的方式获取。该方式不常用。</li>
<li>若要访问一个对象的域属性的值,则可多次使用点号运算符,依次取出相应的属性值。</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">  School school = <span class="keyword">new</span> School(<span class="string">&quot;清华大学&quot;</span>,<span class="string">&quot;北京&quot;</span>);</span><br><span class="line">  Student student = <span class="keyword">new</span> Student(<span class="string">&quot;lisi&quot;</span>, <span class="number">18</span>, school);</span><br><span class="line">  pageContext.setAttribute(<span class="string">&quot;student&quot;</span>, student);</span><br><span class="line">%&gt;</span><br><span class="line">student = $&#123;student&#125;&lt;br&gt;</span><br><span class="line">&lt;%--  获取对象的属性值，普遍使用.获取。</span><br><span class="line">      属性的名称是指：对象的getXxx()方法中去掉get，且第一个子母小写的字母。有时可能和对象的属性不同。--%&gt;</span><br><span class="line">name = $&#123;student.name&#125;&lt;br&gt;</span><br><span class="line">age = $&#123;student.age&#125;&lt;br&gt;</span><br><span class="line">&lt;%--  另一种获取方法--%&gt;</span><br><span class="line">name = $&#123;student[<span class="string">&#x27;name&#x27;</span>]&#125;&lt;br&gt;</span><br><span class="line">age = $&#123;student[<span class="string">&#x27;age&#x27;</span>]&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">sname = $&#123;student.school.sname&#125;&lt;br&gt;</span><br><span class="line">address = $&#123;student.school.address&#125;&lt;br&gt;</span><br><span class="line">&lt;%--当student2为<span class="keyword">null</span>时，EL时不会抛出空指针异常的，仅仅是不会显示而已--%&gt;</span><br><span class="line">student = $&#123;student2.name&#125;&lt;br&gt;</span><br></pre></td></tr></table></figure>

<p><strong>4.获取数组中的元素</strong></p>
<ul>
<li>EL可以通过${key[索引]} 的方式获取到指定索引的元素。不过，需要注意的是，若数组中不存在该指定索引的元素，系统并不会抛出数组越界异常。</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;% String[] names = &#123;<span class="string">&quot;张三&quot;</span>,<span class="string">&quot;李四&quot;</span>&#125;;</span><br><span class="line">pageContext.setAttribute(<span class="string">&quot;names&quot;</span>, names);%&gt;</span><br><span class="line">names[<span class="number">0</span>] = $&#123;names[<span class="number">0</span>]&#125;&lt;br&gt;</span><br><span class="line">names[<span class="number">1</span>] = $&#123;names[<span class="number">1</span>]&#125;&lt;br&gt;</span><br><span class="line">&lt;%--  若访问的数组下标超过数组下标上限，EL不会抛出异常--%&gt;</span><br><span class="line">names[<span class="number">2</span>] = $&#123;names[<span class="number">2</span>]&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">  School[] schools = <span class="keyword">new</span> School[<span class="number">3</span>];</span><br><span class="line">  schools[<span class="number">0</span>] = <span class="keyword">new</span> School(<span class="string">&quot;清华&quot;</span>,<span class="string">&quot;北京&quot;</span>);</span><br><span class="line">  schools[<span class="number">1</span>] = <span class="keyword">new</span> School(<span class="string">&quot;北京&quot;</span>,<span class="string">&quot;北京&quot;</span>);</span><br><span class="line">  schools[<span class="number">2</span>] = <span class="keyword">new</span> School(<span class="string">&quot;北师大&quot;</span>,<span class="string">&quot;北京&quot;</span>);</span><br><span class="line">  pageContext.setAttribute(<span class="string">&quot;schools&quot;</span>, schools);</span><br><span class="line">%&gt;</span><br><span class="line">schools = $&#123;pageScope.schools&#125;</span><br></pre></td></tr></table></figure>

<p><strong>5.获取list中的元素</strong></p>
<ul>
<li>与获取数组中的元素相同，通过${key[索引]}的方式可以获取List 中指定索引的元素。若List中不存在该指定索引的元素，系统并不会抛出越界异常。</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">  <span class="comment">//EL表达式能够通过索引访问list，但无法访问set。</span></span><br><span class="line">  <span class="comment">//因为set中没有索引的概念</span></span><br><span class="line">  List&lt;String&gt; names = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">  names.add(<span class="string">&quot;李四&quot;</span>);</span><br><span class="line">  names.add(<span class="string">&quot;王五&quot;</span>);</span><br><span class="line">  names.add(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">  pageContext.setAttribute(<span class="string">&quot;names&quot;</span>, names);</span><br><span class="line">%&gt;</span><br><span class="line">names0 = $&#123;pageScope.names[<span class="number">0</span>]&#125;&lt;br&gt;</span><br><span class="line">names1 = $&#123;pageScope.names[<span class="number">1</span>]&#125;&lt;br&gt;</span><br><span class="line">names2 = $&#123;pageScope.names[<span class="number">2</span>]&#125;&lt;br&gt;</span><br><span class="line">names3 = $&#123;pageScope.names[<span class="number">3</span>]&#125;&lt;br&gt;</span><br></pre></td></tr></table></figure>

<p><strong>6.获取Map中的元素</strong></p>
<ul>
<li>通过${key.key1}的方式可以获取List 中指定key1的value元素。</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line"><span class="comment">//map中的value是object类型，但在访问map.school.sname时会将object强转为school类型</span></span><br><span class="line">Map&lt;String ,Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">map.put(<span class="string">&quot;school&quot;</span>, <span class="keyword">new</span> School(<span class="string">&quot;清华大学&quot;</span>,<span class="string">&quot;北京&quot;</span>));</span><br><span class="line">map.put(<span class="string">&quot;mobile&quot;</span>, <span class="string">&quot;2312312&quot;</span>);</span><br><span class="line">map.put(<span class="string">&quot;age&quot;</span>, <span class="number">18</span>);</span><br><span class="line">pageContext.setAttribute(<span class="string">&quot;map&quot;</span>, map);</span><br><span class="line">%&gt;</span><br><span class="line">school.name = $&#123;map.school.sname&#125;&lt;br&gt;</span><br><span class="line">mobile = $&#123;map.mobile&#125;&lt;br&gt;</span><br><span class="line">age = $&#123;map.age&#125;&lt;br&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-4-2-运算符"><a href="#2-4-2-运算符" class="headerlink" title="2.4.2 运算符"></a>2.4.2 运算符</h3><ul>
<li><p>EL表达式可以进行各种运算，其中常用的运算符有: </p>
<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20210220104735.png"></p>
</li>
<li><p>除了上述运算符外，还有一个非常有用的运算符empty, 其用法为${empty 变量}，结果为布尔值。</p>
<ul>
<li>若变量未定义，则返回值为true。</li>
<li>若变量为 String 类型，且其值为空串，则返回值为true。</li>
<li>若变量为引用类型，且其值为null,则返回值为true。 </li>
<li>若变量为集合类型，且其不包含任何元素，则返回值为true。 </li>
</ul>
</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">String username = <span class="keyword">null</span>;</span><br><span class="line">String name = <span class="string">&quot;&quot;</span>;</span><br><span class="line">List&lt;Student&gt; students = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">pageContext.setAttribute(<span class="string">&quot;username&quot;</span>,username);</span><br><span class="line">pageContext.setAttribute(<span class="string">&quot;name&quot;</span>,name);</span><br><span class="line">pageContext.setAttribute(<span class="string">&quot;students&quot;</span>,students);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;%--  显示皆为<span class="keyword">true</span>--%&gt;</span><br><span class="line">empty s = $&#123; empty s&#125;;&lt;br&gt;</span><br><span class="line">empty username = $&#123; empty pageScope.username&#125;;&lt;br&gt;</span><br><span class="line">empty name = $&#123; empty pageScope.name&#125;;&lt;br&gt;</span><br><span class="line">empty students = $&#123;empty pageScope.students&#125;;&lt;br&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-4-3-EL内置对象"><a href="#2-4-3-EL内置对象" class="headerlink" title="2.4.3 EL内置对象"></a>2.4.3 EL内置对象</h3><ul>
<li>就像JSP的Java代码块及表达式块中可以使用九个内置对象一样，EL 表达式中，同样也存在有内置对象，并且存在11个内置对象。常用的内置对象，除了前面使用过的四个域属性空间相关的内置对象外，还有如下几个。</li>
</ul>
<p><strong>1.pageContext</strong></p>
<ul>
<li><p>该pageContext与JISP内置对象中的pageContext 是同一个对象。通过该对象，可以获取到request、 response&lt; session、senvletContext、 servletConfig 等对象。注意，这些对象在EL中不是内置对象。这些对象只能通过pageContext 获取。</p>
</li>
<li><p>在EL中直接SlpageContext.request即可获职request对象。当然，其底层实际调用的是pageContext.getRequest)方法。同理，也可以通过类似方式获取到其它对象。</p>
</li>
<li><p>在这些获职的对象中，有一个是实际工程中最常用的:</p>
<ul>
<li>${pageContext.request.contextPath} ,用于获取当前项目的发布到服务器的名称。一般会用在JSP页面的路径前。</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/loginServlet&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>在EL的11个内置对象中，除了pageContext 外，其它10个内置对象,其类型均为java.util.Map类型。</p>
</li>
</ul>
<p><strong>2.param</strong></p>
<ul>
<li>获取请求中指定参数的值。相当于request.getParameter(string)；</li>
<li>例如：${param.name}。获取登陆表单中的name的值</li>
</ul>
<p><strong>3.paramValues</strong></p>
<ul>
<li>获取请求中指定参数的所有值。相当于request.getParameterNames();</li>
<li>例如：${paramValues.hobby}。获取hobby的所有值</li>
</ul>
<p><strong>4.initParam</strong></p>
<ul>
<li>获取项目的初始化参数值。相当于ServletContext.getInitParameter(string);</li>
<li>初始化参数值是设置在wen.xml中的。例如${initParam.name}</li>
</ul>
<h3 id="2-4-4-自定义EL函数"><a href="#2-4-4-自定义EL函数" class="headerlink" title="2.4.4 自定义EL函数"></a>2.4.4 自定义EL函数</h3><ul>
<li><p>当EL的功能不能满足我们的需要时，我们可以自定义一些功能让他在JSP页面中生效。</p>
</li>
<li><p>第一步：自定义函数类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自定义函数：使用在jsp页面中</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ELFunctions</span> </span>&#123;</span><br><span class="line">  <span class="comment">//函数功能：将字符串小写变大写</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">lowerToUpper</span><span class="params">(String source)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> source.toUpperCase();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>第二步：在tld文件中注册</p>
<ul>
<li>自定义的类和函数，需要在一个扩展名为.tld的XML文件中进行注册<ul>
<li>tld tag library definition:标签库定义</li>
</ul>
</li>
<li>XML文件是需要约束的，即需要配置文件头部。这个头部约束可以从下面文件中复制：<ul>
<li>在Tomcat安装目录下：\webapps\examples\WEB-INF\jsp2\jsp2-example-taglib.tld</li>
</ul>
</li>
<li>注册文件的位置需要定义在当前web项目的WEB-INF下，与web.xml同级</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;taglib xmlns&#x3D;&quot;http:&#x2F;&#x2F;java.sun.com&#x2F;xml&#x2F;ns&#x2F;j2ee&quot;</span><br><span class="line">        xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;</span><br><span class="line">        xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;java.sun.com&#x2F;xml&#x2F;ns&#x2F;j2ee http:&#x2F;&#x2F;java.sun.com&#x2F;xml&#x2F;ns&#x2F;j2ee&#x2F;web-jsptaglibrary_2_0.xsd&quot;</span><br><span class="line">        version&#x3D;&quot;2.0&quot;&gt;</span><br><span class="line">  &lt;!--以下标签作用为：定义标签库信息  --&gt;</span><br><span class="line">  &lt;description&gt;这是一个自定义标签库测试&lt;&#x2F;description&gt;</span><br><span class="line">  &lt;tlib-version&gt;1.0&lt;&#x2F;tlib-version&gt;</span><br><span class="line">  &lt;!-- short-name：表示标签库的名称，</span><br><span class="line">  一般一个tld文件一个标签库</span><br><span class="line">  一个标签库一个short-name. --&gt;</span><br><span class="line">  &lt;short-name&gt;myFt&lt;&#x2F;short-name&gt;</span><br><span class="line">  &lt;!--uri：自定义，随便写 --&gt;</span><br><span class="line">  &lt;uri&gt;http:&#x2F;&#x2F;www.lc.com&#x2F;jsp&#x2F;el&#x2F;functions&lt;&#x2F;uri&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--以下标签用于注册函数  --&gt;</span><br><span class="line">  &lt;function&gt;</span><br><span class="line">    &lt;description&gt;此函数用于转换字符大小写&lt;&#x2F;description&gt;</span><br><span class="line">    &lt;name&gt;myLowerToUpper&lt;&#x2F;name&gt;</span><br><span class="line">    &lt;!--函数类所在的位置    --&gt;</span><br><span class="line">    &lt;function-class&gt;com.lc.jsp.ELFunctions&lt;&#x2F;function-class&gt;</span><br><span class="line">    &lt;!--函数的方法的签名：包含返回值，方法名，方法参数类型    --&gt;</span><br><span class="line">    &lt;function-signature&gt;java.lang.String lowerToUpper( java.lang.String )&lt;&#x2F;function-signature&gt;</span><br><span class="line">  &lt;&#x2F;function&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;taglib&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>第三步：在jsp页面中引用并使用</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page isELIgnored=<span class="string">&quot;false&quot;</span> %&gt;</span><br><span class="line">&lt;%--引入自定义标签库。uri为标签库的uri。prefix为标签库的<span class="keyword">short</span>-name --%&gt;</span><br><span class="line">&lt;%@ taglib uri =<span class="string">&quot;http://www.lc.com/jsp/el/functions&quot;</span> prefix=<span class="string">&quot;myFt&quot;</span>%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;%--使用自定义的标签库--%&gt;</span><br><span class="line">  $&#123;myFt:myLowerToUpper(<span class="string">&quot;abcdef&quot;</span>)&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-4-5-JSTL中的EL函数"><a href="#2-4-5-JSTL中的EL函数" class="headerlink" title="2.4.5 JSTL中的EL函数"></a>2.4.5 JSTL中的EL函数</h3><ul>
<li><p>Apache已经定义好了-套标准的标签库规范， 称为JSTL, JSP Standard Tag Library,即JSP标准标签库。该规范已通过JCP审核认定。</p>
</li>
<li><p>在JSTL中,已经定义好了一套对于字符串进行处理的函数标签库，这个函数标签库中定义了16个对于字符串进行处理的函数。我们在JSP页面中可以直接使用。</p>
</li>
<li><p>当然，需要使用JSTL,首先需要将其Jar包导入。</p>
<ul>
<li>jstl.jar：<a href="">https://plumriver.lanzous.com/it69Elwr73a</a></li>
<li>standard.jar：<a href="">https://plumriver.lanzous.com/i4nJVlwr74b</a></li>
</ul>
</li>
<li><p>JSTL函数标签库的.tld文件存放于standard的jar包的META-INF目录中,以文件名为fn.tld为例。</p>
<ul>
<li>此文件中定义了关于字符串操作的十六种函数。</li>
</ul>
<table>
<thead>
<tr>
<th>函数名</th>
<th>功能说明</th>
</tr>
</thead>
<tbody><tr>
<td>fn:contains(String, String)</td>
<td>判断在源字符串中是否包含目标字符串。</td>
</tr>
<tr>
<td>fn:containslgnoreCase(string,String)</td>
<td>判断在源字符串中是否包含目标字符串，并且在判断时忽略大小写</td>
</tr>
<tr>
<td>fn: endsWith(String,String)</td>
<td>判断源字符串是否以指定的目标字符串结尾。</td>
</tr>
<tr>
<td>fn:startsWith(String,tring)</td>
<td>判断源字符串是否以指定的目标字符串开头。</td>
</tr>
<tr>
<td>fn:indexOf(String,String)</td>
<td>在源字符串中查找目标字符串，并返回源字符串中最先与目标字符串匹配的第一个字符的素引</td>
</tr>
<tr>
<td>fn:replace(String,String,String)</td>
<td>把源字符串中的一部分替换为另外的字符串并返回替换后的字符串。</td>
</tr>
<tr>
<td>fn:substring(String,int,int)</td>
<td>获取源字符串中的从第二个参数指定下标开始，到第三个参数减1后的下标结束的子串。</td>
</tr>
<tr>
<td>fn:substringBefore(String,String)</td>
<td>获取源字符串中指定子字符串之前的子字符串。</td>
</tr>
<tr>
<td>fn:substringAfter(String,String)</td>
<td>获取源字符串中指定子字符串之后的子字符串。</td>
</tr>
<tr>
<td>fn:split(String,String)</td>
<td>将源字符串拆分为一个字符串数组。</td>
</tr>
<tr>
<td>fn:join(String[],String)</td>
<td>将源字符串数组中的所有字符串连接为一个字符串</td>
</tr>
<tr>
<td>fn:toLowerCase(String)</td>
<td>将源字符串中的所有字符改为小写。</td>
</tr>
<tr>
<td>fn: toUpperCase(String)</td>
<td>将源字符串中的所有字符改为大写。</td>
</tr>
<tr>
<td>fn:trim(String)</td>
<td>将源字符串中的开头和末尾的空格删除。</td>
</tr>
<tr>
<td>fn:escapeXml(String)</td>
<td>将源字符串中的字符“&lt;”,“&gt;”、” “ “和“&amp;”等转换为转义字符。</td>
</tr>
<tr>
<td>fn:length(Object)</td>
<td>返回字符串中的字符的个数，或者集合和数组的元素的个数。</td>
</tr>
</tbody></table>
</li>
<li><p>使用方法：</p>
<ul>
<li>第一步：jsp页面导入标签库。</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%<span class="meta">@taglib</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/functions&quot;</span> prefix=<span class="string">&quot;fn&quot;</span>%&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>第二步：使用标签库的函数。</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;fn:substring(<span class="string">&quot;abcdefgh&quot;</span>,<span class="number">2</span> ,<span class="number">6</span> )&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-4-6-总结"><a href="#2-4-6-总结" class="headerlink" title="2.4.6 总结"></a>2.4.6 总结</h3><ul>
<li><p>EL不能出现在Java 代码块、表达式块等JSP的动态代码部分。</p>
</li>
<li><p>EL只能从pageConext、request、 session、 application 四大域属性空间中获取数据。</p>
</li>
<li><p>EL不会抛出空指针异常。若访问一个null对象的属性,则什么也不显示。</p>
<p>EL不会抛出数组访问越界异常。若访问一个数组中的不存在的元素,则什么也不显示。</p>
</li>
<li><p>EL不具有对字对串进行处理的能力，就连简单的字符串拼接都不行。</p>
</li>
</ul>
<h2 id="2-5-自定义标签"><a href="#2-5-自定义标签" class="headerlink" title="2.5 自定义标签"></a>2.5 自定义标签</h2><ul>
<li>JSP中支持自定义标签。自定义标签是为了简化代码，使用自定义标签替换一个 Java代码片断，完成相同的功能。</li>
</ul>
<h3 id="2-5-1-基本用法"><a href="#2-5-1-基本用法" class="headerlink" title="2.5.1 基本用法"></a>2.5.1 基本用法</h3><ul>
<li><p>以“获取客户端IP”为例：</p>
</li>
<li><p>第一步：自定义标签类和标签函数。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClientTag</span> <span class="keyword">extends</span> <span class="title">SimpleTagSupport</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doTag</span><span class="params">()</span> <span class="keyword">throws</span> JspException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//获取pageContext对象</span></span><br><span class="line">    PageContext pageContext = (PageContext) <span class="keyword">this</span>.getJspContext();</span><br><span class="line">    <span class="comment">//获取请求对象</span></span><br><span class="line">    ServletRequest request = pageContext.getRequest();</span><br><span class="line">    <span class="comment">//获取客户端IP</span></span><br><span class="line">    String addr = request.getRemoteAddr();</span><br><span class="line">    <span class="comment">//获取标准输出流</span></span><br><span class="line">    JspWriter out = pageContext.getOut();</span><br><span class="line">    <span class="comment">//将客户端IP写入到输出流中</span></span><br><span class="line">    out.print(addr);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>第二步：注册标签。</p>
<ul>
<li>tld文件的创建方式和注册EL函数的方式一样。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;taglib xmlns&#x3D;&quot;http:&#x2F;&#x2F;java.sun.com&#x2F;xml&#x2F;ns&#x2F;j2ee&quot;</span><br><span class="line">        xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;</span><br><span class="line">        xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;java.sun.com&#x2F;xml&#x2F;ns&#x2F;j2ee http:&#x2F;&#x2F;java.sun.com&#x2F;xml&#x2F;ns&#x2F;j2ee&#x2F;web-jsptaglibrary_2_0.xsd&quot;</span><br><span class="line">        version&#x3D;&quot;2.0&quot;&gt;</span><br><span class="line">  &lt;!--以下标签作用为：定义标签库信息  --&gt;</span><br><span class="line">  &lt;description&gt;这是一个自定义标签库测试&lt;&#x2F;description&gt;</span><br><span class="line">  &lt;tlib-version&gt;1.0&lt;&#x2F;tlib-version&gt;</span><br><span class="line">  &lt;short-name&gt;ct&lt;&#x2F;short-name&gt;</span><br><span class="line">  &lt;uri&gt;http:&#x2F;&#x2F;www.lc.com&#x2F;jsp&#x2F;tag&lt;&#x2F;uri&gt;</span><br><span class="line">  &lt;!-- 注册标签--&gt;</span><br><span class="line">  &lt;tag&gt;</span><br><span class="line">    &lt;description&gt;获取客户端IP&lt;&#x2F;description&gt;</span><br><span class="line">    &lt;name&gt;ClientTag&lt;&#x2F;name&gt;</span><br><span class="line">    &lt;tag-class&gt;com.lc.tag.ClientTag&lt;&#x2F;tag-class&gt;</span><br><span class="line">&lt;!--  body-content：表示此标签是否有标签体。默认empty表示没有  --&gt;</span><br><span class="line">    &lt;body-content&gt;empty&lt;&#x2F;body-content&gt;</span><br><span class="line">  &lt;&#x2F;tag&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;taglib&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>第三步：引用标签库，并使用。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page isELIgnored=<span class="string">&quot;false&quot;</span> %&gt;</span><br><span class="line">&lt;%@ taglib uri=<span class="string">&quot;http://www.lc.com/jsp/tag&quot;</span> prefix=<span class="string">&quot;ct&quot;</span>%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;ct:ClientTag/&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-5-2-定义带标签体的标签"><a href="#2-5-2-定义带标签体的标签" class="headerlink" title="2.5.2 定义带标签体的标签"></a>2.5.2 定义带标签体的标签</h3><ul>
<li><p>body-content的使用：</p>
<ul>
<li>empty:表示当前标签没有标签体</li>
<li>scriptless:表示当前标签有标签体。但该标签体中不能出现Java脚本(java代码块，JSP表达式)，但可以出现EL表达式</li>
<li>jsp:(已过时，不能使用)表示当前标签有标签体，且会将标签体原样显示到浏览器</li>
<li>ctagdependent:表示当前标签有标签体，且会将标签体原样显示到浏览器，即使有EL表达式，也不会生效</li>
</ul>
</li>
<li><p>实现具有将字符串小写转换成大写的标签。</p>
</li>
<li><p>第一步：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LowerToUpperTag</span> <span class="keyword">extends</span> <span class="title">SimpleTagSupport</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doTag</span><span class="params">()</span> <span class="keyword">throws</span> JspException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//创建一个输出流。原因：该流中的内容可以通过toString()方法获取其文本形式</span></span><br><span class="line">    StringWriter writer = <span class="keyword">new</span> StringWriter();</span><br><span class="line">    <span class="comment">//获取标签体对象</span></span><br><span class="line">    JspFragment jspBody = <span class="keyword">this</span>.getJspBody();</span><br><span class="line">    <span class="comment">//将标签体内容写入输出流</span></span><br><span class="line">    jspBody.invoke(writer);</span><br><span class="line">    <span class="comment">//获取缓冲区流的字符串形式数据</span></span><br><span class="line">    String string = writer.toString();</span><br><span class="line">    <span class="comment">//将字符串变成大写</span></span><br><span class="line">    String aCase = string.toUpperCase();</span><br><span class="line">    <span class="comment">//获取标签输出流并将字符串放到流中</span></span><br><span class="line">    <span class="keyword">this</span>.getJspContext().getOut().print(aCase);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>第二步：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--  注册标签--&gt;</span><br><span class="line">&lt;tag&gt;</span><br><span class="line">  &lt;description&gt;将字符串小写变大写&lt;&#x2F;description&gt;</span><br><span class="line">  &lt;name&gt;LowerToUpperTag&lt;&#x2F;name&gt;</span><br><span class="line">  &lt;tag-class&gt;com.lc.tag.LowerToUpperTag&lt;&#x2F;tag-class&gt;</span><br><span class="line">  &lt;body-content&gt;scriptless&lt;&#x2F;body-content&gt;</span><br><span class="line">&lt;&#x2F;tag&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>第三步：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;ct:LowerToUpperTag&gt;asd&lt;/ct:LowerToUpperTag&gt;&lt;br&gt;</span><br><span class="line">&lt;%</span><br><span class="line">String name = <span class="string">&quot;abcde&quot;</span>;</span><br><span class="line">pageContext.setAttribute(<span class="string">&quot;name&quot;</span>, name);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;ct:LowerToUpperTag&gt;$&#123;name&#125;&lt;/ct:LowerToUpperTag&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-5-3-定义带属性的标签"><a href="#2-5-3-定义带属性的标签" class="headerlink" title="2.5.3 定义带属性的标签"></a>2.5.3 定义带属性的标签</h3><ul>
<li><p>实现if-else功能的标签</p>
</li>
<li><p>第一步：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IfTag</span> <span class="keyword">extends</span> <span class="title">SimpleTagSupport</span> </span>&#123;</span><br><span class="line"><span class="comment">//  jsp中标签的属性对应的是标签注册器的setXxx方法</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">boolean</span> test;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTest</span><span class="params">(<span class="keyword">boolean</span> test)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.test = test;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doTag</span><span class="params">()</span> <span class="keyword">throws</span> JspException, IOException </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (test)&#123;</span><br><span class="line">      <span class="comment">//获取标签体</span></span><br><span class="line">      JspFragment jspBody = <span class="keyword">this</span>.getJspBody();</span><br><span class="line">      <span class="comment">//显示标签体</span></span><br><span class="line">      jspBody.invoke(<span class="keyword">this</span>.getJspContext().getOut());</span><br><span class="line">      <span class="comment">//以下代码等价于上述代码。</span></span><br><span class="line">      <span class="comment">//如果invoke里写null，表示默认输出标签体的内容</span></span><br><span class="line">      <span class="keyword">this</span>.getJspBody().invoke(<span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>第二步：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;tag&gt;</span><br><span class="line">  &lt;name&gt;IfTag&lt;&#x2F;name&gt;</span><br><span class="line">  &lt;tag-class&gt;com.lc.tag.IfTag&lt;&#x2F;tag-class&gt;</span><br><span class="line">  &lt;body-content&gt;tagdependent&lt;&#x2F;body-content&gt;</span><br><span class="line">  &lt;attribute&gt;</span><br><span class="line">    &lt;name&gt;test&lt;&#x2F;name&gt;</span><br><span class="line">    &lt;!--required:为true表示此属性必须存在--&gt;</span><br><span class="line">    &lt;required&gt;true&lt;&#x2F;required&gt;</span><br><span class="line">    &lt;!--runtime expression value : 运行时表达式的值</span><br><span class="line">    为true,则该属性的值支持EL与JSP的表达式--&gt;</span><br><span class="line">    &lt;rtexprvalue&gt;true&lt;&#x2F;rtexprvalue&gt;</span><br><span class="line">  &lt;&#x2F;attribute&gt;</span><br><span class="line">&lt;&#x2F;tag&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>第三步：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">  <span class="keyword">boolean</span> gender = <span class="keyword">true</span>;</span><br><span class="line">  pageContext.setAttribute(<span class="string">&quot;gender&quot;</span>, gender);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;ct:IfTag test=&quot;$&#123;gender&#125;&quot;&gt;男&lt;/ct:IfTag&gt;</span><br><span class="line">&lt;ct:IfTag test=&quot;$&#123; not gender&#125;&quot;&gt;女&lt;/ct:IfTag&gt;</span><br><span class="line">&lt;ct:IfTag test=&quot;&lt;%= gender%&gt;&quot;&gt;女&lt;/ct:IfTag&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-5-4-定以具有”跳过JSP“功能的标签"><a href="#2-5-4-定以具有”跳过JSP“功能的标签" class="headerlink" title="2.5.4 定以具有”跳过JSP“功能的标签"></a>2.5.4 定以具有”跳过JSP“功能的标签</h3><h3 id="2-5-5-定义forEachList功能的标签"><a href="#2-5-5-定义forEachList功能的标签" class="headerlink" title="2.5.5 定义forEachList功能的标签"></a>2.5.5 定义forEachList功能的标签</h3><ul>
<li><p>注意定义的var的类型</p>
</li>
<li><p>第一步</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ForEachListTag</span> <span class="keyword">extends</span> <span class="title">SimpleTagSupport</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> List items;</span><br><span class="line">  <span class="comment">//注意此处的类型不能是object，可以是string类型，var只起到标识作用</span></span><br><span class="line">  <span class="keyword">private</span> String <span class="keyword">var</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setItems</span><span class="params">(List items)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.items = items;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setVar</span><span class="params">(String <span class="keyword">var</span>)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.<span class="keyword">var</span> = <span class="keyword">var</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doTag</span><span class="params">()</span> <span class="keyword">throws</span> JspException, IOException </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (Object o : items) &#123;</span><br><span class="line">      <span class="comment">//将当前遍历的对象放入域属型中，第二次遍历便开始更新遍历的值</span></span><br><span class="line">      <span class="keyword">this</span>.getJspContext().setAttribute(<span class="keyword">var</span>, o);</span><br><span class="line">      <span class="keyword">this</span>.getJspBody().invoke(<span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>第二步</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;tag&gt;</span><br><span class="line">  &lt;name&gt;forEachList&lt;&#x2F;name&gt;</span><br><span class="line">  &lt;tag-class&gt;com.lc.tag.ForEachListTag&lt;&#x2F;tag-class&gt;</span><br><span class="line">  &lt;body-content&gt;scriptless&lt;&#x2F;body-content&gt;</span><br><span class="line">  &lt;attribute&gt;</span><br><span class="line">    &lt;name&gt;items&lt;&#x2F;name&gt;</span><br><span class="line">    &lt;required&gt;true&lt;&#x2F;required&gt;</span><br><span class="line">    &lt;rtexprvalue&gt;true&lt;&#x2F;rtexprvalue&gt;</span><br><span class="line">  &lt;&#x2F;attribute&gt;</span><br><span class="line">  &lt;attribute&gt;</span><br><span class="line">    &lt;name&gt;var&lt;&#x2F;name&gt;</span><br><span class="line">    &lt;required&gt;true&lt;&#x2F;required&gt;</span><br><span class="line">    &lt;rtexprvalue&gt;false&lt;&#x2F;rtexprvalue&gt;</span><br><span class="line">  &lt;&#x2F;attribute&gt;</span><br><span class="line">&lt;&#x2F;tag&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>第三步</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">  List names = <span class="keyword">new</span> ArrayList();</span><br><span class="line">  names.add(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">  names.add(<span class="string">&quot;李四&quot;</span>);</span><br><span class="line">  names.add(<span class="string">&quot;王五&quot;</span>);</span><br><span class="line">  pageContext.setAttribute(<span class="string">&quot;names&quot;</span>, names);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;ct:forEachList items=<span class="string">&quot;$&#123;names&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;name&quot;</span>&gt;</span><br><span class="line">  $&#123;name&#125;&lt;br&gt;</span><br><span class="line">&lt;/ct:forEachList&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-5-6-定义forEach功能的标签"><a href="#2-5-6-定义forEach功能的标签" class="headerlink" title="2.5.6 定义forEach功能的标签"></a>2.5.6 定义forEach功能的标签</h3><ul>
<li><p>第一步</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ForEachTag2</span> <span class="keyword">extends</span> <span class="title">SimpleTagSupport</span> </span>&#123;</span><br><span class="line">  <span class="comment">//此处定义的类型是Object</span></span><br><span class="line">  <span class="keyword">private</span> Object items;</span><br><span class="line">  <span class="keyword">private</span> String <span class="keyword">var</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setItems</span><span class="params">(Object items)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.items = items;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setVar</span><span class="params">(String <span class="keyword">var</span>)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.<span class="keyword">var</span> = <span class="keyword">var</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> Collection <span class="title">getCollection</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (items <span class="keyword">instanceof</span> List)&#123;</span><br><span class="line">      <span class="keyword">return</span> (List)items;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (items <span class="keyword">instanceof</span> Set)&#123;</span><br><span class="line">      <span class="keyword">return</span> (Set)items;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (items <span class="keyword">instanceof</span> Map)&#123;</span><br><span class="line">      <span class="keyword">return</span> ((Map)items).entrySet();</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (items.getClass().isArray())&#123;</span><br><span class="line">      <span class="comment">//判断items是否是一个数组类型的数据。包括引用数组和基本数据数组</span></span><br><span class="line">      List nums = <span class="keyword">new</span> ArrayList();</span><br><span class="line">      <span class="comment">//通过反射的功能实现数组的转换</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; Array.getLength(items); i++) &#123;</span><br><span class="line">        nums.add(Array.get(items,i));</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> nums;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doTag</span><span class="params">()</span> <span class="keyword">throws</span> JspException, IOException </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (Object o : getCollection()) &#123;</span><br><span class="line">      <span class="keyword">this</span>.getJspContext().setAttribute(<span class="keyword">var</span>, o);</span><br><span class="line">      System.out.println(o);</span><br><span class="line">      <span class="keyword">this</span>.getJspBody().invoke(<span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>第二步：与forEachList功能的标签的第二步类似</p>
</li>
<li><p>第三步</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">  List names = <span class="keyword">new</span> ArrayList();</span><br><span class="line">  names.add(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">  names.add(<span class="string">&quot;李四&quot;</span>);</span><br><span class="line">  names.add(<span class="string">&quot;王五&quot;</span>);</span><br><span class="line">  pageContext.setAttribute(<span class="string">&quot;names&quot;</span>, names);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;ct:forEach items=<span class="string">&quot;$&#123;names&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;name&quot;</span>&gt;</span><br><span class="line">  $&#123;name&#125;&lt;br&gt;</span><br><span class="line">&lt;/ct:forEach&gt;</span><br><span class="line">&lt;%--set--%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">  Set schools = <span class="keyword">new</span> HashSet();</span><br><span class="line">  schools.add(<span class="string">&quot;清华&quot;</span>);</span><br><span class="line">  schools.add(<span class="string">&quot;北京&quot;</span>);</span><br><span class="line">  schools.add(<span class="string">&quot;河南&quot;</span>);</span><br><span class="line">  pageContext.setAttribute(<span class="string">&quot;schools&quot;</span>, schools);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;ct:forEach items=<span class="string">&quot;$&#123;schools &#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;school&quot;</span>&gt;</span><br><span class="line">  $&#123;school&#125;&lt;br&gt;</span><br><span class="line">&lt;/ct:forEach&gt;</span><br><span class="line">&lt;%--map--%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">  Map&lt;String,Object&gt; persons = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">  persons.put(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;李四&quot;</span>);</span><br><span class="line">  persons.put(<span class="string">&quot;age&quot;</span>, <span class="number">18</span>);</span><br><span class="line">  persons.put(<span class="string">&quot;address&quot;</span>, <span class="string">&quot;beijing&quot;</span>);</span><br><span class="line">  pageContext.setAttribute(<span class="string">&quot;persons&quot;</span>, persons);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;ct:forEach items=<span class="string">&quot;$&#123;persons&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;person&quot;</span>&gt;</span><br><span class="line">  $&#123;person&#125;&lt;br&gt;</span><br><span class="line">&lt;/ct:forEach&gt;</span><br><span class="line">&lt;%--引用类型数组--%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">  Object[] objects = &#123;<span class="string">&quot;清华&quot;</span>,<span class="string">&quot;北大&quot;</span>,<span class="string">&quot;南大&quot;</span>&#125;;</span><br><span class="line">  pageContext.setAttribute(<span class="string">&quot;objects&quot;</span>, objects);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;ct:forEach items=<span class="string">&quot;$&#123;objects&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;object&quot;</span>&gt;</span><br><span class="line">  $&#123;object&#125;&lt;br&gt;</span><br><span class="line">&lt;/ct:forEach&gt;</span><br><span class="line">&lt;%--基本数据类型数组--%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">  <span class="keyword">int</span>[] nums = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;;</span><br><span class="line">  pageContext.setAttribute(<span class="string">&quot;nums&quot;</span>, nums);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;ct:forEach items=<span class="string">&quot;$&#123;nums&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;num&quot;</span>&gt;</span><br><span class="line">  $&#123;num&#125;&lt;br&gt;</span><br><span class="line">&lt;/ct:forEach&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-5-7-将自定义标签库打包发行"><a href="#2-5-7-将自定义标签库打包发行" class="headerlink" title="2.5.7 将自定义标签库打包发行"></a>2.5.7 将自定义标签库打包发行</h3><p>eclipse方式：</p>
<ul>
<li>右击项目–&gt;选择Export–&gt;选择Export。</li>
<li>在弹窗中选择java–&gt;选择JAR file–&gt;点击Next。</li>
<li>去掉窗口右边的.classPath和.project。选择要打包的项目，将除源码外的所有对号都去掉。</li>
<li>在弹窗中选择打包后的文件位置，输入文件名为Xxx.jar。然后一直按确定即可。</li>
<li>用解压软件打开打包后的jar包，将配置文件添加到jar包中的META-INF目录下。</li>
</ul>
<h1 id="第三章-JSTL标签库"><a href="#第三章-JSTL标签库" class="headerlink" title="第三章 JSTL标签库"></a>第三章 JSTL标签库</h1><ul>
<li>JSP Standard Tag Library,即JSP标准标签库。JSTL 中定义了五个标签库:。<ul>
<li>核心标签库:主要用于完成基本的逻辑运算。</li>
<li>格式化标签库:主要用于完成日期、数字的格式化显示。</li>
<li>EL函数标签库:定义了若干EL函数。</li>
<li>SQL操作标签库:用于完成SQL操作。(不推荐使用。对于SQL操作，已经完全由Java代码完成。）</li>
<li>XML操作标签库:完成XML操作。（不推荐使用。对于XML操作，已经完全由Java代码完成。）</li>
</ul>
</li>
<li>下载位置：<ul>
<li>jstl.jar：<a href="">https://plumriver.lanzous.com/it69Elwr73a</a></li>
<li>standard.jar：<a href="">https://plumriver.lanzous.com/i4nJVlwr74b</a></li>
</ul>
</li>
</ul>
<h2 id="3-1-核心标签库"><a href="#3-1-核心标签库" class="headerlink" title="3.1 核心标签库"></a>3.1 核心标签库</h2><ul>
<li>使用JSTL的核心标签库，需要在页面中通过taglib指令首先将标签库导入。</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>

<p><strong>c:set</strong></p>
<ul>
<li>用于进行变量定义，并将变量存放到指定域属性空间:为Bean的属性赋值;设置Map的key与value等。该标签在实际开发中并不常用。</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--设置域属型request中有一个name值为李四的属性--%&gt;</span><br><span class="line">&lt;c:set <span class="keyword">var</span>=<span class="string">&quot;name&quot;</span> value=<span class="string">&quot;李四&quot;</span> scope=<span class="string">&quot;request&quot;</span>/&gt;</span><br><span class="line">name = $&#123;requestScope.name&#125;&lt;br&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>value:变量的值</li>
<li>var;变量名</li>
<li>scope:将变量存放的域属性空间，取值为page. request. session. application。 默认为page范围</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--为bean的属性赋值--%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">  Student student = <span class="keyword">new</span> Student();</span><br><span class="line">  session.setAttribute(<span class="string">&quot;student&quot;</span>, student);</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;c:set value=<span class="string">&quot;李四&quot;</span> property=<span class="string">&quot;name&quot;</span> target=<span class="string">&quot;$&#123;sessionScope.student&#125;&quot;</span>/&gt;</span><br><span class="line">&lt;c:set value=<span class="string">&quot;15&quot;</span> property=<span class="string">&quot;age&quot;</span> target=<span class="string">&quot;$&#123;sessionScope.student&#125;&quot;</span>/&gt;</span><br><span class="line">student = $&#123;student.toString()&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>target:指定的Bean对象</li>
<li>property:指定对象的指定属性。</li>
<li>value:为指定对象的指定属性所赋的值。</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">  Map&lt;String ,Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">  pageContext.setAttribute(<span class="string">&quot;map&quot;</span>, map);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;c:set value=<span class="string">&quot;北京&quot;</span> property=<span class="string">&quot;address&quot;</span> target=<span class="string">&quot;$&#123;pageScope.map&#125;&quot;</span>/&gt;</span><br><span class="line">&lt;c:set value=<span class="string">&quot;18&quot;</span> property=<span class="string">&quot;age&quot;</span> target=<span class="string">&quot;$&#123;pageScope.map&#125;&quot;</span>/&gt;</span><br><span class="line">map = $&#123;map.address&#125;  $&#123;map.age&#125;&lt;br&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>target:指定的map</li>
<li>property:指定map的指定的key</li>
<li>value:为指定map的指定的key所赋的值</li>
</ul>
<p><strong>c:remove</strong></p>
<ul>
<li>从域属性空间中删除指定变量,该标签不常用。</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--c:remove  删除域中的属性--%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">  String name = <span class="string">&quot;asd&quot;</span>;</span><br><span class="line">  pageContext.setAttribute(<span class="string">&quot;name&quot;</span>, name);</span><br><span class="line">%&gt;</span><br><span class="line">name = $&#123;name&#125;&lt;br&gt;</span><br><span class="line">&lt;%--删除指定域中的指定属性--%&gt;</span><br><span class="line">&lt;c:remove <span class="keyword">var</span>=<span class="string">&quot;name&quot;</span> scope=<span class="string">&quot;page&quot;</span>/&gt;</span><br><span class="line">name = $&#123;name&#125;&lt;br&gt;</span><br><span class="line">&lt;%--删除所有域中的指定属性--%&gt;</span><br><span class="line">&lt;c:remove <span class="keyword">var</span>=<span class="string">&quot;name&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>var：要删除的属性名。</li>
<li>scope:要删除的域。</li>
</ul>
<p><strong>c:out</strong></p>
<ul>
<li>用于在页面。上输出EL表达式的值。该标签不常用。</li>
<li>EL表达式不用&lt;c:out/&gt;标签,就可以直接在页面上输出，那么使用这个&lt;c:out/&gt;标签有什么更强的作用呢? </li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--c:out的使用--%&gt;</span><br><span class="line">&lt;c:set <span class="keyword">var</span>=<span class="string">&quot;name&quot;</span> value=<span class="string">&quot;李四&quot;</span>/&gt;</span><br><span class="line">name = &lt;c:out value=&quot;$&#123;name&#125;&quot; default=&quot;名字&quot; &gt;&lt;/c:out&gt;&lt;br&gt;</span><br><span class="line">name = $&#123;name&#125;&lt;br&gt;</span><br><span class="line">&lt;c:set <span class="keyword">var</span>=<span class="string">&quot;age&quot;</span> value=<span class="string">&quot;&lt;h1&gt;15&lt;/h1&gt;&quot;</span>/&gt;</span><br><span class="line">age = &lt;c:out value=<span class="string">&quot;$&#123;age&#125;&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">&lt;%--下面两行代码效果相同。都会显示变大后的数字--%&gt;</span><br><span class="line">age = $&#123;age&#125;&lt;br&gt;</span><br><span class="line">age = &lt;c:out value=<span class="string">&quot;$&#123;age&#125;&quot;</span> escapeXml=<span class="string">&quot;false&quot;</span>/&gt;&lt;br&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>value:指定要输出的EL表达式。</li>
<li>default：当EL表达式的变量没有定义，默认值为default的值</li>
<li>escapeXml;是否忽略HTML标签。<ul>
<li>若为true,则不解析HTML标签,将按原样输出,为默认值。</li>
<li>若为false,则解析HTML标签。EL表达式本身也是解析HTML标签的。</li>
</ul>
</li>
</ul>
<p><strong>c:catch</strong></p>
<ul>
<li>捕获标签体内的Java代码出现的异常</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--c:<span class="keyword">catch</span> 的使用--%&gt;</span><br><span class="line">&lt;c:<span class="keyword">catch</span> <span class="keyword">var</span>=<span class="string">&quot;ex&quot;</span>&gt;</span><br><span class="line">  &lt;%</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">  %&gt;</span><br><span class="line">&lt;/c:catch&gt;</span><br><span class="line">异常 = $&#123;ex.message&#125;&lt;br&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>var：异常的引用名称</li>
</ul>
<p><strong>c:if</strong></p>
<ul>
<li>用于实现对于条件的判断。</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--c:<span class="keyword">if</span>的使用--%&gt;</span><br><span class="line">&lt;% <span class="keyword">boolean</span> gender = <span class="keyword">true</span>; pageContext.setAttribute(<span class="string">&quot;gender&quot;</span>, gender);%&gt;</span><br><span class="line">&lt;c:<span class="keyword">if</span> test=<span class="string">&quot;gender&quot;</span>&gt;</span><br><span class="line">  男</span><br><span class="line">&lt;/c:if&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>test:判断的条件。若为true,则执行标签体，否则不执行</li>
<li>var:存储test的判断结果。不常用。</li>
<li>scope:存储test判断结果的变量的存放范围。不常用。</li>
</ul>
<p><strong>c:choose</strong></p>
<ul>
<li>相当于java中的switch-case-default语句</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--c:choose的使用--%&gt;</span><br><span class="line">&lt;%</span><br><span class="line"> <span class="keyword">int</span> currentPage = <span class="number">1</span>;</span><br><span class="line"> pageContext.setAttribute(<span class="string">&quot;currentPage&quot;</span>, currentPage);</span><br><span class="line"></span><br><span class="line">%&gt;</span><br><span class="line">&lt;%--c:choose 表示是否满足以下情况。当某一情况满足时，就不比较剩下的情况了--%&gt;</span><br><span class="line">&lt;c:choose&gt;</span><br><span class="line">  &lt;%--c:when表示当test为<span class="keyword">true</span>时，显示标签体中的内容--%&gt;</span><br><span class="line">  &lt;c:when test=<span class="string">&quot;$&#123;currentPage == 1&#125;&quot;</span>&gt;</span><br><span class="line">    首页 上一页 &lt;a href=&quot;#&quot;&gt;下一页&lt;/a&gt; &lt;a href=&quot;#&quot;&gt;末页&lt;/a&gt;</span><br><span class="line">  &lt;/c:when&gt;</span><br><span class="line">  &lt;c:when test=<span class="string">&quot;$&#123;currentPage == 5&#125;&quot;</span>&gt;</span><br><span class="line">    &lt;a href=&quot;#&quot;&gt;首页&lt;/a&gt; &lt;a href=&quot;#&quot;&gt;上一页&lt;/a&gt; 下一页 末页</span><br><span class="line">  &lt;/c:when&gt;</span><br><span class="line">  &lt;%--c:otherwise：表示上述都不满足时，显示此标签体中的内容--%&gt;</span><br><span class="line">  &lt;c:otherwise&gt;</span><br><span class="line">    &lt;a href=&quot;#&quot;&gt;首页&lt;/a&gt; &lt;a href=&quot;#&quot;&gt;上一页&lt;/a&gt; &lt;a href=&quot;#&quot;&gt;下一页&lt;/a&gt; &lt;a href=&quot;#&quot;&gt;末页&lt;/a&gt;</span><br><span class="line">  &lt;/c:otherwise&gt;</span><br><span class="line">&lt;/c:choose&gt;</span><br></pre></td></tr></table></figure>

<p><strong>c:forEach</strong></p>
<ul>
<li>用于循环遍历数组、List, Set、 Map集合。在实际应用中使用非常频繁。</li>
<li>varStatus:代表循环状态的变量名称</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;% <span class="keyword">int</span>[] nums = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;; pageContext.setAttribute(<span class="string">&quot;nums&quot;</span>, nums);%&gt;</span><br><span class="line">&lt;%--遍历nums数组，从下标<span class="number">1</span>开始，到下标<span class="number">4</span>结束，每搁两个下标输出--%&gt;</span><br><span class="line">&lt;c:forEach items=<span class="string">&quot;$&#123;nums&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;num&quot;</span> begin=<span class="string">&quot;1&quot;</span> end=<span class="string">&quot;4&quot;</span> step=<span class="string">&quot;2&quot;</span>&gt;</span><br><span class="line">  $&#123;num&#125;&lt;br&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br><span class="line">asd&lt;br&gt;</span><br><span class="line">&lt;%--遍历<span class="number">1</span>到<span class="number">9</span>，每隔两个输出。即：<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>--%&gt;</span><br><span class="line">&lt;c:forEach <span class="keyword">var</span>=<span class="string">&quot;num&quot;</span> begin=<span class="string">&quot;1&quot;</span> end=<span class="string">&quot;9&quot;</span> step=<span class="string">&quot;2&quot;</span>&gt;</span><br><span class="line">  $&#123;num&#125;&lt;br&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure>

<h2 id="3-2-格式化标签库"><a href="#3-2-格式化标签库" class="headerlink" title="3.2 格式化标签库"></a>3.2 格式化标签库</h2><ul>
<li><p>使用JSTL的核心标签库，需要在页面中通过tagib指令首先将标签库导入。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;fmt&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/fmt&quot;</span> %&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>fmt:formatDate</strong></p>
<ul>
<li>该标签用于使用不同的模式格式化日期。其常用属性有;<ul>
<li>value:将要被格式化的数据</li>
<li>pattern:格式化的模式。其与SimpleDateFormat的参数设置方式相同。</li>
<li>var:格式化后的字符串所要存放的变量。若不指定var, 则会将格式化过的结果直接显示在页面。</li>
<li>scope:变量存放的域属性空间，取值为page、 request、 session，application。 默认为page范围。</li>
<li>type:其取值为date、time, 或both,表示给出的value是日期、时间,还是两者都包含。默认为date</li>
</ul>
</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--fmt:formatDate的使用--%&gt;</span><br><span class="line">&lt;% Date date = <span class="keyword">new</span> Date(); pageContext.setAttribute(<span class="string">&quot;date&quot;</span>, date);%&gt;</span><br><span class="line">date = &lt;fmt:formatDate value=<span class="string">&quot;$&#123;date&#125;&quot;</span> pattern=<span class="string">&quot;yyyy-MM-dd&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">&lt;%--<span class="keyword">var</span>:当加上<span class="keyword">var</span>属性后，格式化的日期不会显示在浏览器上而是赋予birth域属型--%&gt;</span><br><span class="line">date = &lt;fmt:formatDate value=<span class="string">&quot;$&#123;date&#125;&quot;</span> pattern=<span class="string">&quot;yyyy-MM-dd&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;birth&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">生日：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;birth&quot;</span> value=<span class="string">&quot;$&#123;birth&#125;&quot;</span>&gt;&lt;br&gt;</span><br></pre></td></tr></table></figure>

<p><strong>fmt:parseDate</strong></p>
<ul>
<li>该标签用于将指定字符串转换为日期类型。主要用于解析字符串。常用的属性有:<ul>
<li>value:将要被转换的数据。</li>
<li>pattern:将要被转换的数据的模式。其与SimpleDateFormat的参数设置方式相同。</li>
<li>var:转换后的日期类型数据所要存放的变量。若不指定var,则会将转换过的结果直接显示在页面。</li>
<li>scope:变量存放的域属性空间，职值为page. request、 session、 applcation。 默认为page范围</li>
</ul>
</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--fmt:parseDate:字符串转换成日期--%&gt;</span><br><span class="line">&lt;fmt:parseDate value=<span class="string">&quot;2000/2/6&quot;</span> pattern=<span class="string">&quot;yyyy/MM/dd&quot;</span>/&gt;&lt;br&gt;</span><br></pre></td></tr></table></figure>

<p><strong>fmt:formatNumber</strong></p>
<ul>
<li>该标签用于按照指定格式对数字进行格式化。常用的属性有:<ul>
<li>value:要显示的数字</li>
<li>groupingUsed：是否对数字分组 (TRUE 或 FALSE)。默认true</li>
<li>type:NUMBER，CURRENCY,或PERCENT类型。默认NUMBER类型</li>
<li>pattern:指定一个自定义的格式化模式用与输出。</li>
<li>var：存储格式化数字的变量</li>
<li>scope：var属性的作用域</li>
<li>maxIntegerDigits    整型数最多的位数    </li>
<li>minIntegerDigits    整型数最少的位数    </li>
<li>maxFractionDigits    小数点后最多的位数</li>
<li>minFractionDigits    小数点后最少的位数</li>
</ul>
</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;fmt:formatNumber value=<span class="string">&quot;$&#123;12345678&#125;&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">&lt;fmt:formatNumber value=<span class="string">&quot;$&#123;12345678&#125;&quot;</span> groupingUsed=<span class="string">&quot;false&quot;</span>/&gt;&lt;br&gt;</span><br></pre></td></tr></table></figure>

<p><strong>fmt:parseNumber</strong></p>
<ul>
<li>该标签用于将指肃字符串转换为数值类型。常用的属性有: <ul>
<li>value：要解析的数字    </li>
<li>type：NUMBER,CURRENCY，或 PERCENT</li>
<li>integerOnly：是否只解析整型数（true）或浮点数（false）</li>
<li>pattern：自定义解析模式</li>
<li>var：存储待解析数字的变量    </li>
<li>scope：var属性的作用域</li>
</ul>
</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;fmt:parseNumber value=<span class="string">&quot;123.456&quot;</span> integerOnly=<span class="string">&quot;true&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>

<h1 id="第四章-系统开发模型"><a href="#第四章-系统开发模型" class="headerlink" title="第四章 系统开发模型"></a>第四章 系统开发模型</h1><ul>
<li>系统开发模型，即系统架构,是指整合应用系统程序大的结构。经常提到的系统结构有两种:三层架构与MVC。这两种结构既有区别，又有联系。但这两种结构的使用均是为了降低系统模块间的耦合度。</li>
<li>传统的JavaWeb项目的系统开发模型大体经历了四个阶段:纯JSP、JSP+JavaBean 的Model1、MVC的Model2、MVC+三层架构。</li>
</ul>
<h2 id="4-1-开发模式"><a href="#4-1-开发模式" class="headerlink" title="4.1 开发模式"></a>4.1 开发模式</h2><h3 id="4-1-1-纯JSP开发"><a href="#4-1-1-纯JSP开发" class="headerlink" title="4.1.1 纯JSP开发"></a>4.1.1 纯JSP开发</h3><p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20210222090656.png"></p>
<ul>
<li>“纯JSP”开发模型中将所有业务处理、数据显示功能都由JSP页面完成。其缺点是很明显的: JSP页面中的代码结构很乱，显示功能与业务处理功能代码没有划分，维护与升级相当麻烦….. .</li>
</ul>
<h3 id="4-1-2-JSP-JavaBean的Model1"><a href="#4-1-2-JSP-JavaBean的Model1" class="headerlink" title="4.1.2 JSP+JavaBean的Model1"></a>4.1.2 JSP+JavaBean的Model1</h3><p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20210222091600.png"></p>
<ul>
<li>这种开发模型将绝大多数业务处理功能交给了专[的JavaBean来完成,而JSP页面主要来完成数据显示功能。已经较“纯JSP页面”的开发模型有了很大改进。但该开发模式对于来自客户端的请求的解析, 及对于JavaBean对象的选择与创建,仍然是由JSP页面通过Java代码块等来完成的。也就是说，JSP页面还承担着大量的请求解析、业务处理功能。</li>
<li>JavaBean根据其具体的概念的不同，可以分为两大类:广义JavaBean与狭义JavaBean。</li>
</ul>
<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20210222092034.png"></p>
<ul>
<li>所谓广义JavaBean,就是指一般意义上的Java类其主要功能有两个:承载数据与业务处理,所以广义的JavaBean又分为两类:数据承载Bean与业务处理Bean，数据承载Bean就是指实体类，专门用于承载业务数据的，如Student、User 等。而业务处理Bean则是指Service或Dao对象，专门用于处理用户提交请求的。</li>
<li>狭义JavaBean,是指符合SUN公司提出的“JavaBean规范”的Java类。JavaBean 规范规定，满足以下四点的Java类，称为JavaBean: <ul>
<li>该类需要是公共的，即public class …</li>
<li>该类需要实现Serialiable接口。</li>
<li>该类需要具备无参构造器，无论是默认的，还是显示定义的。</li>
<li>该类若有成员变量,则这些成员变量必须是私有的，且需要提供这些私有成员变量的公共getter与setter。</li>
</ul>
</li>
<li>在实际项目中，实体类-般会被定义为狭义的JavaBean。即，广义的JavaBean的数据承载Bean一般会被定义为满足“JavaBean规范”的狭义JavaBean。</li>
</ul>
<h3 id="4-1-3-MVC的Model2"><a href="#4-1-3-MVC的Model2" class="headerlink" title="4.1.3 MVC的Model2"></a>4.1.3 MVC的Model2</h3><p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20210222092700.png"></p>
<ul>
<li>MVC,即Model模型、View视图，及Controller控制器。<ul>
<li>View:视图，为用户提供使用界面，与用户直接进行交互。</li>
<li>Model:模型，承载数据,并对用户提交请求进行计算的模块。其分为两类，一类称为数据承载Bean, 一类称为业务处理Bean。所谓数据承载Bean是指实体类，专门用户承载业务数据的，如Student, User等。而业务处理Bean则是指Service 或Dao对象，专门用于处理用户提交请求的。</li>
<li>Controller:控制器，用于将用户请求转发给相应的Model进行处理，并根据Model的计算结果向用户提供相应响应。</li>
</ul>
</li>
<li>MVC架构程序的工作流程是这样的:</li>
<li>1)用户通过View页面向服务端提出请求，可以是表单请求、超链接请求、AJAX请求，</li>
<li><ol start="2">
<li>服务端Contoller控制器接收到请求后对请求进行解析,找到相应的Model对用户请求进行业务处理。并把响应结果给View。</li>
</ol>
</li>
</ul>
<h3 id="4-1-4-三层架构"><a href="#4-1-4-三层架构" class="headerlink" title="4.1.4 三层架构"></a>4.1.4 三层架构</h3><p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20210222092841.png"></p>
<ul>
<li>三层架构是指:视图层View、服务层Service, 与持久层Dao.它们分别完成不同的功能。</li>
<li>View层:表现层、视图层，对于Web开发,也称为Wweb层。用于接收用户提交请求的代码在这里编写。</li>
<li>Service层:业务层、逻辑层，系统的业务逻辑主要在这里完成。</li>
<li>Dao层:持久层、数据访问层,直接操作数据库的代码在这里编写。DAO,即Data Access Object,数据访问对象。</li>
<li>为了更好的降低各层间的耦合度，在三层架构程序设计中，采用面向抽象编程。即上层对下层的调用,是通过接口实现的。而下层对上层的真正服务提供者，是下层接口的实现类。服务标准(接口)是相同的，服务提供者(实现类)可以更换。这就实现了层间解耦合。</li>
</ul>
<h3 id="4-1-5-MVC-三层架构"><a href="#4-1-5-MVC-三层架构" class="headerlink" title="4.1.5 MVC+三层架构"></a>4.1.5 MVC+三层架构</h3><p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20210222093153.png"></p>
<ul>
<li>所谓“MVC+三层架构”的开发模型，主要是指将MVC的业务处理Model分为了两层:Service层与Dao层，分别用于处理业务逻辑与持久化操作。</li>
<li>MVC+ 三层架构” 的开发模型，是传统的JavaWeb项目的最常用开发模型。 </li>
</ul>

    </div>

    
    
    


      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/02/04/%E5%B0%9A%E7%A1%85%E8%B0%B7%E8%AF%B4Java/%E5%89%8D%E7%AB%AF/xml/" rel="prev" title="xml学习">
      <i class="fa fa-chevron-left"></i> xml学习
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/02/26/%E5%B0%9A%E7%A1%85%E8%B0%B7%E8%AF%B4Java/%E5%89%8D%E7%AB%AF/jquery/" rel="next" title="jquery学习">
      jquery学习 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0-JSP%E5%9F%BA%E7%A1%80"><span class="nav-number">1.</span> <span class="nav-text">第一章 JSP基础</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-%E4%BB%80%E4%B9%88%E6%98%AFJSP"><span class="nav-number">1.1.</span> <span class="nav-text">1.1 什么是JSP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-JSP%E8%A7%84%E8%8C%83"><span class="nav-number">1.2.</span> <span class="nav-text">1.2 JSP规范</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-JSP%E6%B3%A8%E9%87%8A"><span class="nav-number">1.3.</span> <span class="nav-text">1.3 JSP注释</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-4-JSP%E7%9A%84Java%E4%BB%A3%E7%A0%81%E5%9D%97"><span class="nav-number">1.4.</span> <span class="nav-text">1.4 JSP的Java代码块</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-6-JSP%E7%9A%84%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%9D%97"><span class="nav-number">1.5.</span> <span class="nav-text">1.6 JSP的表达式块</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0-JSP%E6%A0%B8%E5%BF%83"><span class="nav-number">2.</span> <span class="nav-text">第二章 JSP核心</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1"><span class="nav-number">2.1.</span> <span class="nav-text">2.1 内置对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-JSP%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.</span> <span class="nav-text">2.2 JSP指令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-1-page%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.1.</span> <span class="nav-text">2.2.1 page指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-2-include%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.2.</span> <span class="nav-text">2.2.2 include指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-JSP%E5%8A%A8%E4%BD%9C"><span class="nav-number">2.3.</span> <span class="nav-text">2.3 JSP动作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-1-forward%E5%8A%A8%E4%BD%9C"><span class="nav-number">2.3.1.</span> <span class="nav-text">2.3.1 forward动作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-2-include%E5%8A%A8%E4%BD%9C"><span class="nav-number">2.3.2.</span> <span class="nav-text">2.3.2 include动作</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-4-EL%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number">2.4.</span> <span class="nav-text">2.4 EL表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-1-%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="nav-number">2.4.1.</span> <span class="nav-text">2.4.1 获取数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-2-%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">2.4.2.</span> <span class="nav-text">2.4.2 运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-3-EL%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1"><span class="nav-number">2.4.3.</span> <span class="nav-text">2.4.3 EL内置对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-4-%E8%87%AA%E5%AE%9A%E4%B9%89EL%E5%87%BD%E6%95%B0"><span class="nav-number">2.4.4.</span> <span class="nav-text">2.4.4 自定义EL函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-5-JSTL%E4%B8%AD%E7%9A%84EL%E5%87%BD%E6%95%B0"><span class="nav-number">2.4.5.</span> <span class="nav-text">2.4.5 JSTL中的EL函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-6-%E6%80%BB%E7%BB%93"><span class="nav-number">2.4.6.</span> <span class="nav-text">2.4.6 总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-5-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%87%E7%AD%BE"><span class="nav-number">2.5.</span> <span class="nav-text">2.5 自定义标签</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5-1-%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="nav-number">2.5.1.</span> <span class="nav-text">2.5.1 基本用法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5-2-%E5%AE%9A%E4%B9%89%E5%B8%A6%E6%A0%87%E7%AD%BE%E4%BD%93%E7%9A%84%E6%A0%87%E7%AD%BE"><span class="nav-number">2.5.2.</span> <span class="nav-text">2.5.2 定义带标签体的标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5-3-%E5%AE%9A%E4%B9%89%E5%B8%A6%E5%B1%9E%E6%80%A7%E7%9A%84%E6%A0%87%E7%AD%BE"><span class="nav-number">2.5.3.</span> <span class="nav-text">2.5.3 定义带属性的标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5-4-%E5%AE%9A%E4%BB%A5%E5%85%B7%E6%9C%89%E2%80%9D%E8%B7%B3%E8%BF%87JSP%E2%80%9C%E5%8A%9F%E8%83%BD%E7%9A%84%E6%A0%87%E7%AD%BE"><span class="nav-number">2.5.4.</span> <span class="nav-text">2.5.4 定以具有”跳过JSP“功能的标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5-5-%E5%AE%9A%E4%B9%89forEachList%E5%8A%9F%E8%83%BD%E7%9A%84%E6%A0%87%E7%AD%BE"><span class="nav-number">2.5.5.</span> <span class="nav-text">2.5.5 定义forEachList功能的标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5-6-%E5%AE%9A%E4%B9%89forEach%E5%8A%9F%E8%83%BD%E7%9A%84%E6%A0%87%E7%AD%BE"><span class="nav-number">2.5.6.</span> <span class="nav-text">2.5.6 定义forEach功能的标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5-7-%E5%B0%86%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%87%E7%AD%BE%E5%BA%93%E6%89%93%E5%8C%85%E5%8F%91%E8%A1%8C"><span class="nav-number">2.5.7.</span> <span class="nav-text">2.5.7 将自定义标签库打包发行</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0-JSTL%E6%A0%87%E7%AD%BE%E5%BA%93"><span class="nav-number">3.</span> <span class="nav-text">第三章 JSTL标签库</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-%E6%A0%B8%E5%BF%83%E6%A0%87%E7%AD%BE%E5%BA%93"><span class="nav-number">3.1.</span> <span class="nav-text">3.1 核心标签库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-%E6%A0%BC%E5%BC%8F%E5%8C%96%E6%A0%87%E7%AD%BE%E5%BA%93"><span class="nav-number">3.2.</span> <span class="nav-text">3.2 格式化标签库</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E7%B3%BB%E7%BB%9F%E5%BC%80%E5%8F%91%E6%A8%A1%E5%9E%8B"><span class="nav-number">4.</span> <span class="nav-text">第四章 系统开发模型</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F"><span class="nav-number">4.1.</span> <span class="nav-text">4.1 开发模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-1-%E7%BA%AFJSP%E5%BC%80%E5%8F%91"><span class="nav-number">4.1.1.</span> <span class="nav-text">4.1.1 纯JSP开发</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-2-JSP-JavaBean%E7%9A%84Model1"><span class="nav-number">4.1.2.</span> <span class="nav-text">4.1.2 JSP+JavaBean的Model1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-3-MVC%E7%9A%84Model2"><span class="nav-number">4.1.3.</span> <span class="nav-text">4.1.3 MVC的Model2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-4-%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84"><span class="nav-number">4.1.4.</span> <span class="nav-text">4.1.4 三层架构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-5-MVC-%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84"><span class="nav-number">4.1.5.</span> <span class="nav-text">4.1.5 MVC+三层架构</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Plum Reiver</p>
  <div class="site-description" itemprop="description">技术，日常，笔记</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">93</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">21</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
	
  </nav>
</div>


      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Plum Reiver</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
