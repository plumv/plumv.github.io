<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"plumv.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta name="description" content="mysql学习">
<meta property="og:type" content="article">
<meta property="og:title" content="mysql学习">
<meta property="og:url" content="https://plumv.github.io/2020/12/14/Java%E5%AD%A6%E4%B9%A0/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/index.html">
<meta property="og:site_name" content="李川的个人博客">
<meta property="og:description" content="mysql学习">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095615.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095616.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095617.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095618.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095619.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095620.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095621.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095622.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095623.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095624.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095625.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095626.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095627.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095628.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095629.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095630.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095631.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095632.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095633.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095634.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095635.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095636.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095637.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095638.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095639.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095640.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208170512.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208170517.png">
<meta property="og:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208170556.png">
<meta property="article:published_time" content="2020-12-13T16:00:00.000Z">
<meta property="article:modified_time" content="2021-03-22T01:48:51.000Z">
<meta property="article:author" content="Plum Reiver">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095615.png">

<link rel="canonical" href="https://plumv.github.io/2020/12/14/Java%E5%AD%A6%E4%B9%A0/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>mysql学习 | 李川的个人博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">李川的个人博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">学习生活</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>日志</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://plumv.github.io/2020/12/14/Java%E5%AD%A6%E4%B9%A0/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Plum Reiver">
      <meta itemprop="description" content="技术，日常，笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="李川的个人博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          mysql学习
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-14 00:00:00" itemprop="dateCreated datePublished" datetime="2020-12-14T00:00:00+08:00">2020-12-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-03-22 09:48:51" itemprop="dateModified" datetime="2021-03-22T09:48:51+08:00">2021-03-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">Java学习</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java%E5%AD%A6%E4%B9%A0/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>mysql学习</p>
<span id="more"></span>
<h1 id="一、为什么要学习数据库"><a href="#一、为什么要学习数据库" class="headerlink" title="一、为什么要学习数据库"></a>一、为什么要学习数据库</h1><p><strong>数据库的好处</strong><br>    1.持久化数据到本地<br>    2.可以实现结构化查询，方便管理</p>
<h1 id="二、数据库的相关概念"><a href="#二、数据库的相关概念" class="headerlink" title="二、数据库的相关概念"></a>二、数据库的相关概念</h1><p>​    1、DB：数据库，保存一组有组织的数据的容器<br>​    2、DBMS：数据库管理系统，又称为数据库软件（产品），用于管理DB中的数据<br>​    3、SQL:结构化查询语言，用于和DBMS通信的语言</p>
<h1 id="三、数据库存储数据的特点"><a href="#三、数据库存储数据的特点" class="headerlink" title="三、数据库存储数据的特点"></a>三、数据库存储数据的特点</h1><p>​    1、将数据放到表中，表再放到库中<br>​    2、一个数据库中可以有多个表，每个表都有一个的名字，用来标识自己。表名具有唯一性。<br>​    3、表具有一些特性，这些特性定义了数据在表中如何存储，类似java中 “类”的设计。<br>​    4、表由列组成，我们也称为字段。所有表都是由一个或多个列组成的，每一列类似java 中的”属性”<br>​    5、表中的数据是按行存储的，每一行类似于java中的“对象”。</p>
<h1 id="四、初始MySQL"><a href="#四、初始MySQL" class="headerlink" title="四、初始MySQL"></a>四、初始MySQL</h1><h2 id="4-1MySQL产品的介绍"><a href="#4-1MySQL产品的介绍" class="headerlink" title="4.1MySQL产品的介绍"></a>4.1MySQL产品的介绍</h2><p><strong>SQL语言分类</strong></p>
<p>​        1、DML（Data Manipulation Language):数据操纵语句，用于添加、删除、修改、查询数据库记录，并检查数据完整性</p>
<p>​        2、DDL（Data Definition Language):数据定义语句，用于库和表的创建、修改、删除。</p>
<p>​        3、DCL（Data Control Language):数据控制语句，用于定义用户的访问权限和安全级别。</p>
<p><strong>DML</strong></p>
<p>​        DML用于查询与修改数据记录，包括如下SQL语句：</p>
<p>​                INSERT：添加数据到数据库中</p>
<p>​                UPDATE：修改数据库中的数据</p>
<p>​                DELETE：删除数据库中的数据</p>
<p>​                SELECT：选择（查询）数据</p>
<p>​                        SELECT是SQL语言的基础，最为重要</p>
<p><strong>DDL</strong></p>
<p>​        DDL用于定义数据库的结构，比如创建、修改或删除数据库对象，包括如下SQL语句：</p>
<p>​                CREATE TABLE：创建数据库表</p>
<p>​                ALTER TABLE：更改表结构、添加、删除、修改列长度</p>
<p>​                DROP TABLE：删除表</p>
<p>​                CREATE INDEX：在表上建立索引</p>
<p>​                DROP INDEX：删除索引</p>
<p><strong>DCL</strong></p>
<p>​        DCL用来控制数据库的访问，包括如下SQL语句：</p>
<p>​                GRANT：授予访问权限</p>
<p>​                REVOKE：撤销访问权限</p>
<p>​                COMMIT：提交事务处理</p>
<p>​                ROLLBACK：事务处理回退</p>
<p>​                SAVEPOINT：设置保存点</p>
<p>​                LOCK：对数据库的特定部分进行锁定</p>
<h2 id="4-2MySQL产品的安装"><a href="#4-2MySQL产品的安装" class="headerlink" title="4.2MySQL产品的安装"></a>4.2MySQL产品的安装</h2><p>Windows平台下下载：<a target="_blank" rel="noopener" href="http://dev.mysql.com/downloads/mysql">http://dev.mysql.com/downloads/mysql</a> </p>
<p>下载社区版5版本的较为稳定</p>
<h2 id="4-3MySQL服务的启动和停止"><a href="#4-3MySQL服务的启动和停止" class="headerlink" title="4.3MySQL服务的启动和停止"></a>4.3MySQL服务的启动和停止</h2><p>​    方式一：计算机——右击管理——服务<br>​    方式二：通过管理员身份运行<br>​            net start 服务名（启动服务）<br>​            net stop 服务名（停止服务）</p>
<h2 id="4-4MySQL服务的登录和退出"><a href="#4-4MySQL服务的登录和退出" class="headerlink" title="4.4MySQL服务的登录和退出"></a>4.4MySQL服务的登录和退出</h2><p>​    方式一：通过mysql自带的客户端            –&gt;只限于root用户</p>
<p>​    方式二：通过windows自带的客户端<br>​            登录：<br>​                    mysql 【-h主机名 -P端口号 】-u用户名 -p密码        </p>
<p>​                    例如：mysql -uroot -proot</p>
<p>​            退出：</p>
<p>​                    exit或ctrl+C</p>
<h2 id="4-5MySQL的常见命令和语法规范"><a href="#4-5MySQL的常见命令和语法规范" class="headerlink" title="4.5MySQL的常见命令和语法规范"></a>4.5MySQL的常见命令和语法规范</h2><p><strong>常见命令</strong></p>
<p>1.查看当前所有的数据库</p>
<p>​        show databases;</p>
<p>2.打开指定的库</p>
<p>​        use 库名</p>
<p>3.查看当前库的所有表</p>
<p>​        show tables;</p>
<p>4.查看其它库的所有表</p>
<p>​        show tables from 库名</p>
<p>5.创建表<br>        create table 表名(</p>
<p>​                列名 列类型,</p>
<p>​                列名 列类型，</p>
<p>​                。。。</p>
<p>​        );<br>6.查看表结构</p>
<p>​        desc 表名;</p>
<p>7.查看服务器的版本<br>        方式一：登录到mysql服务端<br>                    select version();<br>        方式二：没有登录到mysql服务端<br>                    mysql –version或mysql –V</p>
<p><strong>语法规范</strong></p>
<p>1.不区分大小写,但建议关键字大写，表名、列名小写<br>2.每条命令最好用分号结尾<br>3.每条命令根据需要，可以进行缩进 或换行<br>4.注释<br>    单行注释：#注释文字<br>    单行注释：– 注释文字<br>    多行注释：/* 注释文字  */</p>
<h2 id="4-6MYSQL的语言分类"><a href="#4-6MYSQL的语言分类" class="headerlink" title="4.6MYSQL的语言分类"></a>4.6MYSQL的语言分类</h2><p>DQL（Data Query Language）：数据查询语言<br>    select<br>DML(Data Manipulate Language):数据操作语言<br>    insert 、update、delete<br>DDL（Data Define Languge）：数据定义语言<br>    create、drop、alter<br>TCL（Transaction Control Language）：事务控制语言<br>    commit、rollback</p>
<h2 id="4-7MYSQL的常见命令"><a href="#4-7MYSQL的常见命令" class="headerlink" title="4.7MYSQL的常见命令"></a>4.7MYSQL的常见命令</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">show databases； 查看所有的数据库</span><br><span class="line">use 库名； 打开指定 的库</span><br><span class="line">show tables ; 显示库中的所有表</span><br><span class="line">show tables from 库名;显示指定库中的所有表</span><br><span class="line">create table 表名(</span><br><span class="line">	字段名 字段类型,	</span><br><span class="line">	字段名 字段类型</span><br><span class="line">); 创建表</span><br><span class="line"></span><br><span class="line">desc 表名; 查看指定表的结构</span><br><span class="line">select * from 表名;显示表中的所有数据</span><br></pre></td></tr></table></figure>

<h1 id="五、DQL语言的学习"><a href="#五、DQL语言的学习" class="headerlink" title="五、DQL语言的学习"></a>五、DQL语言的学习</h1><h2 id="5-1基础查询"><a href="#5-1基础查询" class="headerlink" title="5.1基础查询"></a>5.1基础查询</h2><p>一，语法：<br>    SELECT  要查询的东西  FROM  表名 ;</p>
<p>​        类似于Java中 :System.out.println(要打印的东西);<br>二，特点：<br>​    ①通过select查询完的结果 ，是一个虚拟的表格，不是真实存在<br>​    ② 要查询的东西 可以是常量值、可以是表达式、可以是字段、可以是函数</p>
<p>建议：<font color = "red">在执行SQL语句前先打开要执行的数据库</font></p>
<p>三，示例</p>
<p> 1、查询单个字段<br>        select 字段名 from 表名;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">USE myemployees;</span><br><span class="line"># 查询工作表的工作名称</span><br><span class="line">SELECT</span><br><span class="line">	job_title </span><br><span class="line">FROM</span><br><span class="line">	jobs;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095615.png"></p>
<p>2、查询多个字段<br>    select 字段名，字段名 from 表名;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">USE myemployees;</span><br><span class="line">#查询工作表的工作名称,最低工资，最高工资</span><br><span class="line">SELECT</span><br><span class="line">	job_title,</span><br><span class="line">	min_salary,</span><br><span class="line">	max_salary </span><br><span class="line">FROM</span><br><span class="line">	jobs;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095616.png"></p>
<p> 3、查询所有字段<br>        select * from 表名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">USE myemployees;</span><br><span class="line"># 查询工作表的所有信息</span><br><span class="line"># 方式一</span><br><span class="line">SELECT</span><br><span class="line">	job_title,</span><br><span class="line">	min_salary,</span><br><span class="line">	max_salary,</span><br><span class="line">	job_id </span><br><span class="line">FROM</span><br><span class="line">	jobs;</span><br><span class="line"># 方式二 用*号表示。缺点是查询后的顺序和原表的列的顺序相同，不够灵活</span><br><span class="line">SELECT</span><br><span class="line">	* </span><br><span class="line">FROM</span><br><span class="line">	jobs;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095617.png"></p>
<p>4、查询常量<br>        select 常量值;<br>        注意：字符型和日期型的常量值必须用单引号引起来，数值型不需要</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">USE myemployees;</span><br><span class="line">    #	查询100</span><br><span class="line">SELECT 100;</span><br><span class="line">    # 查询字符的常量值</span><br><span class="line">SELECT &#39;asd&#39;;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095618.png"></p>
<p>5、查询函数<br>    select 函数名(实参列表);</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">USE myemployees;</span><br><span class="line"># 查询mysql的版本</span><br><span class="line">SELECT VERSION();</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095619.png"></p>
<p>6、查询表达式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">USE myemployees;</span><br><span class="line"># 查询100对99的余数</span><br><span class="line">select 100%99;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095620.png"></p>
<p>7、起别名<br>        ①as<br>        ②空格</p>
<p>​    建议：<font color="red">在别名上加双引号，以防止别名中有关键字等信息</font></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">USE myemployees;</span><br><span class="line">SELECT min_salary as &quot;最低工资&quot;,max_salary as &quot;最高工资&quot; from jobs;</span><br><span class="line"># 等价于</span><br><span class="line">SELECT min_salary &quot;最低工资&quot;,max_salary &quot;最高工资&quot; from jobs;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095621.png"></p>
<p> 8、去重：distinct 关键字<br>        格式：select distinct 字段名 from 表名;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">USE myemployees;</span><br><span class="line"># 去重前</span><br><span class="line">select department_id from employees;</span><br><span class="line"># 去重后</span><br><span class="line">select DISTINCT department_id from employees;</span><br></pre></td></tr></table></figure>

<p>​        去重前：</p>
<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095622.png"></p>
<p>​        去重后：</p>
<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095623.png"></p>
<p> 9、+<br>    作用：做加法运算<br>    select 数值+数值; 直接运算<br>    select 字符+数值;先试图将字符转换成数值，如果转换成功，则继续运算；否则转换成0，再做运算<br>    select null+值;结果都为null</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">USE myemployees;</span><br><span class="line">SELECT 100+90;</span><br><span class="line">SELECT &#39;123&#39;+20;</span><br><span class="line">SELECT &#39;abd&#39;+20;</span><br><span class="line">SELECT null + 20;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095624.png"></p>
<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095625.png"></p>
<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095626.png"></p>
<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095627.png"></p>
<p>10、【补充】concat函数<br>    功能：拼接字符<br>    格式：select concat(字符1，字符2，字符3,…);</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">USE myemployees;</span><br><span class="line"># 查询员工名和性连接成一个字段，并显示为姓名</span><br><span class="line">SELECT CONCAT(last_name, first_name) AS &quot;姓名&quot; FROM employees;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095628.png"></p>
<p>11、【补充】ifnull函数<br>    功能：判断某字段或表达式是否为null，如果为null 返回指定的值，否则返回原本的值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">USE myemployees;</span><br><span class="line">SELECT</span><br><span class="line">	IFNULL( commission_pct, 0 ) AS 奖金率,</span><br><span class="line">	commission_pct </span><br><span class="line">FROM</span><br><span class="line">	employees;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095629.png"></p>
<p> 12、【补充】isnull函数<br>    功能：判断某字段或表达式是否为null，如果是，则返回1，否则返回0</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">USE myemployees;</span><br><span class="line">SELECT</span><br><span class="line">	ISNULL(commission_pct)AS 奖金率,</span><br><span class="line">	commission_pct </span><br><span class="line">FROM</span><br><span class="line">	employees;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095630.png"></p>
<h2 id="5-2条件查询"><a href="#5-2条件查询" class="headerlink" title="5.2条件查询"></a>5.2条件查询</h2><p>​        条件查询：根据条件过滤原始表的数据，查询到想要的数据<br>一，语法：<br>​        select<br>​                要查询的字段|表达式|常量值|函数<br>​        from<br>​                表<br>​        where<br>​                条件 ;</p>
<p>​    <font color = "red">执行的顺序：先找表，然后筛选条件，最后查询</font></p>
<p>二、筛选条件的分类</p>
<p>1、简单条件运算符</p>
<p>​    &lt;       大于</p>
<p>​    &gt;       小于</p>
<p>​    =       等于 (不可以判断null)</p>
<p>​    &lt;&gt;    不等于 （相比!=，建议使用这个）</p>
<p>​     !=     不等于</p>
<p>​     &gt;=    大于等于</p>
<p>​    &lt;=    小于等于</p>
<p>​    &lt;=&gt;   安全等于 (可以判断null值)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 查询工资&gt;12000的员工信息</span><br><span class="line">SELECT * FROM employees WHERE salary &gt; 12000;</span><br><span class="line"># 查询部门编号补等于90的员工名和部门编号</span><br><span class="line">SELECT last_name, department_id FROM employees WHERE department_id &lt;&gt; 90;</span><br><span class="line"># 查询没有奖金的员工名和奖金率</span><br><span class="line">SELECT last_name,commission_pct FROM employees WHERE commission_pct &lt;&#x3D;&gt; null;</span><br></pre></td></tr></table></figure>

<p>2、逻辑运算符<br>    and（&amp;&amp;）:两个条件如果同时成立，结果为true，否则为false<br>    or(||)：    两个条件只要有一个成立，结果为true，否则为false<br>    not(!)：    如果条件成立，则not后为false，否则为true</p>
<p>推荐使用and,or,not</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 查询部门编号不是在90到110之间，或者工资高于15000的员工信息</span><br><span class="line">SELECT * from employees </span><br><span class="line">WHERE not(department_id&gt;&#x3D;90 AND department_id&lt;&#x3D;110) OR salary&gt;15000;</span><br></pre></td></tr></table></figure>

<p>3、模糊查询<br>    like:            一般搭配通配符使用，可以判断字符型或数值型 (支持转义字符\)(5版本以后支持查询数值型)<br>                通配符：%任意多个字符(包含0个字符)，_任意单个字符 </p>
<p>​    between  a  and    b     表示匹配在a到b之间的(包含a,b)    </p>
<p>​    in（…）                        判断某字段的值是否等于in列表中的某一项(匹配的依据是=)                            </p>
<p>​    is null                          为空        因为=不能判断null，因此延申出这两个</p>
<p>​    is not null                   不为空</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 查询所有员工名字中含有字符a的员工信息</span><br><span class="line">SELECT * from employees WHERE last_name like &quot;%a%&quot;;</span><br><span class="line"># 查询部门编号为1开头三位数字的员工信息</span><br><span class="line">SELECT * FROM employees WHERE department_id LIKE &quot;1__&quot;;</span><br><span class="line"># 查询员工名中第三个字母为n，第五个字符为l的员工信息</span><br><span class="line">SELECT * FROM employees WHERE last_name LIKE &quot;__n_l%&quot;;</span><br><span class="line"># 查询员工名中第二个字符是下划线的员工信息</span><br><span class="line"># ESCAPE &quot;$&quot; 表示赋予$字符具有转义的作用</span><br><span class="line">SELECT * FROM employees WHERE last_name LIKE &quot;_$_%&quot; ESCAPE &quot;$&quot;;</span><br><span class="line"># 查询员工编号在100到120之间的员工信息</span><br><span class="line">SELECT * FROM employees WHERE employee_id BETWEEN 100 AND 120;</span><br><span class="line"># 查询某员工部编号为AD_PRES,AD_VP,IT_PROG中的某一项的员工信息</span><br><span class="line">SELECT * FROM employees WHERE job_id in(&quot;AD_PRES&quot;,&quot;AD_VP&quot;,&quot;IT_PROG&quot;); </span><br><span class="line"># 查询没有奖金的员工名和奖金率</span><br><span class="line">SELECT last_name,commission_pct FROM employees WHERE commission_pct is NULL;</span><br><span class="line"># 查询有奖金的员工名和奖金率</span><br><span class="line">SELECT last_name,commission_pct FROM employees WHERE commission_pct is not NULL;</span><br></pre></td></tr></table></figure>

<p>is null 与&lt;=&gt;的区别</p>
<p>is null         仅可以判断null值，可读性较高，建议使用</p>
<p>&lt;=&gt;         既可以判断null值，也可以判断普通的值，可读性低</p>
<h4 id="转移关键字ESCAPE"><a href="#转移关键字ESCAPE" class="headerlink" title="转移关键字ESCAPE"></a>转移关键字ESCAPE</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 查询员工名中第二个字符是下划线的员工信息</span><br><span class="line"># ESCAPE &quot;$&quot; 表示赋予$字符具有转义的作用</span><br><span class="line">SELECT * FROM employees WHERE last_name LIKE &quot;_$_%&quot; ESCAPE &quot;$&quot;;</span><br></pre></td></tr></table></figure>

<h2 id="5-3排序查询"><a href="#5-3排序查询" class="headerlink" title="5.3排序查询"></a>5.3排序查询</h2><p>一，语法：<br>    select<br>        要查询的东西<br>    from<br>        表名<br>    where<br>        条件</p>
<p>​    order by 排序的字段|表达式|函数|别名 【asc|desc】</p>
<p>二，特点</p>
<p>​    1、asc ：升序，如果不写默认升序<br>           desc：降序</p>
<p>​    2、排序列表 支持 单个字段、多个字段、函数、表达式、别名</p>
<p>​    3、order by的位置一般放在查询语句的最后（除limit语句之外）</p>
<p>三，示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># 查询员工信息，要求工资从高到低排序</span><br><span class="line">select * from employees ORDER BY salary DESC;</span><br><span class="line"># 查询员工信息，要求工资从高到低排序</span><br><span class="line">select * from employees ORDER BY salary ASC;</span><br><span class="line"># 按年薪的高低显示员工名和年薪 【按表达式排序】</span><br><span class="line">SELECT last_name, salary * 12 * (1+IFNULL(commission_pct,0)) as &quot;年薪&quot;</span><br><span class="line">from employees</span><br><span class="line">ORDER BY salary * 12 * (1+IFNULL(commission_pct,0));</span><br><span class="line"># 按年薪的高低显示员工名和年薪 【按别名排序】</span><br><span class="line">SELECT last_name, salary * 12 * (1+IFNULL(commission_pct,0)) as 年薪</span><br><span class="line">from employees</span><br><span class="line">ORDER BY 年薪;</span><br><span class="line"># 按员工名的长度升序排列</span><br><span class="line">select length(last_name) ,last_name from employees</span><br><span class="line">ORDER BY LENGTH(last_name);</span><br><span class="line"># 先按员工的部门编号升序排序，再工资进行降序排序</span><br><span class="line">select * from employees</span><br><span class="line">ORDER BY department_id ASC , salary DESC;</span><br></pre></td></tr></table></figure>

<h2 id="5-4常见函数"><a href="#5-4常见函数" class="headerlink" title="5.4常见函数"></a>5.4常见函数</h2><p><strong>一、概述</strong><br>        功能：类似于java中的方法<br>        好处：提高重用性和隐藏实现细节<br>        调用：select 函数名(实参列表);</p>
<p><strong>二，分类：</strong></p>
<p>​        1、单行函数</p>
<p>​                如 concat、length、ifnull等</p>
<p>​        2、分组函数</p>
<p>​                功能：做统计使用，又称为统计函数、聚合函数、组函数</p>
<p><strong>三、单行函数</strong><br>    1、字符函数</p>
<p>​            length(str)：获取字节个数(utf-8一个汉字代表3个字节,gbk为2个字节)</p>
<p>​            concat(str1,str2,…)：连接字符串</p>
<p>​            substr(str,pos,len)：截取子串，从下标为pos开始，长度为len。len不写时默认到最后</p>
<p>​            upper(str)：变大写</p>
<p>​            lower(str)：变小写</p>
<p>​            replace(str,from_str,to_str)：将str中的from_str替换成to_str</p>
<p>​            trim([remstr FROM] str)：去除str前面和后面的remstr字符串。remstr默认为 空格</p>
<p>​            lpad(str,len,padstr)：对str左填充padstr字符使其字符数量为len</p>
<p>​            rpad(str,len,padstr)：对str右填充padstr字符使其字符数量为len</p>
<p>​            instr(str,substr)：获取子串第一次出现的索引</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">#1.length 获取参数值的字节个数</span><br><span class="line">SELECT LENGTH(&#39;john&#39;);-- 4</span><br><span class="line">SELECT LENGTH(&#39;张三丰hahaha&#39;);-- 15</span><br><span class="line"># 查看字符编码</span><br><span class="line">SHOW VARIABLES LIKE &#39;%char%&#39;;</span><br><span class="line"></span><br><span class="line">#2.concat 拼接字符串</span><br><span class="line"># 将员工名的第一个字母大写并与剩下的字符用-拼接</span><br><span class="line">SELECT CONCAT(last_name,&#39;_&#39;,first_name) 姓名 FROM employees;</span><br><span class="line"></span><br><span class="line">#3.upper、lower</span><br><span class="line">SELECT UPPER(&#39;john&#39;);-- JOHN</span><br><span class="line">SELECT LOWER(&#39;joHn&#39;);-- john</span><br><span class="line">#示例：将姓变大写，名变小写，然后拼接</span><br><span class="line">SELECT CONCAT(UPPER(last_name),LOWER(first_name))  姓名 FROM employees;</span><br><span class="line"></span><br><span class="line">#4.substr、substring</span><br><span class="line"># 注意：索引从1开始</span><br><span class="line">#截取从指定索引处后面所有字符</span><br><span class="line">SELECT SUBSTR(&#39;李莫愁爱上了陆展元&#39;,7)  out_put; -- 陆展元</span><br><span class="line">#截取从指定索引处指定字符长度的字符</span><br><span class="line">SELECT SUBSTR(&#39;李莫愁爱上了陆展元&#39;,1,3) out_put;-- 李莫愁</span><br><span class="line">#案例：姓名中首字符大写，其他字符小写然后用_拼接，显示出来</span><br><span class="line">SELECT CONCAT(UPPER(SUBSTR(last_name,1,1)),&#39;_&#39;,LOWER(SUBSTR(last_name,2)))  out_put</span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line">#5.instr 返回子串第一次出现的索引，如果找不到返回0</span><br><span class="line">SELECT INSTR(&#39;杨不殷六侠悔爱上了殷六侠&#39;,&#39;殷八侠&#39;) AS out_put;-- 0</span><br><span class="line"></span><br><span class="line">#6.trim</span><br><span class="line">SELECT LENGTH(TRIM(&#39;    张翠山    &#39;)) AS out_put;-- 9</span><br><span class="line"># 输出 a张aaaaaaaaaaaa翠山a</span><br><span class="line">SELECT TRIM(&#39;aa&#39; FROM &#39;aaaaaaaaa张aaaaaaaaaaaa翠山aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&#39;)  AS out_put;</span><br><span class="line"></span><br><span class="line">#7.lpad 用指定的字符实现左填充指定长度</span><br><span class="line">SELECT LPAD(&#39;殷素素&#39;,2,&#39;*&#39;) AS out_put;-- 殷素</span><br><span class="line"></span><br><span class="line">#8.rpad 用指定的字符实现右填充指定长度</span><br><span class="line">SELECT RPAD(&#39;殷素素&#39;,12,&#39;ab&#39;) AS out_put;-- 殷素素ababababa</span><br><span class="line"></span><br><span class="line">#9.replace 替换</span><br><span class="line"># 赵敏赵敏赵敏赵敏张无忌爱上了赵敏</span><br><span class="line">SELECT REPLACE(&#39;周芷若周芷若周芷若周芷若张无忌爱上了周芷若&#39;,&#39;周芷若&#39;,&#39;赵敏&#39;) AS out_put;</span><br></pre></td></tr></table></figure>

<p>​    2、数学函数<br>​            round(X,D)：四舍五入 ，D表示小数点后几位</p>
<p>​            mod(N,M)：取模</p>
<p>​            ceil(X)：向上取整，返回&gt;=该参数的最小整数        </p>
<p>​            floor(X)：向下取整，返回&lt;=该参数的最大整数</p>
<p>​            truncate(X,D)：截断，D是保留小数的位数。</p>
<p>​            rand()：获取随机数，返回0-1之间的小数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#round 四舍五入</span><br><span class="line">SELECT ROUND(-1.55);-- -2</span><br><span class="line">SELECT ROUND(1.567,2);-- 1.57</span><br><span class="line"></span><br><span class="line">#ceil 向上取整,返回&gt;&#x3D;该参数的最小整数</span><br><span class="line">SELECT CEIL(-1.02);-- -1</span><br><span class="line"></span><br><span class="line">#floor 向下取整，返回&lt;&#x3D;该参数的最大整数</span><br><span class="line">SELECT FLOOR(-9.99);-- -10</span><br><span class="line"></span><br><span class="line">#truncate 截断</span><br><span class="line">SELECT TRUNCATE(1.69999,1);-- 1.6</span><br><span class="line"></span><br><span class="line">#mod取余</span><br><span class="line">&#x2F;*</span><br><span class="line">mod(a,b) ：  a-a&#x2F;b*b</span><br><span class="line"></span><br><span class="line">mod(-10,-3):-10- (-10)&#x2F;(-3)*（-3）&#x3D;-1</span><br><span class="line">*&#x2F;</span><br><span class="line">SELECT MOD(10,-3);-- 1</span><br><span class="line">SELECT 10%3;-- 1</span><br></pre></td></tr></table></figure>

<p>​    3、日期函数</p>
<p>​            now：返回当前日期+时间</p>
<p>​            year:返回年</p>
<p>​            month：返回月</p>
<p>​            day:返回日</p>
<p>​            hour:小时</p>
<p>​            minute:分钟</p>
<p>​            second：秒</p>
<p>​            date_format(date,format)：将日期转换成字符</p>
<p>​            curdate：返回当前日期</p>
<p>​            str_to_date(str,format)：将字符转换成日期</p>
<p>​            curtime：返回当前时间</p>
<p>​            datediff(expr1,expr2)：返回两个日期相差的天数</p>
<p>​            monthname(date)：以英文形式返回月</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">#now 返回当前系统日期+时间</span><br><span class="line">SELECT NOW();</span><br><span class="line"></span><br><span class="line">#curdate 返回当前系统日期，不包含时间</span><br><span class="line">SELECT CURDATE();</span><br><span class="line"></span><br><span class="line">#curtime 返回当前时间，不包含日期</span><br><span class="line">SELECT CURTIME();</span><br><span class="line"></span><br><span class="line">#可以获取指定的部分，年、月、日、小时、分钟、秒</span><br><span class="line">SELECT YEAR(NOW()) 年;</span><br><span class="line">SELECT YEAR(&#39;1998-1-1&#39;) 年;</span><br><span class="line">SELECT  YEAR(hiredate) 年 FROM employees;</span><br><span class="line">SELECT MONTH(NOW()) 月;</span><br><span class="line">SELECT MONTHNAME(NOW()) 月;</span><br><span class="line"></span><br><span class="line">#str_to_date 将字符通过指定的格式转换成日期</span><br><span class="line">SELECT STR_TO_DATE(&#39;1998-3-2&#39;,&#39;%Y-%c-%d&#39;) AS out_put;</span><br><span class="line"></span><br><span class="line">#查询入职日期为1992--4-3的员工信息</span><br><span class="line">SELECT * FROM employees WHERE hiredate &#x3D; &#39;1992-4-3&#39;;</span><br><span class="line"># 另一种写法</span><br><span class="line">SELECT * FROM employees WHERE hiredate &#x3D; STR_TO_DATE(&#39;4-3 1992&#39;,&#39;%c-%d %Y&#39;);</span><br><span class="line"></span><br><span class="line">#date_format 将日期转换成字符</span><br><span class="line">SELECT DATE_FORMAT(NOW(),&#39;%y年%m月%d日&#39;) AS out_put;</span><br><span class="line"></span><br><span class="line">#查询有奖金的员工名和入职日期(xx月&#x2F;xx日 xx年)</span><br><span class="line">SELECT last_name,DATE_FORMAT(hiredate,&#39;%m月&#x2F;%d日 %y年&#39;) 入职日期</span><br><span class="line">FROM employees</span><br><span class="line">WHERE commission_pct IS NOT NULL;</span><br></pre></td></tr></table></figure>

<p>​    4、其他函数<br>​            version ：当前数据库服务器的版本<br>​            database： 当前打开的数据库<br>​            user：当前用户<br>​            password(‘字符’)：返回该字符的密码形式<br>​            md5(‘字符’):返回该字符的md5加密形式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT VERSION();</span><br><span class="line">SELECT DATABASE();</span><br><span class="line">SELECT USER();</span><br><span class="line">select password(&quot;123456&quot;);-- *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9</span><br><span class="line">select md5(&quot;123456&quot;);-- e10adc3949ba59abbe56e057f20f883e</span><br></pre></td></tr></table></figure>

<p>​    5、流程控制函数</p>
<p>​            ①if(条件表达式，表达式1，表达式2)：如果条件表达式成立，返回表达式1，否则返回表达式2<br>​            ②case情况1:类似Java的switch case<br>​                case 变量或表达式或字段<br>​                when 常量1 then 值1<br>​                when 常量2 then 值2<br>​                …<br>​                else 值n<br>​                end</p>
<p>​            ③case情况2:类似Java的多重if else<br>​                case<br>​                when 条件1 then 值1<br>​                when 条件2 then 值2<br>​                …<br>​                else 值n<br>​                end</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">#五、流程控制函数</span><br><span class="line">#1.if函数： if else 的效果</span><br><span class="line">SELECT IF(10&lt;5,&#39;大&#39;,&#39;小&#39;);</span><br><span class="line"># 查询员工名，员工奖金，备注，备注中如果员工有奖金则输出有奖金，嘻嘻，否则输出没奖金，呵呵</span><br><span class="line">SELECT last_name,commission_pct,IF(commission_pct IS NULL,&#39;没奖金，呵呵&#39;,&#39;有奖金，嘻嘻&#39;) 备注</span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line">#2.case函数的使用一： switch case 的效果</span><br><span class="line">&#x2F;*</span><br><span class="line">    java中</span><br><span class="line">        switch(变量或表达式)&#123;</span><br><span class="line">            case 常量1：语句1;break;</span><br><span class="line">            ...</span><br><span class="line">            default:语句n;break;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    mysql中</span><br><span class="line">        case 要判断的字段或表达式</span><br><span class="line">        when 常量1 then 要显示的值1或语句1;</span><br><span class="line">        when 常量2 then 要显示的值2或语句2;</span><br><span class="line">        ...</span><br><span class="line">        else 要显示的值n或语句n;</span><br><span class="line">        end</span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">&#x2F;*案例：查询员工的工资，要求</span><br><span class="line">    部门号&#x3D;30，显示的工资为1.1倍</span><br><span class="line">    部门号&#x3D;40，显示的工资为1.2倍</span><br><span class="line">    部门号&#x3D;50，显示的工资为1.3倍</span><br><span class="line">    其他部门，显示的工资为原工资</span><br><span class="line">*&#x2F;</span><br><span class="line">SELECT salary 原始工资,department_id,</span><br><span class="line">CASE department_id</span><br><span class="line">WHEN 30 THEN salary*1.1</span><br><span class="line">WHEN 40 THEN salary*1.2</span><br><span class="line">WHEN 50 THEN salary*1.3</span><br><span class="line">ELSE salary</span><br><span class="line">END AS 新工资</span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line">#3.case 函数的使用二：类似于 多重if</span><br><span class="line">&#x2F;*</span><br><span class="line">    java中：</span><br><span class="line">        if(条件1)&#123;</span><br><span class="line">            语句1；</span><br><span class="line">        &#125;else if(条件2)&#123;</span><br><span class="line">            语句2；</span><br><span class="line">        &#125;</span><br><span class="line">        ...</span><br><span class="line">        else&#123;</span><br><span class="line">            语句n;</span><br><span class="line">        &#125;</span><br><span class="line">    mysql中：</span><br><span class="line">        case </span><br><span class="line">        when 条件1 then 要显示的值1或语句1</span><br><span class="line">        when 条件2 then 要显示的值2或语句2</span><br><span class="line">        。。。</span><br><span class="line">        else 要显示的值n或语句n</span><br><span class="line">        end</span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">&#x2F;*案例：查询员工的工资的情况</span><br><span class="line">	如果工资&gt;20000,显示A级别</span><br><span class="line">	如果工资&gt;15000,显示B级别</span><br><span class="line">	如果工资&gt;10000，显示C级别</span><br><span class="line">	否则，显示D级别</span><br><span class="line">*&#x2F;</span><br><span class="line">SELECT salary,</span><br><span class="line">CASE </span><br><span class="line">WHEN salary&gt;20000 THEN &#39;A&#39;</span><br><span class="line">WHEN salary&gt;15000 THEN &#39;B&#39;</span><br><span class="line">WHEN salary&gt;10000 THEN &#39;C&#39;</span><br><span class="line">ELSE &#39;D&#39;</span><br><span class="line">END AS 工资级别</span><br><span class="line">FROM employees;</span><br></pre></td></tr></table></figure>

<p><strong>四、分组函数</strong><br>    1、分类<br>            max 最大值<br>            min 最小值<br>            sum 和<br>            avg 平均值<br>            count 计算个数</p>
<p>​    2、特点</p>
<p>​        ①语法<br>​            select max(字段) from 表名;</p>
<p>​        ②支持的类型<br>​            sum和avg一般用于处理数值型<br>​            max、min、count可以处理任何数据类型</p>
<p>​        ③以上分组函数都忽略null<br>​        ④都可以搭配distinct使用，实现去重的统计<br>​            select sum(distinct 字段) from 表;<br>​        ⑤count函数<br>​            count(字段)：统计该字段非空值的个数<br>​            count(*)：统计结果集的行数</p>
<p>效率上：<br>        5版本前 MyISAM存储引擎，count(<em>)最高<br>        5版本后 InnoDB存储引擎，count(</em>)和count(1)效率&gt;count(字段)</p>
<p>​        ⑥ 和分组函数一同查询的字段，要求是group by后出现的字段</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;*</span><br><span class="line">	功能：用作统计使用，又称为聚合函数或统计函数或组函数</span><br><span class="line"></span><br><span class="line">    分类：</span><br><span class="line">    sum 求和、avg 平均值、max 最大值 、min 最小值 、count 计算个数</span><br><span class="line"></span><br><span class="line">    特点：</span><br><span class="line">    1、sum、avg一般用于处理数值型</span><br><span class="line">       max、min、count可以处理任何类型</span><br><span class="line">    2、以上分组函数都忽略null值</span><br><span class="line">    3、可以和distinct搭配实现去重的运算</span><br><span class="line">    4、count函数的单独介绍</span><br><span class="line">    	一般使用count(*)用作统计行数</span><br><span class="line">    5、和分组函数一同查询的字段要求是group by后的字段</span><br><span class="line">*&#x2F;</span><br><span class="line"># 1、简单 的使用</span><br><span class="line">SELECT SUM(salary) FROM employees;</span><br><span class="line">SELECT AVG(salary) FROM employees;</span><br><span class="line">SELECT MIN(salary) FROM employees;</span><br><span class="line">SELECT MAX(salary) FROM employees;</span><br><span class="line">SELECT COUNT(salary) FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT SUM(salary) 和,AVG(salary) 平均,MAX(salary) 最高,MIN(salary) 最低,COUNT(salary) 个数</span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT SUM(salary) 和,ROUND(AVG(salary),2) 平均,MAX(salary) 最高,MIN(salary) 最低,COUNT(salary) 个数</span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line"># 2、参数支持哪些类型</span><br><span class="line">SELECT SUM(last_name) ,AVG(last_name) FROM employees;-- 查询无结果</span><br><span class="line">SELECT SUM(hiredate) ,AVG(hiredate) FROM employees;</span><br><span class="line">SELECT MAX(last_name),MIN(last_name) FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT MAX(hiredate),MIN(hiredate) FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT COUNT(commission_pct) FROM employees;</span><br><span class="line">SELECT COUNT(last_name) FROM employees;</span><br><span class="line"></span><br><span class="line"># 3、是否忽略null</span><br><span class="line">SELECT SUM(commission_pct) ,AVG(commission_pct),SUM(commission_pct)&#x2F;35,SUM(commission_pct)&#x2F;107 FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT MAX(commission_pct) ,MIN(commission_pct) FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT COUNT(commission_pct) FROM employees;-- 35</span><br><span class="line">SELECT commission_pct FROM employees;-- 107条数据</span><br><span class="line"></span><br><span class="line"># 4、和distinct搭配</span><br><span class="line">SELECT SUM(DISTINCT salary),SUM(salary) FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT COUNT(DISTINCT salary),COUNT(salary) FROM employees;</span><br><span class="line"></span><br><span class="line"># 5、count函数的详细介绍</span><br><span class="line">SELECT COUNT(salary) FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT COUNT(*) FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT COUNT(1) FROM employees;</span><br><span class="line">&#x2F;*效率：</span><br><span class="line">	MYISAM存储引擎下  ，COUNT(*)的效率高</span><br><span class="line">	INNODB存储引擎下，COUNT(*)和COUNT(1)的效率差不多，比COUNT(字段)要高一些</span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">#6、和分组函数一同查询的字段有限制</span><br><span class="line">SELECT AVG(salary),employee_id  FROM employees;-- 无法运行</span><br></pre></td></tr></table></figure>

<h2 id="5-5分组查询"><a href="#5-5分组查询" class="headerlink" title="5.5分组查询"></a>5.5分组查询</h2><p><strong>一、语法</strong><br>        select 分组函数，分组后的字段<br>        from 表<br>        【where 筛选条件】<br>        group by 分组的字段<br>        【having 分组后的筛选】<br>        【order by 排序列表】</p>
<p><strong>二、特点</strong></p>
<p>1、和分组函数一同查询的字段必须是group by后出现的字段<br>2、筛选分为两类：分组前筛选和分组后筛选</p>
<p>​                        使用关键字        筛选的表                    位置</p>
<p>分组前筛选    where                原始表                        group by的前面<br>分组后筛选    having                分组后的结果            group by 的后面</p>
<p>3、分组可以按单个字段也可以按多个字段</p>
<p>4、可以搭配着排序使用</p>
<p>​    问题1：分组函数做筛选能不能放在where后面<br>​                答：不能</p>
<p>​    问题2：where——group by——having</p>
<p>​                一般来讲，能用分组前筛选的，尽量使用分组前筛选，提高效率</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">#引入：查询每个部门的员工个数</span><br><span class="line">SELECT COUNT(*) FROM employees WHERE department_id&#x3D;90;-- 3</span><br><span class="line"></span><br><span class="line">#1.简单的分组</span><br><span class="line">#案例1：查询每个工种的员工平均工资</span><br><span class="line">SELECT AVG(salary),job_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY job_id;</span><br><span class="line">#案例2：查询每个位置的部门个数</span><br><span class="line">SELECT COUNT(*),location_id</span><br><span class="line">FROM departments</span><br><span class="line">GROUP BY location_id;</span><br><span class="line"></span><br><span class="line">#2、可以实现分组前的筛选</span><br><span class="line">#案例1：查询邮箱中包含a字符的 每个部门的最高工资</span><br><span class="line">SELECT MAX(salary),department_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE email LIKE &#39;%a%&#39;</span><br><span class="line">GROUP BY department_id;</span><br><span class="line">#案例2：查询有奖金的每个领导手下员工的平均工资</span><br><span class="line">SELECT AVG(salary),manager_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE commission_pct IS NOT NULL</span><br><span class="line">GROUP BY manager_id;</span><br><span class="line"></span><br><span class="line">#3、分组后筛选</span><br><span class="line">#案例：查询哪个部门的员工个数&gt;5</span><br><span class="line">	#①查询每个部门的员工个数</span><br><span class="line">	SELECT COUNT(*),department_id</span><br><span class="line">	FROM employees</span><br><span class="line">	GROUP BY department_id;</span><br><span class="line">	#② 筛选刚才①结果</span><br><span class="line">	SELECT COUNT(*),department_id</span><br><span class="line">	FROM employees</span><br><span class="line">	GROUP BY department_id</span><br><span class="line">	HAVING COUNT(*)&gt;5;</span><br><span class="line">#案例2：每个工种有奖金的员工的最高工资&gt;12000的工种编号和最高工资</span><br><span class="line">SELECT job_id,MAX(salary)</span><br><span class="line">FROM employees</span><br><span class="line">WHERE commission_pct IS NOT NULL</span><br><span class="line">GROUP BY job_id</span><br><span class="line">HAVING MAX(salary)&gt;12000;</span><br><span class="line">#案例3：领导编号&gt;102的每个领导手下的最低工资大于5000的领导编号和最低工资</span><br><span class="line">SELECT manager_id,MIN(salary)</span><br><span class="line">FROM employees</span><br><span class="line">where manager_id &gt; 102</span><br><span class="line">GROUP BY manager_id</span><br><span class="line">HAVING MIN(salary)&gt;5000;</span><br><span class="line"></span><br><span class="line">#4.添加排序</span><br><span class="line">#案例：每个工种有奖金的员工的最高工资&gt;6000的工种编号和最高工资,按最高工资升序</span><br><span class="line">SELECT job_id,MAX(salary) m</span><br><span class="line">FROM employees</span><br><span class="line">WHERE commission_pct IS NOT NULL</span><br><span class="line">GROUP BY job_id</span><br><span class="line">HAVING m&gt;6000</span><br><span class="line">ORDER BY m ;</span><br><span class="line"></span><br><span class="line">#5.按多个字段分组</span><br><span class="line">#案例：查询每个工种每个部门的最低工资,并按最低工资降序</span><br><span class="line">SELECT MIN(salary),job_id,department_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id,job_id</span><br><span class="line">ORDER BY MIN(salary) DESC;</span><br></pre></td></tr></table></figure>

<h2 id="5-6连接查询"><a href="#5-6连接查询" class="headerlink" title="5.6连接查询"></a>5.6连接查询</h2><p><strong>一、含义</strong></p>
<p>当查询中涉及到了多个表的字段，需要使用多表连接</p>
<p>​        select 字段1，字段2</p>
<p>​        from 表1，表2,…; 但是此语句会使显示的语句具有笛卡尔乘积现象</p>
<p>笛卡尔乘积：当查询多个表时，没有添加有效的连接条件，导致多个表所有行实现完全连接</p>
<p>​        即：表1 有m行，表2有n行，结果=m*n行</p>
<p>发生原因：没有有效的连接条件</p>
<p>如何解决：添加有效的连接条件</p>
<p><strong>二、分类</strong></p>
<p>按年代分类：</p>
<p>​    sql92：等值，非等值，自连接，也支持一部分外连接（用于oracle、sqlserver，mysql不支持）</p>
<p>​    sql99标准【推荐】：支持内连接+外连接（左外和右外）+交叉连接</p>
<p>按功能分类：</p>
<p>​            内连接：等值连接，非等值连接，自连接</p>
<p>​            外连接：左外连接，右外连接，全外连接（mysql不支持）</p>
<p>​            交叉连接</p>
<p><strong>三、SQL92语法</strong></p>
<p>​        1、等值连接</p>
<p>​                语法：</p>
<p>​                        select 查询列表</p>
<p>​                        from 表1 别名,表2 别名</p>
<p>​                        where 表1.key=表2.key</p>
<p>​                        【and 筛选条件】</p>
<p>​                        【group by 分组字段】</p>
<p>​                        【having 分组后的筛选】</p>
<p>​                        【order by 排序字段】</p>
<p>​                特点：</p>
<p>​                        ① 一般为表起别名</p>
<p>​                        ②多表的顺序可以调换</p>
<p>​                        ③n表连接至少需要n-1个连接条件</p>
<p>​                        ④等值连接的结果是多表的交集部分</p>
<p>​                        ⑤ 可以搭配前面介绍的所有子句使用，比如排序、分组、筛选</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">#1、等值连接</span><br><span class="line">#案例1：查询女神名和对应的男神名</span><br><span class="line">SELECT NAME,boyName </span><br><span class="line">FROM boys,beauty</span><br><span class="line">WHERE beauty.boyfriend_id&#x3D; boys.id;</span><br><span class="line">#案例2：查询员工名和对应的部门名</span><br><span class="line">SELECT last_name,department_name</span><br><span class="line">FROM employees,departments</span><br><span class="line">WHERE employees.&#96;department_id&#96;&#x3D;departments.&#96;department_id&#96;;</span><br><span class="line"></span><br><span class="line">#2、为表起别名</span><br><span class="line">&#x2F;*</span><br><span class="line">	①提高语句的简洁度</span><br><span class="line">	②区分多个重名的字段</span><br><span class="line">	注意：如果为表起了别名，则查询的字段就不能使用原来的表名去限定</span><br><span class="line">*&#x2F;</span><br><span class="line">#查询员工名、工种号、工种名</span><br><span class="line">SELECT e.last_name,e.job_id,j.job_title</span><br><span class="line">FROM employees  e,jobs j</span><br><span class="line">WHERE e.&#96;job_id&#96;&#x3D;j.&#96;job_id&#96;;</span><br><span class="line"></span><br><span class="line">#3、两个表的顺序是否可以调换</span><br><span class="line">#查询员工名、工种号、工种名</span><br><span class="line">SELECT e.last_name,e.job_id,j.job_title</span><br><span class="line">FROM jobs j,employees e</span><br><span class="line">WHERE e.&#96;job_id&#96;&#x3D;j.&#96;job_id&#96;;</span><br><span class="line"></span><br><span class="line">#4、可以加筛选</span><br><span class="line">#案例：查询有奖金的员工名、部门名</span><br><span class="line">SELECT last_name,department_name,commission_pct</span><br><span class="line">FROM employees e,departments d</span><br><span class="line">WHERE e.&#96;department_id&#96;&#x3D;d.&#96;department_id&#96;</span><br><span class="line">AND e.&#96;commission_pct&#96; IS NOT NULL;</span><br><span class="line">#案例2：查询城市名中第二个字符为o的部门名和城市名</span><br><span class="line">SELECT department_name,city</span><br><span class="line">FROM departments d,locations l</span><br><span class="line">WHERE d.&#96;location_id&#96; &#x3D; l.&#96;location_id&#96;</span><br><span class="line">AND city LIKE &#39;_o%&#39;;</span><br><span class="line"></span><br><span class="line">#5、可以加分组</span><br><span class="line">#案例1：查询每个城市的部门个数</span><br><span class="line">SELECT COUNT(*) 个数,city</span><br><span class="line">FROM departments d,locations l</span><br><span class="line">WHERE d.&#96;location_id&#96;&#x3D;l.&#96;location_id&#96;</span><br><span class="line">GROUP BY city;</span><br><span class="line">#案例2：查询有奖金的每个部门的部门名和部门的领导编号和该部门的最低工资</span><br><span class="line">SELECT department_name,d.&#96;manager_id&#96;,MIN(salary)</span><br><span class="line">FROM departments d,employees e</span><br><span class="line">WHERE d.&#96;department_id&#96;&#x3D;e.&#96;department_id&#96;</span><br><span class="line">AND commission_pct IS NOT NULL</span><br><span class="line">GROUP BY department_name,d.&#96;manager_id&#96;;</span><br><span class="line">#6、可以加排序</span><br><span class="line">#案例：查询每个工种的工种名和员工的个数，并且按员工个数降序</span><br><span class="line">SELECT job_title,COUNT(*)</span><br><span class="line">FROM employees e,jobs j</span><br><span class="line">WHERE e.&#96;job_id&#96;&#x3D;j.&#96;job_id&#96;</span><br><span class="line">GROUP BY job_title</span><br><span class="line">ORDER BY COUNT(*) DESC;</span><br><span class="line"></span><br><span class="line">#7、可以实现三表连接？</span><br><span class="line">#案例：查询员工名、部门名和所在的城市</span><br><span class="line">SELECT last_name,department_name,city</span><br><span class="line">FROM employees e,departments d,locations l</span><br><span class="line">WHERE e.&#96;department_id&#96;&#x3D;d.&#96;department_id&#96;</span><br><span class="line">AND d.&#96;location_id&#96;&#x3D;l.&#96;location_id&#96;</span><br><span class="line">AND city LIKE &#39;s%&#39;</span><br><span class="line">ORDER BY department_name DESC;</span><br></pre></td></tr></table></figure>

<p>​        2、非等值连接</p>
<p>​                语法：</p>
<p>​                        select 查询列表</p>
<p>​                        from 表1 别名,表2 别名</p>
<p>​                        where 非等值的连接条件</p>
<p>​                        【and 筛选条件】</p>
<p>​                        【group by 分组字段】</p>
<p>​                        【having 分组后的筛选】</p>
<p>​                        【order by 排序字段】</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#案例1：查询员工的工资和工资级别</span><br><span class="line">SELECT salary,grade_level</span><br><span class="line">FROM employees e,job_grades g</span><br><span class="line">WHERE salary BETWEEN g.&#96;lowest_sal&#96; AND g.&#96;highest_sal&#96;</span><br><span class="line">AND g.&#96;grade_level&#96;&#x3D;&#39;A&#39;;</span><br></pre></td></tr></table></figure>

<p>​        3、自连接</p>
<p>​                语法：</p>
<p>​                        select 查询列表</p>
<p>​                        from 表 别名1,表 别名2</p>
<p>​                        where 等值的连接条件</p>
<p>​                        【and 筛选条件】</p>
<p>​                        【group by 分组字段】</p>
<p>​                        【having 分组后的筛选】</p>
<p>​                        【order by 排序字段】</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#案例：查询 员工名和上级的名称.</span><br><span class="line">SELECT e.employee_id,e.last_name,m.employee_id,m.last_name</span><br><span class="line">FROM employees e,employees m</span><br><span class="line">WHERE e.&#96;manager_id&#96;&#x3D;m.&#96;employee_id&#96;;</span><br></pre></td></tr></table></figure>

<p><strong>四、SQL99语法</strong></p>
<p>​                    select 查询列表</p>
<p>​                    from 表1 别名</p>
<p>​                    【<font color="red">连接类型</font>】 join 表2 别名 on 连接条件</p>
<p>​                    【where 筛选条件】</p>
<p>​                    【group by 分组列表】</p>
<p>​                    【having 分组后的筛选】</p>
<p>​                    【order by 排序列表】</p>
<p>​        1、内连接：inner</p>
<p>​                语法：</p>
<p>​                    select 查询列表</p>
<p>​                    from 表1 别名</p>
<p>​                    【<font color="red">inner</font>】 join 表2 别名 on 连接条件</p>
<p>​                    【where 筛选条件】</p>
<p>​                    【group by 分组列表】</p>
<p>​                    【having 分组后的筛选】</p>
<p>​                    【order by 排序列表】</p>
<p>​                    【limit 子句】;</p>
<p>​                特点：</p>
<p>​                    ① 添加排序、分组、筛选</p>
<p>​                    ② inner可以省略</p>
<p>​                    ③ 筛选条件放在where后面，连接条件放在on后面，提高分离性，便于阅读</p>
<p>​                    ④ inner join连接和sql92语法中的等值连接效果是一样的，都是查询多表的交集</p>
<p>​                    ⑤ 表的顺序可以调换</p>
<p>​                    ⑥ n表连接至少需要n-1个连接条件</p>
<p>​                分类：等值连接；非等值连接；自连接；</p>
<p>效果图：<img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095631.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">#1、等值连接</span><br><span class="line">	#案例1.查询员工名、部门名</span><br><span class="line">		SELECT last_name,department_name</span><br><span class="line">		FROM departments d</span><br><span class="line">		 JOIN  employees e</span><br><span class="line">		ON e.&#96;department_id&#96; &#x3D; d.&#96;department_id&#96;;</span><br><span class="line">	#案例2.查询名字中包含e的员工名和工种名（添加筛选）</span><br><span class="line">		SELECT last_name,job_title</span><br><span class="line">		FROM employees e</span><br><span class="line">		INNER JOIN jobs j</span><br><span class="line">		ON e.&#96;job_id&#96;&#x3D;  j.&#96;job_id&#96;</span><br><span class="line">		WHERE e.&#96;last_name&#96; LIKE &#39;%e%&#39;;</span><br><span class="line">	#3. 查询部门个数&gt;3的城市名和部门个数，（添加分组+筛选）</span><br><span class="line">		#①查询每个城市的部门个数</span><br><span class="line">		#②在①结果上筛选满足条件的</span><br><span class="line">		SELECT city,COUNT(*) 部门个数</span><br><span class="line">		FROM departments d</span><br><span class="line">		INNER JOIN locations l</span><br><span class="line">		ON d.&#96;location_id&#96;&#x3D;l.&#96;location_id&#96;</span><br><span class="line">		GROUP BY city</span><br><span class="line">		HAVING COUNT(*)&gt;3;</span><br><span class="line">	#案例4.查询哪个部门的员工个数&gt;3的部门名和员工个数，并按个数降序（添加排序）</span><br><span class="line">		#①查询每个部门的员工个数</span><br><span class="line">		SELECT COUNT(*),department_name</span><br><span class="line">		FROM employees e</span><br><span class="line">		INNER JOIN departments d</span><br><span class="line">		ON e.&#96;department_id&#96;&#x3D;d.&#96;department_id&#96;</span><br><span class="line">		GROUP BY department_name</span><br><span class="line">		#② 在①结果上筛选员工个数&gt;3的记录，并排序</span><br><span class="line">		SELECT COUNT(*) 个数,department_name</span><br><span class="line">		FROM employees e</span><br><span class="line">		INNER JOIN departments d</span><br><span class="line">		ON e.&#96;department_id&#96;&#x3D;d.&#96;department_id&#96;</span><br><span class="line">		GROUP BY department_name</span><br><span class="line">		HAVING COUNT(*)&gt;3</span><br><span class="line">		ORDER BY COUNT(*) DESC;</span><br><span class="line">	#5.查询员工名、部门名、工种名，并按部门名降序（添加三表连接）</span><br><span class="line">		SELECT last_name,department_name,job_title</span><br><span class="line">		FROM employees e</span><br><span class="line">		INNER JOIN departments d ON e.&#96;department_id&#96;&#x3D;d.&#96;department_id&#96;</span><br><span class="line">		INNER JOIN jobs j ON e.&#96;job_id&#96; &#x3D; j.&#96;job_id&#96;</span><br><span class="line">		ORDER BY department_name DESC;</span><br><span class="line"></span><br><span class="line">#二）非等值连接</span><br><span class="line">	#查询员工的工资级别</span><br><span class="line">		SELECT salary,grade_level</span><br><span class="line">		FROM employees e</span><br><span class="line">		JOIN job_grades g</span><br><span class="line">		ON e.&#96;salary&#96; BETWEEN g.&#96;lowest_sal&#96; AND g.&#96;highest_sal&#96;;</span><br><span class="line">	#查询工资级别的个数&gt;20的个数，并且按工资级别降序</span><br><span class="line">		SELECT COUNT(*),grade_level</span><br><span class="line">		FROM employees e</span><br><span class="line">		JOIN job_grades g</span><br><span class="line">		ON e.&#96;salary&#96; BETWEEN g.&#96;lowest_sal&#96; AND g.&#96;highest_sal&#96;</span><br><span class="line">		GROUP BY grade_level</span><br><span class="line">		HAVING COUNT(*)&gt;20</span><br><span class="line">		ORDER BY grade_level DESC;</span><br><span class="line"> </span><br><span class="line">#三）自连接</span><br><span class="line">	#查询员工的名字、上级的名字</span><br><span class="line">		SELECT e.last_name,m.last_name</span><br><span class="line">		FROM employees e</span><br><span class="line">		JOIN employees m</span><br><span class="line">		ON e.&#96;manager_id&#96;&#x3D; m.&#96;employee_id&#96;;</span><br><span class="line">	#查询姓名中包含字符k的员工的名字、上级的名字</span><br><span class="line">		SELECT e.last_name,m.last_name</span><br><span class="line">		FROM employees e</span><br><span class="line">		JOIN employees m</span><br><span class="line">		ON e.&#96;manager_id&#96;&#x3D; m.&#96;employee_id&#96;</span><br><span class="line">		WHERE e.&#96;last_name&#96; LIKE &#39;%k%&#39;;</span><br></pre></td></tr></table></figure>

<p>​        2、外连接</p>
<p>​                应用场景：用于查询一个表中有，另一个表没有的记录</p>
<p>​                语法：</p>
<p>​                    select 查询列表</p>
<p>​                    from 表1 别名</p>
<p>​                    <font color="red">left|right|full【outer】</font> join 表2 别名 on 连接条件</p>
<p>​                    【where 筛选条件】</p>
<p>​                    【group by 分组列表】</p>
<p>​                    【having 分组后的筛选】</p>
<p>​                    【order by 排序列表】</p>
<p>​                    【limit 子句】;</p>
<p>​                特点：</p>
<p>​                    ① 外连接的查询结果为主表中的所有记录</p>
<p>​                            如果从表和它匹配的将显示匹配行，</p>
<p>​                            如果从表没有匹配的则显示null</p>
<p>​                    ② left join 左边的就是主表，right join 右边的就是主表，full join 两边都是主表</p>
<p>​                    ③ 一般用于查询除了交集部分的剩余的不匹配的行</p>
<p>​                    ④ 左外和右外交换两个表的顺序，可以实现同样的效果 </p>
<p>​                    ⑤ 全外连接=内连接的结果+表1中有但表2没有的+表2中有但表1没有的</p>
<p>效果图：</p>
<p>​    左外连接：<img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095632.png"></p>
<p>​    右外连接：<img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095633.png"></p>
<p>​    全连接：<img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095634.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#左外连接</span><br><span class="line">	SELECT b.*,bo.*</span><br><span class="line">	FROM boys bo</span><br><span class="line">	LEFT OUTER JOIN beauty b</span><br><span class="line">	ON b.&#96;boyfriend_id&#96; &#x3D; bo.&#96;id&#96;</span><br><span class="line">	WHERE b.&#96;id&#96; IS NULL;</span><br><span class="line">#案例1：查询哪个部门没有员工</span><br><span class="line">	#左外</span><br><span class="line">	SELECT d.*,e.employee_id</span><br><span class="line">	FROM departments d</span><br><span class="line">	LEFT OUTER JOIN employees e</span><br><span class="line">	ON d.&#96;department_id&#96; &#x3D; e.&#96;department_id&#96;</span><br><span class="line">	WHERE e.&#96;employee_id&#96; IS NULL;</span><br><span class="line">	#右外</span><br><span class="line">	SELECT d.*,e.employee_id</span><br><span class="line">	FROM employees e</span><br><span class="line">	RIGHT OUTER JOIN departments d</span><br><span class="line">	ON d.&#96;department_id&#96; &#x3D; e.&#96;department_id&#96;</span><br><span class="line">	WHERE e.&#96;employee_id&#96; IS NULL;</span><br><span class="line">#全外</span><br><span class="line">USE girls;</span><br><span class="line">SELECT b.*,bo.*</span><br><span class="line">FROM beauty b</span><br><span class="line">FULL OUTER JOIN boys bo</span><br><span class="line">ON b.&#96;boyfriend_id&#96; &#x3D; bo.id;</span><br></pre></td></tr></table></figure>

<p>​        3、交叉连接</p>
<p>​                语法：</p>
<p>​                    select 查询列表</p>
<p>​                    from 表1 别名</p>
<p>​                    <font color="red">cross</font> join 表2 别名;</p>
<p>​                特点：<br>​                    类似于笛卡尔乘积</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT b.*,bo.*</span><br><span class="line">FROM beauty b</span><br><span class="line">CROSS JOIN boys bo;</span><br></pre></td></tr></table></figure>

<p><strong>比较</strong></p>
<p>​        功能：sql99支持的较多<br>​        可读性：sql99实现连接条件和筛选条件的分离，可读性较高</p>
<h2 id="5-7子查询"><a href="#5-7子查询" class="headerlink" title="5.7子查询"></a>5.7子查询</h2><p><strong>一，含义：</strong></p>
<p>​        出现在其他语句中的select语句，称为子查询或内查询。<br>​        外部的查询语句，称为主查询或外查询。</p>
<p><strong>二，分类</strong></p>
<p>按子查询出现的位置：</p>
<p>​    select后面：</p>
<p>​            仅仅支持标量子查询</p>
<p>​    from后面：</p>
<p>​            支持表子查询</p>
<p>​    where或having后面：★</p>
<p>​            标量子查询（单行） √</p>
<p>​            列子查询  （多行） √</p>
<p>​            行子查询</p>
<p>exists后面（相关子查询）</p>
<p>​    表子查询</p>
<p>按结果集的行列数不同：</p>
<p>​    标量子查询（结果集只有一行一列）</p>
<p>​    列子查询（结果集只有一列多行）</p>
<p>​    行子查询（结果集有一行多列或多行多列）</p>
<p>​    表子查询（结果集一般为多行多列）</p>
<p><strong>三，语法</strong></p>
<p>1、where或having后面</p>
<p>​    1、标量子查询（单行子查询）<br>​    2、列子查询（多行子查询）<br>​    3、行子查询（多列多行）<br>​    特点：<br>​        ①子查询放在小括号内<br>​        ②子查询一般放在条件的右侧<br>​        ③标量子查询，一般搭配着单行操作符使用<br>​                &gt; &lt; &gt;= &lt;= = &lt;&gt;<br>​            列子查询，一般搭配着多行操作符使用<br>​                in、any/some、all<br>​        ④子查询的执行优先于主查询执行，主查询的条件用到了子查询的结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">#1.标量子查询★</span><br><span class="line">#案例1：谁的工资比 Abel 高?</span><br><span class="line">#①查询Abel的工资</span><br><span class="line">	SELECT salary FROM employees WHERE last_name &#x3D; &#39;Abel&#39;</span><br><span class="line">#②查询员工的信息，满足 salary&gt;①结果</span><br><span class="line">	SELECT * FROM employees</span><br><span class="line">	WHERE salary&gt;(</span><br><span class="line">		SELECT salary FROM employees WHERE last_name &#x3D; &#39;Abel&#39;</span><br><span class="line">	);</span><br><span class="line"># 案例2：返回job_id与141号员工相同，salary比143号员工多的员工 </span><br><span class="line"># 姓名，job_id 和工资</span><br><span class="line">#①查询141号员工的job_id</span><br><span class="line">	SELECT job_id FROM employees WHERE employee_id &#x3D; 141</span><br><span class="line">#②查询143号员工的salary</span><br><span class="line">	SELECT salary FROM employees WHERE employee_id &#x3D; 143</span><br><span class="line">#③查询员工的姓名，job_id 和工资，要求job_id&#x3D;①并且salary&gt;②</span><br><span class="line">	SELECT last_name,job_id,salary FROM employees</span><br><span class="line">	WHERE job_id &#x3D; (</span><br><span class="line">		SELECT job_id FROM employees WHERE employee_id &#x3D; 141</span><br><span class="line">	) AND salary&gt;(</span><br><span class="line">		SELECT salary FROM employees WHERE employee_id &#x3D; 143</span><br><span class="line">	);</span><br><span class="line">#案例3：返回公司工资最少的员工的last_name,job_id和salary</span><br><span class="line">#①查询公司的 最低工资</span><br><span class="line">	SELECT MIN(salary) FROM employees</span><br><span class="line">#②查询last_name,job_id和salary，要求salary&#x3D;①</span><br><span class="line">	SELECT last_name,job_id,salary FROM employees</span><br><span class="line">	WHERE salary&#x3D;(</span><br><span class="line">		SELECT MIN(salary) FROM employees</span><br><span class="line">	);</span><br><span class="line">#案例4：查询最低工资大于50号部门最低工资的部门id和其最低工资</span><br><span class="line">#①查询50号部门的最低工资</span><br><span class="line">	SELECT  MIN(salary)FROM employees WHERE department_id &#x3D; 50</span><br><span class="line">#②查询每个部门的最低工资</span><br><span class="line">	SELECT MIN(salary),department_id FROM employees GROUP BY department_id</span><br><span class="line">#③ 在②基础上筛选，满足min(salary)&gt;①</span><br><span class="line">	SELECT MIN(salary),department_id FROM employees GROUP BY department_id</span><br><span class="line">	HAVING MIN(salary)&gt;(</span><br><span class="line">		SELECT  MIN(salary) FROM employees WHERE department_id &#x3D; 50</span><br><span class="line">	);</span><br><span class="line">#非法使用标量子查询</span><br><span class="line">	SELECT MIN(salary),department_id FROM employees GROUP BY department_id</span><br><span class="line">	HAVING MIN(salary)&gt;(</span><br><span class="line">		SELECT  salary FROM employees WHERE department_id &#x3D; 250</span><br><span class="line">	);</span><br><span class="line">#2.列子查询（多行子查询）★</span><br><span class="line">#案例1：返回location_id是1400或1700的部门中的所有员工姓名</span><br><span class="line">#①查询location_id是1400或1700的部门编号</span><br><span class="line">	SELECT DISTINCT department_id FROM departments WHERE location_id IN(1400,1700)</span><br><span class="line">#②查询员工姓名，要求部门号是①列表中的某一个</span><br><span class="line">	SELECT last_name FROM employees</span><br><span class="line">	WHERE department_id  &lt;&gt;ALL(</span><br><span class="line">		SELECT DISTINCT department_id FROM departments </span><br><span class="line">		WHERE location_id IN(1400,1700)</span><br><span class="line">	);</span><br><span class="line"># 案例2：返回其它工种中比job_id为‘IT_PROG’工种任一工资低</span><br><span class="line"># 的员工的员工号、姓名、job_id 以及salary</span><br><span class="line"># ①查询job_id为‘IT_PROG’部门任一工资</span><br><span class="line">	SELECT DISTINCT salary FROM employees WHERE job_id &#x3D; &#39;IT_PROG&#39;</span><br><span class="line">#②查询员工号、姓名、job_id 以及salary，salary&lt;(①)的任意一个</span><br><span class="line">	SELECT last_name,employee_id,job_id,salary FROM employees</span><br><span class="line">	WHERE salary&lt;ANY(</span><br><span class="line">		SELECT DISTINCT salary FROM employees WHERE job_id &#x3D; &#39;IT_PROG&#39;</span><br><span class="line">	) AND job_id&lt;&gt;&#39;IT_PROG&#39;;</span><br><span class="line">#或</span><br><span class="line">	SELECT last_name,employee_id,job_id,salary FROM employees</span><br><span class="line">	WHERE salary&lt;(</span><br><span class="line">		SELECT MAX(salary) FROM employees WHERE job_id &#x3D; &#39;IT_PROG&#39;</span><br><span class="line">	) AND job_id&lt;&gt;&#39;IT_PROG&#39;;</span><br><span class="line">#案例3：返回其它部门中比job_id为‘IT_PROG’部门所有工资都低的员工   </span><br><span class="line"># 的员工号、姓名、job_id 以及salary</span><br><span class="line">	SELECT last_name,employee_id,job_id,salary FROM employees</span><br><span class="line">	WHERE salary&lt;ALL(</span><br><span class="line">		SELECT DISTINCT salary FROM employees WHERE job_id &#x3D; &#39;IT_PROG&#39;</span><br><span class="line">	) AND job_id&lt;&gt;&#39;IT_PROG&#39;;</span><br><span class="line">#或</span><br><span class="line">	SELECT last_name,employee_id,job_id,salary FROM employees</span><br><span class="line">	WHERE salary&lt;(</span><br><span class="line">		SELECT MIN( salary) FROM employees WHERE job_id &#x3D; &#39;IT_PROG&#39;</span><br><span class="line">	) AND job_id&lt;&gt;&#39;IT_PROG&#39;;</span><br><span class="line"></span><br><span class="line">#3、行子查询（结果集一行多列或多行多列）</span><br><span class="line">#案例：查询员工编号最小并且工资最高的员工信息</span><br><span class="line">	SELECT * FROM employees</span><br><span class="line">	WHERE (employee_id,salary)&#x3D;(</span><br><span class="line">		SELECT MIN(employee_id),MAX(salary)FROM employees</span><br><span class="line">	);</span><br><span class="line">#①查询最小的员工编号</span><br><span class="line">	SELECT MIN(employee_id)FROM employees</span><br><span class="line">#②查询最高工资</span><br><span class="line">	SELECT MAX(salary)FROM employees</span><br><span class="line">#③查询员工信息</span><br><span class="line">	SELECT *FROM employees</span><br><span class="line">	WHERE employee_id&#x3D;(</span><br><span class="line">		SELECT MIN(employee_id)FROM employees</span><br><span class="line">	)AND salary&#x3D;(</span><br><span class="line">		SELECT MAX(salary)FROM employees</span><br><span class="line">	);</span><br></pre></td></tr></table></figure>

<p>2，select后面</p>
<p>​        仅仅支持标量子查询</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#案例：查询每个部门的员工个数</span><br><span class="line">	SELECT d.*,(</span><br><span class="line">		SELECT COUNT(*)FROM employees e</span><br><span class="line">		WHERE e.department_id &#x3D; d.&#96;department_id&#96;</span><br><span class="line">	) 个数 FROM departments d;</span><br><span class="line">#案例2：查询员工号&#x3D;102的部门名</span><br><span class="line">	SELECT (</span><br><span class="line">		SELECT department_name,e.department_id FROM departments d</span><br><span class="line">		INNER JOIN employees e ON d.department_id&#x3D;e.department_id</span><br><span class="line">		WHERE e.employee_id&#x3D;102</span><br><span class="line">	) 部门名;</span><br></pre></td></tr></table></figure>

<p>3，from后面</p>
<p>​        将子查询结果充当一张表，要求必须起别名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#案例：查询每个部门的平均工资的工资等级</span><br><span class="line">#①查询每个部门的平均工资</span><br><span class="line">	SELECT AVG(salary),department_id</span><br><span class="line">	FROM employees</span><br><span class="line">	GROUP BY department_id</span><br><span class="line">#②连接①的结果集和job_grades表，</span><br><span class="line">#筛选条件平均工资 between lowest_sal and highest_sal</span><br><span class="line">	SELECT  ag_dep.*,g.&#96;grade_level&#96;</span><br><span class="line">	FROM (</span><br><span class="line">		SELECT AVG(salary) ag,department_id FROM employees</span><br><span class="line">		GROUP BY department_id</span><br><span class="line">	) ag_dep INNER JOIN job_grades g</span><br><span class="line">	ON ag_dep.ag BETWEEN lowest_sal AND highest_sal;</span><br></pre></td></tr></table></figure>

<p>4，exists后面(相关子查询)</p>
<p>​    语法：exists(完整的查询语句)<br>​    结果：1或0</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">SELECT EXISTS(SELECT employee_id FROM employees WHERE salary&#x3D;300000);</span><br><span class="line">#案例1：查询有员工的部门名</span><br><span class="line">-- in</span><br><span class="line">SELECT department_name FROM departments d</span><br><span class="line">WHERE d.&#96;department_id&#96; IN(</span><br><span class="line">	SELECT department_id FROM employees</span><br><span class="line">)</span><br><span class="line">-- exists</span><br><span class="line">SELECT department_name FROM departments d</span><br><span class="line">WHERE EXISTS(</span><br><span class="line">	SELECT * FROM employees e</span><br><span class="line">	WHERE d.&#96;department_id&#96;&#x3D;e.&#96;department_id&#96;</span><br><span class="line">);</span><br><span class="line">#案例2：查询没有女朋友的男神信息</span><br><span class="line">-- in</span><br><span class="line">SELECT bo.* FROM boys bo</span><br><span class="line">WHERE bo.id NOT IN(</span><br><span class="line">	SELECT boyfriend_id FROM beauty</span><br><span class="line">)</span><br><span class="line">-- exists</span><br><span class="line">SELECT bo.* FROM boys bo</span><br><span class="line">WHERE NOT EXISTS(</span><br><span class="line">	SELECT boyfriend_id FROM beauty b</span><br><span class="line">	WHERE bo.&#96;id&#96;&#x3D;b.&#96;boyfriend_id&#96;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h2 id="5-8分页查询"><a href="#5-8分页查询" class="headerlink" title="5.8分页查询"></a>5.8分页查询</h2><p><strong>一、应用场景</strong></p>
<p>​        当要查询的条目数太多，一页显示不全</p>
<p><strong>二、语法</strong></p>
<p>​        select 查询列表 from 表  limit 【offset,】size;</p>
<p><strong>三，特点</strong></p>
<p>​            offset代表的是起始的条目索引，默认从0卡死</p>
<p>​            size代表的是显示的条目数</p>
<p>​            limit子句放在查询语句的最后</p>
<p>​    公式：</p>
<p>​            假如要显示的页数为page，每一页条目数为size</p>
<p>​            select 查询列表 from 表  limit (page-1)*size,size;</p>
<p><strong>四，示例</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#案例1：查询前五条员工信息</span><br><span class="line">SELECT * FROM  employees LIMIT 0,5;</span><br><span class="line">SELECT * FROM  employees LIMIT 5;</span><br><span class="line">#案例2：查询第11条——第25条</span><br><span class="line">SELECT * FROM  employees LIMIT 10,15;</span><br><span class="line">#案例3：有奖金的员工信息，并且工资较高的前10名显示出来</span><br><span class="line">SELECT * FROM employees WHERE commission_pct IS NOT NULL </span><br><span class="line">ORDER BY salary DESC LIMIT 10 ;</span><br></pre></td></tr></table></figure>

<h2 id="5-9union联合查询"><a href="#5-9union联合查询" class="headerlink" title="5.9union联合查询"></a>5.9union联合查询</h2><p>​    union：  联合 合并。即将多条查询语句的结果合并成一个结果</p>
<p><strong>一，应用场景：</strong><br>        要查询的结果来自于多个表，且多个表没有直接的连接关系，但查询的信息一致时</p>
<p><strong>二，语法</strong></p>
<p>​    select 字段|常量|表达式|函数 【from 表】 【where 条件】 union 【all】<br>​    select 字段|常量|表达式|函数 【from 表】 【where 条件】 union 【all】<br>​    select 字段|常量|表达式|函数 【from 表】 【where 条件】 union  【all】<br>​    …..<br>​    select 字段|常量|表达式|函数 【from 表】 【where 条件】</p>
<p><strong>三，特点</strong></p>
<p>​        1、多条查询语句的查询的列数必须是一致的<br>​        2、多条查询语句的查询的列的类型几乎相同<br>​        3、union代表去重，union all代表不去重</p>
<p><strong>四，示例</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#引入的案例：查询部门编号&gt;90或邮箱包含a的员工信息</span><br><span class="line">SELECT * FROM employees WHERE email LIKE &#39;%a%&#39; OR department_id&gt;90;;</span><br><span class="line"># 等价于</span><br><span class="line">SELECT * FROM employees  WHERE email LIKE &#39;%a%&#39;</span><br><span class="line">UNION</span><br><span class="line">SELECT * FROM employees  WHERE department_id&gt;90;</span><br><span class="line">#案例：查询中国用户中男性的信息以及外国用户中年男性的用户信息</span><br><span class="line">SELECT id,cname FROM t_ca WHERE csex&#x3D;&#39;男&#39;</span><br><span class="line">UNION ALL</span><br><span class="line">SELECT t_id,tname FROM t_ua WHERE tGender&#x3D;&#39;male&#39;;</span><br></pre></td></tr></table></figure>

<h2 id="5-10总结"><a href="#5-10总结" class="headerlink" title="5.10总结"></a>5.10总结</h2><p>​    执行顺序：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">select 查询列表    		     ⑦</span><br><span class="line">from 表1 别名       	      ①</span><br><span class="line">连接类型 join 表2   	        ②</span><br><span class="line">on 连接条件                  ③</span><br><span class="line">where 筛选                  ④</span><br><span class="line">group by 分组列表            ⑤</span><br><span class="line">having 筛选                 ⑥</span><br><span class="line">order by排序列表             ⑧</span><br><span class="line">limit 起始条目索引，条目数;    ⑨</span><br></pre></td></tr></table></figure>

<h1 id="六、DML语言的学习"><a href="#六、DML语言的学习" class="headerlink" title="六、DML语言的学习"></a>六、DML语言的学习</h1><p>DML语言:数据操作语言：<br>            插入：insert<br>            修改：update<br>            删除：delete</p>
<h2 id="6-1插入语句"><a href="#6-1插入语句" class="headerlink" title="6.1插入语句"></a>6.1插入语句</h2><p><strong>一、方式一</strong><br>        语法：insert into 表名(字段名,…) values(值,…);<br>        特点：<br>                1、要求值的类型和字段的类型要一致或兼容<br>                2、字段的个数和顺序不一定与原始表中的字段个数和顺序一致，但必须保证值和字段一一对应<br>                3、假如表中有可以为null的字段，注意可以通过以下两种方式插入null值<br>                        ①字段和值都省略<br>                        ②字段写上，值使用null<br>                4、字段和值的个数必须一致<br>                5、字段名可以省略，默认所有列</p>
<p><strong>二、方式二</strong><br>        语法：insert into 表名 set 字段=值,字段=值,…;</p>
<p><strong>三，两种方式 的区别：</strong><br>        1.方式一支持一次插入多行，语法如下：<br>                    insert into 表名【(字段名,..)】 values(值，..),(值，…),…;<br>        2.方式一支持子查询，语法如下：<br>                    insert into 表名 查询语句;</p>
<p><strong>四，示例</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">	SELECT * FROM beauty;</span><br><span class="line">#1.插入的值的类型要与列的类型一致或兼容</span><br><span class="line">	INSERT INTO beauty(id,NAME,sex,borndate,phone,photo,boyfriend_id)</span><br><span class="line">	VALUES(13,&#39;唐艺昕&#39;,&#39;女&#39;,&#39;1990-4-23&#39;,&#39;1898888888&#39;,NULL,2);</span><br><span class="line">#2.不可以为null的列必须插入值。可以为null的列如何插入值？</span><br><span class="line">#方式一：</span><br><span class="line">	INSERT INTO beauty(id,NAME,sex,borndate,phone,photo,boyfriend_id)</span><br><span class="line">	VALUES(13,&#39;唐艺昕&#39;,&#39;女&#39;,&#39;1990-4-23&#39;,&#39;1898888888&#39;,NULL,2);</span><br><span class="line">#方式二：</span><br><span class="line">	INSERT INTO beauty(id,NAME,sex,phone)</span><br><span class="line">	VALUES(15,&#39;娜扎&#39;,&#39;女&#39;,&#39;1388888888&#39;);</span><br><span class="line">#3.列的顺序是否可以调换</span><br><span class="line">	INSERT INTO beauty(NAME,sex,id,phone)</span><br><span class="line">	VALUES(&#39;蒋欣&#39;,&#39;女&#39;,16,&#39;110&#39;);</span><br><span class="line">#4.列数和值的个数必须一致</span><br><span class="line">	INSERT INTO beauty(NAME,sex,id,phone)</span><br><span class="line">	VALUES(&#39;关晓彤&#39;,&#39;女&#39;,17,&#39;110&#39;);</span><br><span class="line">#5.可以省略列名，默认所有列，而且列的顺序和表中列的顺序一致</span><br><span class="line">	INSERT INTO beauty</span><br><span class="line">	VALUES(18,&#39;张飞&#39;,&#39;男&#39;,NULL,&#39;119&#39;,NULL,NULL);</span><br><span class="line">	#方式二：</span><br><span class="line">	INSERT INTO beauty</span><br><span class="line">	SET id&#x3D;19,NAME&#x3D;&#39;刘涛&#39;,phone&#x3D;&#39;999&#39;;</span><br><span class="line">#两种方式大pk ★</span><br><span class="line">#1、方式一支持插入多行,方式二不支持</span><br><span class="line">	INSERT INTO beauty</span><br><span class="line">	VALUES(23,&#39;唐艺昕1&#39;,&#39;女&#39;,&#39;1990-4-23&#39;,&#39;1898888888&#39;,NULL,2)</span><br><span class="line">	,(24,&#39;唐艺昕2&#39;,&#39;女&#39;,&#39;1990-4-23&#39;,&#39;1898888888&#39;,NULL,2)</span><br><span class="line">	,(25,&#39;唐艺昕3&#39;,&#39;女&#39;,&#39;1990-4-23&#39;,&#39;1898888888&#39;,NULL,2);</span><br><span class="line">#2、方式一支持子查询，方式二不支持</span><br><span class="line">	INSERT INTO beauty(id,NAME,phone)</span><br><span class="line">	SELECT 26,&#39;宋茜&#39;,&#39;11809866&#39;;</span><br><span class="line">	INSERT INTO beauty(id,NAME,phone)</span><br><span class="line">	SELECT id,boyname,&#39;1234567&#39;</span><br><span class="line">	FROM boys WHERE id&lt;3;</span><br></pre></td></tr></table></figure>

<h2 id="6-2修改语句"><a href="#6-2修改语句" class="headerlink" title="6.2修改语句"></a>6.2修改语句</h2><p><strong>一，修改单表的记录</strong></p>
<p>​        语法：update 表名  set 列=新值,列=新值,…  where 筛选条件;</p>
<p><strong>二，修改多表的记录【补充】</strong></p>
<p>​        语法：<br>​            sql92语法：update 表1 别名,表2 别名 set 列=值,… where 连接条件 and 筛选条件;</p>
<p>​            sql99语法：</p>
<p>​                    update 表1 别名  inner|left|right join 表2 别名 on 连接条件 set 列=值,… where 筛选条件;</p>
<p><strong>三，示例</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#1.修改单表的记录</span><br><span class="line">	#案例1：修改beauty表中姓唐的女神的电话为13899888899</span><br><span class="line">		UPDATE beauty SET phone &#x3D; &#39;13899888899&#39;</span><br><span class="line">		WHERE NAME LIKE &#39;唐%&#39;;</span><br><span class="line">	#案例2：修改boys表中id好为2的名称为张飞，魅力值 10</span><br><span class="line">		UPDATE boys SET boyname&#x3D;&#39;张飞&#39;,usercp&#x3D;10</span><br><span class="line">		WHERE id&#x3D;2;</span><br><span class="line">#2.修改多表的记录</span><br><span class="line">	#案例 1：修改张无忌的女朋友的手机号为114</span><br><span class="line">		UPDATE boys bo</span><br><span class="line">		INNER JOIN beauty b ON bo.&#96;id&#96;&#x3D;b.&#96;boyfriend_id&#96;</span><br><span class="line">		SET b.&#96;phone&#96;&#x3D;&#39;119&#39;,bo.&#96;userCP&#96;&#x3D;1000</span><br><span class="line">		WHERE bo.&#96;boyName&#96;&#x3D;&#39;张无忌&#39;;</span><br><span class="line">	#案例2：修改没有男朋友的女神的男朋友编号都为2号</span><br><span class="line">		UPDATE boys bo</span><br><span class="line">		RIGHT JOIN beauty b ON bo.&#96;id&#96;&#x3D;b.&#96;boyfriend_id&#96;</span><br><span class="line">		SET b.&#96;boyfriend_id&#96;&#x3D;2</span><br><span class="line">		WHERE bo.&#96;id&#96; IS NULL;</span><br></pre></td></tr></table></figure>

<h2 id="6-3删除语句"><a href="#6-3删除语句" class="headerlink" title="6.3删除语句"></a>6.3删除语句</h2><p><strong>一，方式一：delete</strong><br>        语法：</p>
<p>​                1、单表的删除：delete from 表名 where 筛选条件</p>
<p>​                2、多表的删除【补充】</p>
<p>​                        sql92语法：delete 表1的别名,表2的别名 </p>
<p>​                                             from 表1 别名,表2 别名 </p>
<p>​                                             where 连接条件 </p>
<p>​                                             and 筛选条件;</p>
<p>​                        sql99语法：delete 表1的别名,表2的别名<br>​                                             from 表1 别名<br>​                                             inner|left|right join 表2 别名 on 连接条件<br>​                                             where 筛选条件;</p>
<p><strong>二，方式二：truncate</strong><br>语法：truncate table 表名;</p>
<p><strong>三，delete 与 truncate的区别</strong></p>
<p>​            1.delete 可以加where 条件，truncate不能加</p>
<p>​            2.truncate删除，效率高一丢丢</p>
<p>​            3.假如要删除的表中有自增长列，</p>
<p>​                    如果用delete删除后，再插入数据，自增长列的值从断点开始，</p>
<p>​                    而truncate删除后，再插入数据，自增长列的值从1开始。</p>
<p>​            4.truncate删除没有返回值，delete删除有返回值</p>
<p>​            5.truncate删除不能回滚，delete删除可以回滚.</p>
<p><strong>四，示例</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#方式一：delete</span><br><span class="line">	#1.单表的删除</span><br><span class="line">	#案例：删除手机号以9结尾的女神信息</span><br><span class="line">		DELETE FROM beauty WHERE phone LIKE &#39;%9&#39;;</span><br><span class="line">		SELECT * FROM beauty;</span><br><span class="line">	#2.多表的删除</span><br><span class="line">	#案例：删除张无忌的女朋友的信息</span><br><span class="line">		DELETE b FROM beauty b</span><br><span class="line">		INNER JOIN boys bo ON b.&#96;boyfriend_id&#96; &#x3D; bo.&#96;id&#96;</span><br><span class="line">		WHERE bo.&#96;boyName&#96;&#x3D;&#39;张无忌&#39;;</span><br><span class="line">	#案例：删除黄晓明的信息以及他女朋友的信息</span><br><span class="line">		DELETE b,bo FROM beauty b</span><br><span class="line">		INNER JOIN boys bo ON b.&#96;boyfriend_id&#96;&#x3D;bo.&#96;id&#96;</span><br><span class="line">		WHERE bo.&#96;boyName&#96;&#x3D;&#39;黄晓明&#39;;</span><br><span class="line">#方式二：truncate语句</span><br><span class="line">	#案例：将魅力值&gt;100的男神信息删除</span><br><span class="line">	TRUNCATE TABLE boys ;</span><br></pre></td></tr></table></figure>

<h2 id="6-4练习"><a href="#6-4练习" class="headerlink" title="6.4练习"></a>6.4练习</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">#1.	运行以下脚本创建表my_employees</span><br><span class="line">USE myemployees;</span><br><span class="line">CREATE TABLE my_employees(</span><br><span class="line">	Id INT(10),</span><br><span class="line">	First_name VARCHAR(10),</span><br><span class="line">	Last_name VARCHAR(10),</span><br><span class="line">	Userid VARCHAR(10),</span><br><span class="line">	Salary DOUBLE(10,2)</span><br><span class="line">);</span><br><span class="line">CREATE TABLE users(</span><br><span class="line">	id INT,</span><br><span class="line">	userid VARCHAR(10),</span><br><span class="line">	department_id INT</span><br><span class="line"></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#2.	显示表my_employees的结构</span><br><span class="line">DESC my_employees;</span><br><span class="line"></span><br><span class="line">#3.	向my_employees表中插入下列数据</span><br><span class="line">-- ID	FIRST_NAME	LAST_NAME	USERID	   SALARY</span><br><span class="line">-- 1	patel		Ralph		Rpatel	   895</span><br><span class="line">-- 2	Dancs		Betty		Bdancs	   860</span><br><span class="line">-- 3	Biri		Ben		    Bbiri	   1100</span><br><span class="line">-- 4	Newman		Chad		Cnewman	   750</span><br><span class="line">-- 5	Ropeburn	Audrey		Aropebur   1550</span><br><span class="line">#方式一：</span><br><span class="line">INSERT INTO my_employees</span><br><span class="line">VALUES(1,&#39;patel&#39;,&#39;Ralph&#39;,&#39;Rpatel&#39;,895),</span><br><span class="line">(2,&#39;Dancs&#39;,&#39;Betty&#39;,&#39;Bdancs&#39;,860),</span><br><span class="line">(3,&#39;Biri&#39;,&#39;Ben&#39;,&#39;Bbiri&#39;,1100),</span><br><span class="line">(4,&#39;Newman&#39;,&#39;Chad&#39;,&#39;Cnewman&#39;,750),</span><br><span class="line">(5,&#39;Ropeburn&#39;,&#39;Audrey&#39;,&#39;Aropebur&#39;,1550);</span><br><span class="line">DELETE FROM my_employees;</span><br><span class="line">#方式二：</span><br><span class="line">INSERT INTO my_employees</span><br><span class="line">SELECT 1,&#39;patel&#39;,&#39;Ralph&#39;,&#39;Rpatel&#39;,895 UNION</span><br><span class="line">SELECT 2,&#39;Dancs&#39;,&#39;Betty&#39;,&#39;Bdancs&#39;,860 UNION</span><br><span class="line">SELECT 3,&#39;Biri&#39;,&#39;Ben&#39;,&#39;Bbiri&#39;,1100 UNION</span><br><span class="line">SELECT 4,&#39;Newman&#39;,&#39;Chad&#39;,&#39;Cnewman&#39;,750 UNION</span><br><span class="line">SELECT 5,&#39;Ropeburn&#39;,&#39;Audrey&#39;,&#39;Aropebur&#39;,1550;</span><br><span class="line">			</span><br><span class="line">#4.	 向users表中插入数据</span><br><span class="line">-- 1	Rpatel	10</span><br><span class="line">-- 2	Bdancs	10</span><br><span class="line">-- 3	Bbiri	20</span><br><span class="line">-- 4	Cnewman	30</span><br><span class="line">-- 5	Aropebur	40</span><br><span class="line">INSERT INTO users</span><br><span class="line">VALUES(1,&#39;Rpatel&#39;,10),</span><br><span class="line">(2,&#39;Bdancs&#39;,10),</span><br><span class="line">(3,&#39;Bbiri&#39;,20);</span><br><span class="line"></span><br><span class="line">#5.将3号员工的last_name修改为“drelxer”</span><br><span class="line">UPDATE my_employees SET last_name&#x3D;&#39;drelxer&#39; WHERE id &#x3D; 3;</span><br><span class="line"></span><br><span class="line">#6.将所有工资少于900的员工的工资修改为1000</span><br><span class="line">UPDATE my_employees SET salary&#x3D;1000 WHERE salary&lt;900;</span><br><span class="line"></span><br><span class="line">#7.将userid 为Bbiri的user表和my_employees表的记录全部删除</span><br><span class="line">DELETE u,e FROM users u</span><br><span class="line">JOIN my_employees e ON u.&#96;userid&#96;&#x3D;e.&#96;Userid&#96;</span><br><span class="line">WHERE u.&#96;userid&#96;&#x3D;&#39;Bbiri&#39;;</span><br><span class="line"></span><br><span class="line">#8.删除所有数据</span><br><span class="line">DELETE FROM my_employees;</span><br><span class="line">DELETE FROM users;</span><br><span class="line"></span><br><span class="line">#9.检查所作的修正</span><br><span class="line">SELECT * FROM my_employees;</span><br><span class="line">SELECT * FROM users;</span><br><span class="line"></span><br><span class="line">#10.清空表my_employees</span><br><span class="line">TRUNCATE TABLE my_employees;</span><br></pre></td></tr></table></figure>

<h1 id="七、DDL语言的学习"><a href="#七、DDL语言的学习" class="headerlink" title="七、DDL语言的学习"></a>七、DDL语言的学习</h1><h2 id="7-1库和表的管理"><a href="#7-1库和表的管理" class="headerlink" title="7.1库和表的管理"></a>7.1库和表的管理</h2><p>一、库的管理<br>        创建、修改、删除<br>二、表的管理<br>        创建、修改、删除</p>
<p>​        创建： create<br>​        修改： alter<br>​        删除： drop</p>
<p><strong>一，库的管理</strong></p>
<p>1、创建库<br>        create database 【if not exists】 库名【 character set 字符集名】;<br>2、修改库<br>        alter database 库名 character set 字符集名;<br>3、删除库<br>        drop database 【if exists】 库名;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#1、库的创建</span><br><span class="line">&#x2F;*</span><br><span class="line">语法：</span><br><span class="line">create database  [if not exists]库名;</span><br><span class="line">*&#x2F;</span><br><span class="line">#案例：创建库Books</span><br><span class="line">	CREATE DATABASE IF NOT EXISTS books ;</span><br><span class="line">	</span><br><span class="line">#2、库的修改</span><br><span class="line">	RENAME DATABASE books TO 新库名;</span><br><span class="line">	#更改库的字符集</span><br><span class="line">	ALTER DATABASE books CHARACTER SET gbk;</span><br><span class="line">	</span><br><span class="line">#3、库的删除</span><br><span class="line">	DROP DATABASE IF EXISTS books;</span><br></pre></td></tr></table></figure>

<p><strong>二，表的管理</strong></p>
<p>​        1、创建表<br>​                create table 【if not exists】 表名(<br>​                            字段名 字段类型 【约束】,<br>​                    字段名 字段类型 【约束】,<br>​                    。。。<br>​                    字段名 字段类型 【约束】 </p>
<p>​                )</p>
<p>​    2、修改表</p>
<p>​                1.添加列<br>​                        alter table 表名 add column 列名 类型 【first|after 字段名】;<br>​                2.修改列的类型或约束<br>​                        alter table 表名 modify column 列名 新类型 【新约束】;<br>​                3.修改列名<br>​                        alter table 表名 change column 旧列名 新列名 类型;<br>​                4 .删除列<br>​                        alter table 表名 drop column 列名;<br>​                5.修改表名<br>​                        alter table 表名 rename 【to】 新表名;</p>
<p>​    3、删除表<br>​                        drop table【if exists】 表名;</p>
<p>​    4、复制表<br>​                1、复制表的结构<br>​                        create table 表名 like 旧表;<br>​                2、复制表的结构+数据<br>​                        create table 表名 select 查询列表 from 旧表【where 筛选】;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">#1.表的创建 ★</span><br><span class="line">&#x2F;*</span><br><span class="line">语法：</span><br><span class="line">create table 表名(</span><br><span class="line">	列名 列的类型【(长度) 约束】,</span><br><span class="line">	列名 列的类型【(长度) 约束】,</span><br><span class="line">	列名 列的类型【(长度) 约束】,</span><br><span class="line">	...</span><br><span class="line">	列名 列的类型【(长度) 约束】</span><br><span class="line">)</span><br><span class="line">*&#x2F;</span><br><span class="line">#案例：创建表Book</span><br><span class="line">CREATE TABLE book(</span><br><span class="line">	id INT,#编号</span><br><span class="line">	bName VARCHAR(20),#图书名</span><br><span class="line">	price DOUBLE,#价格</span><br><span class="line">	authorId  INT,#作者编号</span><br><span class="line">	publishDate DATETIME#出版日期</span><br><span class="line">);</span><br><span class="line"># 查看book表的结构</span><br><span class="line">DESC book;</span><br><span class="line">#案例：创建表author</span><br><span class="line">CREATE TABLE IF NOT EXISTS author(</span><br><span class="line">	id INT,</span><br><span class="line">	au_name VARCHAR(20),</span><br><span class="line">	nation VARCHAR(10)</span><br><span class="line">)</span><br><span class="line"># 查看author表的结构</span><br><span class="line">DESC author;</span><br><span class="line"></span><br><span class="line">#2.表的修改</span><br><span class="line">&#x2F;*</span><br><span class="line">语法</span><br><span class="line">alter table 表名 add|drop|modify|change column 列名 【列类型 约束】;</span><br><span class="line">*&#x2F;</span><br><span class="line">#①修改列名</span><br><span class="line">ALTER TABLE book CHANGE COLUMN publishdate pubDate DATETIME;</span><br><span class="line">#②修改列的类型或约束</span><br><span class="line">ALTER TABLE book MODIFY COLUMN pubdate TIMESTAMP;</span><br><span class="line">#③添加新列</span><br><span class="line">ALTER TABLE author ADD COLUMN annual DOUBLE; </span><br><span class="line">#④删除列</span><br><span class="line">ALTER TABLE book_author DROP COLUMN  annual;</span><br><span class="line">#⑤修改表名</span><br><span class="line">ALTER TABLE author RENAME TO book_author;</span><br><span class="line"></span><br><span class="line">#3.表的删除</span><br><span class="line">DROP TABLE IF EXISTS book_author;</span><br><span class="line"># 查看所有表</span><br><span class="line">SHOW TABLES;</span><br><span class="line"></span><br><span class="line">#4.表的复制</span><br><span class="line">INSERT INTO author VALUES</span><br><span class="line">(1,&#39;村上春树&#39;,&#39;日本&#39;),</span><br><span class="line">(2,&#39;莫言&#39;,&#39;中国&#39;),</span><br><span class="line">(3,&#39;冯唐&#39;,&#39;中国&#39;),</span><br><span class="line">(4,&#39;金庸&#39;,&#39;中国&#39;);</span><br><span class="line">SELECT * FROM Author;</span><br><span class="line">SELECT * FROM copy2;</span><br><span class="line">#1.仅仅复制表的结构</span><br><span class="line">CREATE TABLE copy LIKE author;</span><br><span class="line">#2.复制表的结构+数据</span><br><span class="line">CREATE TABLE copy2 </span><br><span class="line">SELECT * FROM author;</span><br><span class="line">#只复制部分数据</span><br><span class="line">CREATE TABLE copy3</span><br><span class="line">SELECT id,au_name</span><br><span class="line">FROM author </span><br><span class="line">WHERE nation&#x3D;&#39;中国&#39;;</span><br><span class="line">#仅仅复制某些字段</span><br><span class="line">CREATE TABLE copy4 </span><br><span class="line">SELECT id,au_name</span><br><span class="line">FROM author</span><br><span class="line">WHERE 0;</span><br><span class="line"></span><br><span class="line">#通用的写法：</span><br><span class="line">DROP DATABASE IF EXISTS 旧库名;</span><br><span class="line">CREATE DATABASE 新库名;</span><br><span class="line">DROP TABLE IF EXISTS 旧表名;</span><br><span class="line">CREATE TABLE  表名();</span><br></pre></td></tr></table></figure>

<h2 id="7-2常见数据类型介绍"><a href="#7-2常见数据类型介绍" class="headerlink" title="7.2常见数据类型介绍"></a>7.2常见数据类型介绍</h2><p><strong>一，数值型</strong></p>
<ul>
<li>整数型</li>
</ul>
<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095635.png"></p>
<p>​    特点：<br>​            ① 如果不设置无符号还是有符号，默认是有符号，如果想设置无符号，需要添加unsigned关键字<br>​            ② 如果插入的数值超出了整型的范围,会报out of range异常，并且插入临界值<br>​            ③ 如果不设置长度，会有默认的长度<br>​                长度代表了显示的最大宽度，如果不够会用0在左边填充，但必须搭配zerofill使用！此时为无符号类型。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#1.如何设置无符号和有符号</span><br><span class="line">DROP TABLE IF EXISTS tab_int;</span><br><span class="line">CREATE TABLE tab_int(</span><br><span class="line">	t1 INT(7) ,</span><br><span class="line">	t2 INT(7) unsigned</span><br><span class="line">);</span><br><span class="line">CREATE TABLE tab_int(</span><br><span class="line">	t1 INT(7) ZEROFILL,</span><br><span class="line">	t2 INT(7) ZEROFILL </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">DESC tab_int;</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_int VALUES(-123456);</span><br><span class="line">INSERT INTO tab_int VALUES(-123456,-123456);</span><br><span class="line">INSERT INTO tab_int VALUES(2147483648,4294967296);</span><br><span class="line">INSERT INTO tab_int VALUES(123,123);</span><br><span class="line">SELECT * FROM tab_int;</span><br></pre></td></tr></table></figure>

<ul>
<li>小数型</li>
</ul>
<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095636.png"></p>
<p>​        分类：<br>​                1.浮点型<br>​                        float(M,D)<br>​                        double(M,D)<br>​                2.定点型<br>​                        dec(M，D)<br>​                        decimal(M,D)</p>
<p>​        特点：</p>
<p>​                ①    M：整数部位+小数部位 的长度<br>​                        D：小数部位的长度<br>​                        如果超过范围，则插入临界值</p>
<p>​                ②    M和D都可以省略<br>​                        如果是decimal，则M默认为10，D默认为0<br>​                        如果是float和double，则会根据插入的数值的精度来决定精度</p>
<p>​                ③    定点型的精确度较高，如果要求插入数值的精度较高如货币运算等则考虑使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#测试M和D</span><br><span class="line"></span><br><span class="line">DROP TABLE tab_float;</span><br><span class="line">CREATE TABLE tab_float(</span><br><span class="line">	f1 FLOAT,</span><br><span class="line">	f2 DOUBLE,</span><br><span class="line">	f3 DECIMAL</span><br><span class="line">);</span><br><span class="line">SELECT * FROM tab_float;</span><br><span class="line">DESC tab_float;</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_float VALUES(123.4523,123.4523,123.4523);</span><br><span class="line">INSERT INTO tab_float VALUES(123.456,123.456,123.456);</span><br><span class="line">INSERT INTO tab_float VALUES(123.4,123.4,123.4);</span><br><span class="line">INSERT INTO tab_float VALUES(1523.4,1523.4,1523.4);</span><br><span class="line"></span><br><span class="line">#原则：</span><br><span class="line">&#x2F;*</span><br><span class="line">所选择的类型越简单越好，能保存数值的类型越小越好</span><br><span class="line">*&#x2F;</span><br></pre></td></tr></table></figure>

<ul>
<li>位类型</li>
</ul>
<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095637.png"></p>
<p><strong>二，字符型</strong></p>
<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095638.png"></p>
<p>​        较短的文本：</p>
<p>​                char<br>​                varchar</p>
<p>​        其他：</p>
<p>​                binary和varbinary用于保存较短的二进制<br>​                enum用于保存枚举<br>​                set用于保存集合</p>
<p>​        较长的文本：<br>​                text<br>​                blob(较大的二进制)</p>
<p>​        特点：</p>
<p>​                    写法              M的意思                                                      特点                        空间的耗费        效率</p>
<p>char            char(M)        最大的字符数，可以省略，默认为1        固定长度的字符        比较耗费            高</p>
<p>varchar     varchar(M)    最大的字符数，不可以省略                    可变长度的字符          比较节省            低</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE tab_char(</span><br><span class="line">	c1 ENUM(&#39;a&#39;,&#39;b&#39;,&#39;c&#39;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_char VALUES(&#39;a&#39;);</span><br><span class="line">INSERT INTO tab_char VALUES(&#39;b&#39;);</span><br><span class="line">INSERT INTO tab_char VALUES(&#39;c&#39;);</span><br><span class="line">INSERT INTO tab_char VALUES(&#39;m&#39;);</span><br><span class="line">INSERT INTO tab_char VALUES(&#39;A&#39;);</span><br><span class="line"></span><br><span class="line">SELECT * FROM tab_set;</span><br><span class="line"></span><br><span class="line">CREATE TABLE tab_set(</span><br><span class="line">	s1 SET(&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;)</span><br><span class="line"></span><br><span class="line">);</span><br><span class="line">INSERT INTO tab_set VALUES(&#39;a&#39;);</span><br><span class="line">INSERT INTO tab_set VALUES(&#39;A,B&#39;);</span><br><span class="line">INSERT INTO tab_set VALUES(&#39;a,c,d&#39;);</span><br></pre></td></tr></table></figure>

<p><strong>三，日期型</strong></p>
<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095639.png"></p>
<p>​        分类：<br>​                date只保存日期<br>​                time 只保存时间<br>​                year只保存年<br>​                datetime保存日期+时间<br>​                timestamp保存日期+时间</p>
<p>特点：</p>
<p>​                            字节                    范围                        时区等的影响</p>
<p>datetime                8                1000——9999                不受<br>timestamp            4                1970-2038                           受</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE tab_date(</span><br><span class="line">	t1 DATETIME,</span><br><span class="line">	t2 TIMESTAMP</span><br><span class="line"></span><br><span class="line">);</span><br><span class="line">INSERT INTO tab_date VALUES(NOW(),NOW());</span><br><span class="line">SELECT * FROM tab_date;</span><br><span class="line">SHOW VARIABLES LIKE &#39;time_zone&#39;;</span><br><span class="line">SET time_zone&#x3D;&#39;+9:00&#39;;</span><br></pre></td></tr></table></figure>

<h2 id="7-3常见约束"><a href="#7-3常见约束" class="headerlink" title="7.3常见约束"></a>7.3常见约束</h2><p><strong>含义</strong>：一种限制，用于限制表中的数据，为了保证表中的数据的准确和可靠性</p>
<p><strong>分类</strong>：六大约束<br>    NOT NULL：非空，用于保证该字段的值不能为空<br>            比如姓名、学号等<br>    DEFAULT:默认，用于保证该字段有默认值<br>            比如性别<br>    PRIMARY KEY:主键，用于保证该字段的值具有唯一性，并且非空<br>            比如学号、员工编号等<br>    UNIQUE:唯一，用于保证该字段的值具有唯一性，可以为空<br>            比如座位号<br>    CHECK:检查约束【mysql中不支持】<br>            比如年龄、性别<br>    FOREIGN KEY:外键，用于限制两个表的关系，用于保证该字段的值必须来自于主表的关联列的值<br>                在从表添加外键约束，用于引用主表中某列的值<br>            比如学生表的专业编号，员工表的部门编号，员工表的工种编号</p>
<p><strong>添加约束的时机：</strong><br>    1.创建表时<br>    2.修改表时</p>
<p><strong>约束的添加分类：</strong><br>    列级约束：六大约束语法上都支持，但外键约束没有效果</p>
<p>​    表级约束：除了非空、默认，其他的都支持<br><strong>主键和唯一的大对比：</strong></p>
<p>​            保证唯一性          是否允许为空                一个表中可以有多少个           是否允许组合<br>主键            √                            ×                                    至多有1个                           √，但不推荐<br>唯一            √                            √                                    可以有多个                          √，但不推荐</p>
<p><strong>外键：</strong><br>    1、要求在从表设置外键关系<br>    2、从表的外键列的类型和主表的关联列的类型要求一致或兼容，名称无要求<br>    3、主表的关联列必须是一个key（一般是主键或唯一）<br>    4、插入数据时，先插入主表，再插入从表；删除数据时，先删除从表，再删除主表</p>
<p><strong>语法：</strong>    CREATE TABLE 表名(<br>                            字段名 字段类型 列级约束,<br>                            字段名 字段类型,<br>                            表级约束</p>
<p>​                    )</p>
<p><strong>一、创建表时添加约束</strong></p>
<p>​    1.添加列级约束</p>
<p>​            语法：</p>
<p>​                直接在字段名和类型后面追加 约束类型即可。</p>
<p>​                只支持：默认、非空、主键、唯一</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">USE students;</span><br><span class="line">DROP TABLE stuinfo;</span><br><span class="line">CREATE TABLE stuinfo(</span><br><span class="line">	id INT PRIMARY KEY,#主键</span><br><span class="line">	stuName VARCHAR(20) NOT NULL UNIQUE,#非空</span><br><span class="line">	gender CHAR(1) CHECK(gender&#x3D;&#39;男&#39; OR gender &#x3D;&#39;女&#39;),#检查</span><br><span class="line">	seat INT UNIQUE,#唯一</span><br><span class="line">	age INT DEFAULT  18,#默认约束</span><br><span class="line">	majorId INT REFERENCES major(id)#外键</span><br><span class="line"></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">CREATE TABLE major(</span><br><span class="line">	id INT PRIMARY KEY,</span><br><span class="line">	majorName VARCHAR(20)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#查看stuinfo中的所有索引，包括主键、外键、唯一</span><br><span class="line">SHOW INDEX FROM stuinfo;</span><br></pre></td></tr></table></figure>

<p>​    2.添加表级约束</p>
<p>​            语法：在各个字段的最下面<br>                     【constraint 约束名】 约束类型(字段名) </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS stuinfo;</span><br><span class="line">CREATE TABLE stuinfo(</span><br><span class="line">	id INT,</span><br><span class="line">	stuname VARCHAR(20),</span><br><span class="line">	gender CHAR(1),</span><br><span class="line">	seat INT,</span><br><span class="line">	age INT,</span><br><span class="line">	majorid INT,</span><br><span class="line">	CONSTRAINT pk PRIMARY KEY(id),#主键</span><br><span class="line">	CONSTRAINT uq UNIQUE(seat),#唯一键</span><br><span class="line">	CONSTRAINT ck CHECK(gender &#x3D;&#39;男&#39; OR gender  &#x3D; &#39;女&#39;),#检查</span><br><span class="line">	CONSTRAINT fk_stuinfo_major FOREIGN KEY(majorid) REFERENCES major(id)#外键</span><br><span class="line">);</span><br><span class="line">SHOW INDEX FROM stuinfo;</span><br></pre></td></tr></table></figure>

<p><strong>通用的写法：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE IF NOT EXISTS stuinfo(</span><br><span class="line">	id INT PRIMARY KEY,</span><br><span class="line">	stuname VARCHAR(20),</span><br><span class="line">	sex CHAR(1),</span><br><span class="line">	age INT DEFAULT 18,</span><br><span class="line">	seat INT UNIQUE,</span><br><span class="line">	majorid INT,</span><br><span class="line">	CONSTRAINT fk_stuinfo_major FOREIGN KEY(majorid) REFERENCES major(id)</span><br><span class="line"></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>二、修改表时添加约束</strong></p>
<p>​    1、添加列级约束<br>​                alter table 表名 modify column 字段名 字段类型 新约束;</p>
<p>​    2、添加表级约束<br>​                alter table 表名 add 【constraint 约束名】 约束类型(字段名) 【外键的引用】;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS stuinfo;</span><br><span class="line">CREATE TABLE stuinfo(</span><br><span class="line">	id INT,</span><br><span class="line">	stuname VARCHAR(20),</span><br><span class="line">	gender CHAR(1),</span><br><span class="line">	seat INT,</span><br><span class="line">	age INT,</span><br><span class="line">	majorid INT</span><br><span class="line">)</span><br><span class="line">DESC stuinfo;</span><br><span class="line">#1.添加非空约束</span><br><span class="line">	ALTER TABLE stuinfo MODIFY COLUMN stuname VARCHAR(20)  NOT NULL;</span><br><span class="line">#2.添加默认约束</span><br><span class="line">	ALTER TABLE stuinfo MODIFY COLUMN age INT DEFAULT 18;</span><br><span class="line">#3.添加主键</span><br><span class="line">	#①列级约束</span><br><span class="line">		ALTER TABLE stuinfo MODIFY COLUMN id INT PRIMARY KEY;</span><br><span class="line">	#②表级约束</span><br><span class="line">		ALTER TABLE stuinfo ADD PRIMARY KEY(id);</span><br><span class="line">#4.添加唯一</span><br><span class="line">	#①列级约束</span><br><span class="line">		ALTER TABLE stuinfo MODIFY COLUMN seat INT UNIQUE;</span><br><span class="line">	#②表级约束</span><br><span class="line">		ALTER TABLE stuinfo ADD UNIQUE(seat);</span><br><span class="line">#5.添加外键</span><br><span class="line">	ALTER TABLE stuinfo ADD CONSTRAINT fk_stuinfo_major FOREIGN KEY(majorid) REFERENCES major(id); </span><br></pre></td></tr></table></figure>

<p><strong>三、修改表时删除约束</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#1.删除非空约束</span><br><span class="line">	ALTER TABLE stuinfo MODIFY COLUMN stuname VARCHAR(20) NULL;</span><br><span class="line">#2.删除默认约束</span><br><span class="line">	ALTER TABLE stuinfo MODIFY COLUMN age INT ;</span><br><span class="line">#3.删除主键</span><br><span class="line">	ALTER TABLE stuinfo DROP PRIMARY KEY;</span><br><span class="line">#4.删除唯一</span><br><span class="line">	ALTER TABLE stuinfo DROP INDEX seat;</span><br><span class="line">#5.删除外键</span><br><span class="line">	ALTER TABLE stuinfo DROP FOREIGN KEY fk_stuinfo_major;</span><br><span class="line">SHOW INDEX FROM stuinfo;</span><br></pre></td></tr></table></figure>

<h3 id="7-3-1标识列"><a href="#7-3-1标识列" class="headerlink" title="7.3.1标识列"></a>7.3.1标识列</h3><p>​        又称为自增长列<br>​        含义：可以不用手动的插入值，系统提供默认的序列值</p>
<p><strong>特点：</strong><br>        1、标识列必须和主键搭配吗？不一定，但要求是一个key</p>
<p>​        2、一个表可以有几个标识列？至多一个！</p>
<p>​        3、标识列的类型只能是数值型</p>
<p>​        4、标识列可以通过 SET auto_increment_increment=3;设置步长</p>
<p>​                可以通过 手动插入值，设置起始值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS tab_identity;</span><br><span class="line">CREATE TABLE tab_identity(</span><br><span class="line">	id INT  ,</span><br><span class="line">	NAME FLOAT UNIQUE AUTO_INCREMENT,</span><br><span class="line">	seat INT </span><br><span class="line">);</span><br><span class="line">TRUNCATE TABLE tab_identity;</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_identity(id,NAME) VALUES(NULL,&#39;john&#39;);</span><br><span class="line">INSERT INTO tab_identity(NAME) VALUES(&#39;lucy&#39;);</span><br><span class="line">SELECT * FROM tab_identity;</span><br><span class="line"># 显示自动增长的属性配置</span><br><span class="line">SHOW VARIABLES LIKE &#39;%auto_increment%&#39;;</span><br><span class="line"># 设置自动增长的步长配置</span><br><span class="line">SET auto_increment_increment&#x3D;3;</span><br></pre></td></tr></table></figure>

<h1 id="八、TCL语言的学习"><a href="#八、TCL语言的学习" class="headerlink" title="八、TCL语言的学习"></a>八、TCL语言的学习</h1><p>Transaction Control Language: 事务控制语言</p>
<h2 id="8-1事务和事务处理"><a href="#8-1事务和事务处理" class="headerlink" title="8.1事务和事务处理"></a>8.1事务和事务处理</h2><p>案例：转账事件<br>    张三丰  1000<br>    郭襄    1000<br>    当下面两条语句执行到一半时，因意外停止，数据就会出现异常<br>    update 表 set 张三丰的余额=500 where name=’张三丰’<br>    意外<br>    update 表 set 郭襄的余额=1500 where name=’郭襄’</p>
<p><strong>一，事务的特性：ACID</strong><br>    原子性(A)：    一个事务不可再分割，要么都执行要么都不执行<br>    一致性(C)：    一个事务执行会使数据从一个一致状态切换到另外一个一致状态<br>    隔离性(I)：     一个事务的执行不受其他事务的干扰<br>    持久性(D)：    一个事务一旦提交，则会永久的改变数据库的数据.</p>
<p><strong>事务的创建</strong><br>    隐式事务：事务没有明显的开启和结束的标记<br>            比如insert、update、delete语句<br>            delete from 表 where id =1;<br>    显式事务：事务具有明显的开启和结束的标记<br>        前提：必须先设置自动提交功能为禁用</p>
<p><strong>关闭自动提交功能</strong>，此设置只针对当前会话有效并不是永久的<br>    set autocommit=0;</p>
<p>步骤1：开启事务<br>    set autocommit=0;<br>    start transaction;可选的。因为当开启自动提交时会默认打开<br>步骤2：编写事务中的sql语句(select insert update delete)<br>    语句1;<br>    语句2;<br>    …<br>步骤3：结束事务<br>    commit;提交事务，将当前语句执行到内存中<br>    rollback;回滚事务，不执行当前语句</p>
<p><strong>事务的隔离级别：</strong></p>
<p>​    不隔离引起的问题：</p>
<p><strong>脏读</strong>: 对于两个事务 T1, T2, T1 读取了已经被 T2 更新但还<strong>没有被提交</strong>的字段. 之后, 若 T2 回滚, T1读取的内容就是临时且无效的</p>
<p><strong>不可重复读</strong>: 对于两个事务T1, T2, T1 读取了一个字段, 然后 T2 <strong>更新了</strong>该字段. 之后, T1再次读取同一个字段, 值就不同了</p>
<p><strong>幻读</strong>: 对于两个事务T1, T2, T1 从一个表中读取了一个字段, 然后 T2 在该表中<strong>插入</strong>了一些新的行. 之后, 如果 T1 再次读取同一个表, 就会多出几行.</p>
<p>​    4种隔离级别：</p>
<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208095640.png"></p>
<p>​                                        脏读        不可重复读           幻读<br>read uncommitted：    √                √                           √<br>read committed：         ×                √                           √<br>repeatable read：         ×                 ×                          √<br>serializable                     ×                 ×                           ×</p>
<p>Oracle 支持的 2 种事务隔离级别：READ COMMITED, SERIALIZABLE。 Oracle 默认的事务隔离级别为: READ </p>
<p>COMMITED </p>
<p>Mysql 支持 4 种事务隔离级别. Mysql 默认的事务隔离级别为: REPEATABLE READ<br><strong>查看隔离级别</strong>：select @@tx_isolation;<br><strong>设置隔离级别</strong>：set session|global transaction isolation level 隔离级别;</p>
<p><strong>设置保存点</strong>： savepoint 节点名;<br>与 rollback to 节点名一起使用</p>
<p><strong>二，示例</strong></p>
<p>1.演示事务的使用步骤</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#开启事务</span><br><span class="line">	SET autocommit&#x3D;0;</span><br><span class="line">	START TRANSACTION;</span><br><span class="line">#编写一组事务的语句</span><br><span class="line">	UPDATE account SET balance &#x3D; 1000 WHERE username&#x3D;&#39;张无忌&#39;;</span><br><span class="line">	UPDATE account SET balance &#x3D; 1000 WHERE username&#x3D;&#39;赵敏&#39;;</span><br><span class="line">#结束事务</span><br><span class="line">	ROLLBACK;</span><br><span class="line">	# commit;</span><br><span class="line"></span><br><span class="line">SELECT * FROM account;</span><br></pre></td></tr></table></figure>

<p>2.演示事务对于delete和truncate的处理的区别</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">	# delete ：可以回滚</span><br><span class="line">	# truncate：不可以回滚</span><br><span class="line">SET autocommit&#x3D;0;</span><br><span class="line">START TRANSACTION;</span><br><span class="line">DELETE FROM account;</span><br><span class="line"># TRUNCATE TABLE account;</span><br><span class="line">ROLLBACK;</span><br></pre></td></tr></table></figure>

<p>3.演示savepoint 的使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SET autocommit&#x3D;0;</span><br><span class="line">START TRANSACTION;</span><br><span class="line">DELETE FROM account WHERE id&#x3D;25;</span><br><span class="line">SAVEPOINT a;#设置保存点</span><br><span class="line">DELETE FROM account WHERE id&#x3D;28;</span><br><span class="line">ROLLBACK TO a;#回滚到保存点</span><br><span class="line"></span><br><span class="line">SELECT * FROM account;</span><br></pre></td></tr></table></figure>

<h1 id="九、视图的讲解"><a href="#九、视图的讲解" class="headerlink" title="九、视图的讲解"></a>九、视图的讲解</h1><p><strong>含义</strong>：虚拟表，和普通表一样使用<br>mysql5.1版本出现的新特性，是通过表动态生成的数据</p>
<p><strong>视图和表的区别</strong>：<br>            创建语法的关键字    是否实际占用物理空间                        使用<br>视图    create view                只是保存了sql逻辑            增删改查，只是一般不能增删改<br>表        create table              保存了数据                                     增删改查</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#案例：查询姓张的学生名和专业名</span><br><span class="line"> # 原来的写法</span><br><span class="line">	SELECT stuname,majorname</span><br><span class="line">	FROM stuinfo s</span><br><span class="line">	INNER JOIN major m ON s.&#96;majorid&#96;&#x3D; m.&#96;id&#96;</span><br><span class="line">	WHERE s.&#96;stuname&#96; LIKE &#39;张%&#39;;</span><br><span class="line"> # 封装到一个视图</span><br><span class="line">	CREATE VIEW v1</span><br><span class="line">	AS</span><br><span class="line">	SELECT stuname,majorname</span><br><span class="line">	FROM stuinfo s</span><br><span class="line">	INNER JOIN major m ON s.&#96;majorid&#96;&#x3D; m.&#96;id&#96;;</span><br><span class="line"> # 在使用时，使用视图边界查询</span><br><span class="line">	SELECT * FROM v1 WHERE stuname LIKE &#39;张%&#39;;</span><br></pre></td></tr></table></figure>

<p><strong>一、创建视图</strong></p>
<p>​    语法：create view 视图名<br>​               as<br>​               查询语句;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">USE myemployees;</span><br><span class="line"></span><br><span class="line">#1.查询姓名中包含a字符的员工名、部门名和工种信息</span><br><span class="line"> #①创建</span><br><span class="line">	CREATE VIEW myv1</span><br><span class="line">	AS</span><br><span class="line">	SELECT last_name,department_name,job_title</span><br><span class="line">	FROM employees e</span><br><span class="line">	JOIN departments d ON e.department_id  &#x3D; d.department_id</span><br><span class="line">	JOIN jobs j ON j.job_id  &#x3D; e.job_id;</span><br><span class="line"> #②使用</span><br><span class="line">	SELECT * FROM myv1 WHERE last_name LIKE &#39;%a%&#39;;</span><br><span class="line">#2.查询各部门的平均工资级别</span><br><span class="line"> #①创建视图查看每个部门的平均工资</span><br><span class="line">	CREATE VIEW myv2</span><br><span class="line">	AS</span><br><span class="line">	SELECT AVG(salary) ag,department_id</span><br><span class="line">	FROM employees</span><br><span class="line">	GROUP BY department_id;</span><br><span class="line"> #②使用</span><br><span class="line">	SELECT myv2.&#96;ag&#96;,g.grade_level</span><br><span class="line">	FROM myv2</span><br><span class="line">	JOIN job_grades g</span><br><span class="line">	ON myv2.&#96;ag&#96; BETWEEN g.&#96;lowest_sal&#96; AND g.&#96;highest_sal&#96;;</span><br><span class="line">#3.查询平均工资最低的部门信息</span><br><span class="line">	SELECT * FROM myv2 ORDER BY ag LIMIT 1;</span><br><span class="line">#4.查询平均工资最低的部门名和工资</span><br><span class="line"> # ①创建视图</span><br><span class="line">	CREATE VIEW myv3</span><br><span class="line">	AS</span><br><span class="line">	SELECT * FROM myv2 ORDER BY ag LIMIT 1;</span><br><span class="line"> # ②使用视图</span><br><span class="line">	SELECT d.*,m.ag</span><br><span class="line">	FROM myv3 m</span><br><span class="line">	JOIN departments d</span><br><span class="line">	ON m.&#96;department_id&#96;&#x3D;d.&#96;department_id&#96;;</span><br></pre></td></tr></table></figure>

<p><strong>二、视图的修改</strong></p>
<p>方式一：如果试图存在就替换，不存在就创建</p>
<p>​    语法：create or replace view  视图名<br>​              as<br>​              查询语句;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM myv3 </span><br><span class="line"></span><br><span class="line">CREATE OR REPLACE VIEW myv3</span><br><span class="line">AS</span><br><span class="line">SELECT AVG(salary),job_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY job_id;</span><br></pre></td></tr></table></figure>

<p>方式二：</p>
<p>​    语法：alter view 视图名<br>​              as<br>​              查询语句;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ALTER VIEW myv3</span><br><span class="line">AS</span><br><span class="line">SELECT * FROM employees;</span><br></pre></td></tr></table></figure>

<p><strong>三、删除视图</strong></p>
<p>​    语法：drop view 视图名,视图名,…;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP VIEW emp_v1,emp_v2,myv3;</span><br></pre></td></tr></table></figure>

<p><strong>四、查看视图</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DESC myv3;</span><br><span class="line">SHOW CREATE VIEW myv3;</span><br></pre></td></tr></table></figure>

<p><strong>五、视图的更新</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">CREATE OR REPLACE VIEW myv1</span><br><span class="line">	AS</span><br><span class="line">	SELECT last_name,email</span><br><span class="line">	FROM employees;</span><br><span class="line"></span><br><span class="line">	SELECT * FROM myv1;</span><br><span class="line">	SELECT * FROM employees;</span><br><span class="line">#1.插入：插入后不仅在视图表中插入了数据，在原始表中也插入了数据</span><br><span class="line">INSERT INTO myv1 VALUES(&#39;张飞&#39;,&#39;zf@qq.com&#39;);</span><br><span class="line">#2.修改：插入后不仅在视图表中修改了数据，在原始表中也修改了数据</span><br><span class="line">UPDATE myv1 SET last_name &#x3D; &#39;张无忌&#39; WHERE last_name&#x3D;&#39;张飞&#39;;</span><br><span class="line">#3.删除：插入后不仅在视图表中删除了数据，在原始表中也删除了数据</span><br><span class="line">DELETE FROM myv1 WHERE last_name &#x3D; &#39;张无忌&#39;;</span><br></pre></td></tr></table></figure>

<p>​    <strong>视图的可更新性和视图中查询的定义有关系，以下类型的视图是不能更新的。</strong></p>
<p>• 包含以下关键字的sql语句：分组函数、distinct、group by、having、union或者union all</p>
<p>• 常量视图</p>
<p>• Select中包含子查询</p>
<p>• join</p>
<p>• from一个不能更新的视图</p>
<p>• where子句的子查询引用了from子句中的表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">#①包含以下关键字的sql语句：分组函数、distinct、group  by、having、</span><br><span class="line"># union或者union all</span><br><span class="line">	CREATE OR REPLACE VIEW myv1</span><br><span class="line">	AS</span><br><span class="line">	SELECT MAX(salary) m,department_id</span><br><span class="line">	FROM employees</span><br><span class="line">	GROUP BY department_id;</span><br><span class="line">	#更新</span><br><span class="line">	SELECT * FROM myv1;</span><br><span class="line">	UPDATE myv1 SET m&#x3D;9000 WHERE department_id&#x3D;10;</span><br><span class="line">#②常量视图</span><br><span class="line">	CREATE OR REPLACE VIEW myv2</span><br><span class="line">	AS</span><br><span class="line">	SELECT &#39;john&#39; NAME;</span><br><span class="line">	#更新</span><br><span class="line">	SELECT * FROM myv2;</span><br><span class="line">	UPDATE myv2 SET NAME&#x3D;&#39;lucy&#39;;</span><br><span class="line">#③Select中包含子查询</span><br><span class="line">	CREATE OR REPLACE VIEW myv3</span><br><span class="line">	AS</span><br><span class="line">	SELECT department_id,(SELECT MAX(salary) FROM employees) 最高工资</span><br><span class="line">	FROM departments;</span><br><span class="line">	#更新</span><br><span class="line">	SELECT * FROM myv3;</span><br><span class="line">	UPDATE myv3 SET 最高工资&#x3D;100000;</span><br><span class="line">#④join</span><br><span class="line">	CREATE OR REPLACE VIEW myv4</span><br><span class="line">	AS</span><br><span class="line">	SELECT last_name,department_name</span><br><span class="line">	FROM employees e</span><br><span class="line">	JOIN departments d</span><br><span class="line">	ON e.department_id  &#x3D; d.department_id;</span><br><span class="line">	#更新</span><br><span class="line">	SELECT * FROM myv4;</span><br><span class="line">	UPDATE myv4 SET last_name  &#x3D; &#39;张飞&#39; WHERE last_name&#x3D;&#39;Whalen&#39;;</span><br><span class="line">	INSERT INTO myv4 VALUES(&#39;陈真&#39;,&#39;xxxx&#39;);</span><br><span class="line">#⑤from一个不能更新的视图</span><br><span class="line">	CREATE OR REPLACE VIEW myv5</span><br><span class="line">	AS</span><br><span class="line">	SELECT * FROM myv3;</span><br><span class="line">	#更新</span><br><span class="line">	SELECT * FROM myv5;</span><br><span class="line">	UPDATE myv5 SET 最高工资&#x3D;10000 WHERE department_id&#x3D;60;</span><br><span class="line">#⑥where子句的子查询引用了from子句中的表</span><br><span class="line">	CREATE OR REPLACE VIEW myv6</span><br><span class="line">	AS</span><br><span class="line">	SELECT last_name,email,salary</span><br><span class="line">	FROM employees</span><br><span class="line">	WHERE employee_id IN(</span><br><span class="line">		SELECT  manager_id</span><br><span class="line">		FROM employees</span><br><span class="line">		WHERE manager_id IS NOT NULL</span><br><span class="line">	);</span><br><span class="line">	#更新</span><br><span class="line">	SELECT * FROM myv6;</span><br><span class="line">	UPDATE myv6 SET salary&#x3D;10000 WHERE last_name &#x3D; &#39;k_ing&#39;;</span><br></pre></td></tr></table></figure>

<h1 id="十、变量"><a href="#十、变量" class="headerlink" title="十、变量"></a>十、变量</h1><p>系统变量：<br>    全局变量<br>    会话变量</p>
<p>自定义变量：<br>    用户变量<br>    局部变量</p>
<p><strong>一、系统变量</strong></p>
<p>说明：变量由系统定义，不是用户定义，属于服务器层面 </p>
<p>注意：全局变量需要添加global关键字，会话变量需要添加session关键字，如果不写，默认会话级别 </p>
<p>使用步骤： </p>
<p>​        1、查看所有系统变量     show global|【session】variables; </p>
<p>​        2、查看满足条件的部分系统变量     show global|【session】 variables like ‘%char%’; </p>
<p>​        3、查看指定的系统变量的值     select @@global|【session】系统变量名; </p>
<p>​        4、为某个系统变量赋值     </p>
<p>​                方式一：set global|【session】系统变量名=值;     </p>
<p>​                方式二：set @@global|【session】系统变量名=值;</p>
<p>1,全局变量</p>
<p>​    作用域：针对于所有会话（连接）有效，但不能跨重启</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#①查看所有全局变量</span><br><span class="line">	SHOW GLOBAL VARIABLES;</span><br><span class="line">#②查看满足条件的部分系统变量</span><br><span class="line">	SHOW GLOBAL VARIABLES LIKE &#39;%char%&#39;;</span><br><span class="line">#③查看指定的系统变量的值</span><br><span class="line">	SELECT @@global.autocommit;</span><br><span class="line">#④为某个系统变量赋值</span><br><span class="line">	SET @@global.autocommit&#x3D;0;</span><br><span class="line">	SET GLOBAL autocommit&#x3D;0;</span><br></pre></td></tr></table></figure>

<p>2,会话变量</p>
<p>​        作用域：针对于当前会话（连接）有效</p>
<p>​                        session一般默认省略。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#①查看所有会话变量</span><br><span class="line">	SHOW SESSION VARIABLES;</span><br><span class="line">#②查看满足条件的部分会话变量</span><br><span class="line">	SHOW SESSION VARIABLES LIKE &#39;%char%&#39;;</span><br><span class="line">#③查看指定的会话变量的值</span><br><span class="line">	SELECT @@autocommit;</span><br><span class="line">	SELECT @@session.tx_isolation;</span><br><span class="line">#④为某个会话变量赋值</span><br><span class="line">	SET @@session.tx_isolation&#x3D;&#39;read-uncommitted&#39;;</span><br><span class="line">	SET SESSION tx_isolation&#x3D;&#39;read-committed&#39;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>二、自定义变量</strong></p>
<p>说明：变量由用户自定义，而不是系统提供的<br>使用步骤：<br>            1、声明<br>            2、赋值<br>            3、使用（查看、比较、运算等）</p>
<p>1,用户变量</p>
<p>​        作用域：针对于当前会话（连接）有效，作用域同于会话变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#赋值操作符：&#x3D;或:&#x3D;</span><br><span class="line">#①声明并初始化</span><br><span class="line">	SET @变量名&#x3D;值;</span><br><span class="line">	SET @变量名:&#x3D;值;</span><br><span class="line">	SELECT @变量名:&#x3D;值;</span><br><span class="line">#②赋值（更新变量的值）</span><br><span class="line">	#方式一：</span><br><span class="line">		SET @变量名&#x3D;值;</span><br><span class="line">		SET @变量名:&#x3D;值;</span><br><span class="line">		SELECT @变量名:&#x3D;值;</span><br><span class="line">	#方式二：</span><br><span class="line">		SELECT 字段 INTO @变量名</span><br><span class="line">		FROM 表;</span><br><span class="line">#③使用（查看变量的值）</span><br><span class="line">	SELECT @变量名;</span><br></pre></td></tr></table></figure>

<p>2,局部变量</p>
<p>​        作用域：仅仅在定义它的begin end块中有效<br>​                        应用在 begin end中的第一句话</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#①声明</span><br><span class="line">	DECLARE 变量名 类型;</span><br><span class="line">	DECLARE 变量名 类型 【DEFAULT 值】;</span><br><span class="line">#②赋值（更新变量的值）</span><br><span class="line">	#方式一：</span><br><span class="line">		SET 局部变量名&#x3D;值;</span><br><span class="line">		SET 局部变量名:&#x3D;值;</span><br><span class="line">		SELECT 局部变量名:&#x3D;值;</span><br><span class="line">	#方式二：</span><br><span class="line">		SELECT 字段 INTO 具备变量名</span><br><span class="line">		FROM 表;</span><br><span class="line">#③使用（查看变量的值）</span><br><span class="line">	SELECT 局部变量名;</span><br></pre></td></tr></table></figure>

<p>用户变量和局部变量的对比</p>
<p>​                    作用域                                    定义位置                                        语法</p>
<p>用户变量    当前会话                                会话的任何地方                加@符号，不用指定类型<br>局部变量    定义它的BEGIN END中     BEGIN END的第一句话        一般不用加@,需要指定类型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#案例：声明两个变量，求和并打印</span><br><span class="line">#用户变量</span><br><span class="line">	SET @m&#x3D;1;</span><br><span class="line">	SET @n&#x3D;1;</span><br><span class="line">	SET @sum&#x3D;@m+@n;</span><br><span class="line">	SELECT @sum;</span><br><span class="line">#局部变量</span><br><span class="line">	DECLARE m INT DEFAULT 1;</span><br><span class="line">	DECLARE n INT DEFAULT 1;</span><br><span class="line">	DECLARE SUM INT;</span><br><span class="line">	SET SUM&#x3D;m+n;</span><br><span class="line">	SELECT SUM;</span><br></pre></td></tr></table></figure>

<h1 id="十一、存储过程和函数"><a href="#十一、存储过程和函数" class="headerlink" title="十一、存储过程和函数"></a>十一、存储过程和函数</h1><p>存储过程和函数：类似于java中的方法<br>    好处：<br>        1、提高代码的重用性<br>        2、简化操作</p>
<h2 id="11-1-存储过程"><a href="#11-1-存储过程" class="headerlink" title="11.1 存储过程"></a>11.1 存储过程</h2><p>含义：事先经过编译并存储在数据库中的一段sql语句的集合。，理解成批处理语句<br>        1、提高代码的重用性<br>        2、简化操作<br>        3、减少了编译次数并且减少了和数据库服务器的连接次数，提高了效率</p>
<p><strong>一、创建语法</strong></p>
<p>​        CREATE PROCEDURE 存储过程名(参数列表)<br>​        BEGIN</p>
<p>​                存储过程体（一组合法的SQL语句）</p>
<p>​        END 结束标记</p>
<p>注意：</p>
<p>1、参数列表包含三部分<br>参数模式  参数名  参数类型<br>举例：<br>in stuname varchar(20)</p>
<p>参数模式：<br>in：该参数可以作为输入，也就是该参数需要调用方传入值<br>out：该参数可以作为输出，也就是该参数可以作为返回值<br>inout：该参数既可以作为输入又可以作为输出，也就是该参数既需要传入值，又可以返回值</p>
<p>2、如果存储过程体仅仅只有一句话，begin end可以省略<br>存储过程体中的每条sql语句的结尾要求必须加分号。<br>存储过程的结尾可以使用 delimiter 重新设置<br>语法：<br>delimiter 结束标记<br>案例：<br>delimiter $</p>
<p><strong>二、调用语法</strong></p>
<p>​            CALL 存储过程名(实参列表);</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">#1.空参列表</span><br><span class="line">	#案例：插入到admin表中五条记录</span><br><span class="line">		SELECT * FROM admin;</span><br><span class="line">	# 创建结束标识符$</span><br><span class="line">		DELIMITER $</span><br><span class="line">		CREATE PROCEDURE myp1()</span><br><span class="line">		BEGIN</span><br><span class="line">			INSERT INTO admin(username,&#96;password&#96;) </span><br><span class="line">			VALUES(&#39;john1&#39;,&#39;0000&#39;),(&#39;lily&#39;,&#39;0000&#39;),(&#39;rose&#39;,&#39;0000&#39;),(&#39;jack&#39;,&#39;0000&#39;),(&#39;tom&#39;,&#39;0000&#39;);</span><br><span class="line">		END $</span><br><span class="line">	#调用</span><br><span class="line">		CALL myp1()$</span><br><span class="line"></span><br><span class="line">#2.创建带in模式参数的存储过程</span><br><span class="line">	#案例1：创建存储过程实现 根据女神名，查询对应的男神信息</span><br><span class="line">		CREATE PROCEDURE myp2(IN beautyName VARCHAR(20))</span><br><span class="line">		BEGIN</span><br><span class="line">			SELECT bo.*</span><br><span class="line">			FROM boys bo</span><br><span class="line">			RIGHT JOIN beauty b ON bo.id &#x3D; b.boyfriend_id</span><br><span class="line">			WHERE b.name&#x3D;beautyName;</span><br><span class="line">		END $</span><br><span class="line">	#调用</span><br><span class="line">		CALL myp2(&#39;柳岩&#39;)$</span><br><span class="line">	#案例2 ：创建存储过程实现，用户是否登录成功</span><br><span class="line">		CREATE PROCEDURE myp4(IN username VARCHAR(20),IN PASSWORD VARCHAR(20))</span><br><span class="line">		BEGIN</span><br><span class="line">			DECLARE result INT DEFAULT 0;#声明并初始化</span><br><span class="line">			</span><br><span class="line">			SELECT COUNT(*) INTO result#赋值</span><br><span class="line">			FROM admin</span><br><span class="line">			WHERE admin.username &#x3D; username</span><br><span class="line">			AND admin.password &#x3D; PASSWORD;</span><br><span class="line">			</span><br><span class="line">			SELECT IF(result&gt;0,&#39;成功&#39;,&#39;失败&#39;);#使用</span><br><span class="line">		END $</span><br><span class="line">	#调用</span><br><span class="line">		CALL myp3(&#39;张飞&#39;,&#39;8888&#39;)$</span><br><span class="line">#3.创建out 模式参数的存储过程</span><br><span class="line">	#案例1：根据输入的女神名，返回对应的男神名</span><br><span class="line">		CREATE PROCEDURE myp6(IN beautyName VARCHAR(20),OUT boyName VARCHAR(20))</span><br><span class="line">		BEGIN</span><br><span class="line">			SELECT bo.boyname INTO boyname</span><br><span class="line">			FROM boys bo</span><br><span class="line">			RIGHT JOIN</span><br><span class="line">			beauty b ON b.boyfriend_id &#x3D; bo.id</span><br><span class="line">			WHERE b.name&#x3D;beautyName ;</span><br><span class="line">		END $</span><br><span class="line">	#案例2：根据输入的女神名，返回对应的男神名和魅力值</span><br><span class="line">		CREATE PROCEDURE myp7(IN beautyName VARCHAR(20),OUT boyName VARCHAR(20),OUT usercp INT) </span><br><span class="line">		BEGIN</span><br><span class="line">			SELECT boys.boyname ,boys.usercp INTO boyname,usercp</span><br><span class="line">			FROM boys </span><br><span class="line">			RIGHT JOIN</span><br><span class="line">			beauty b ON b.boyfriend_id &#x3D; boys.id</span><br><span class="line">			WHERE b.name&#x3D;beautyName ;</span><br><span class="line">		END $</span><br><span class="line">	#调用</span><br><span class="line">		CALL myp7(&#39;小昭&#39;,@name,@cp)$</span><br><span class="line">		SELECT @name,@cp$</span><br><span class="line">#4.创建带inout模式参数的存储过程</span><br><span class="line">	#案例1：传入a和b两个值，最终a和b都翻倍并返回</span><br><span class="line">		CREATE PROCEDURE myp8(INOUT a INT ,INOUT b INT)</span><br><span class="line">		BEGIN</span><br><span class="line">			SET a&#x3D;a*2;</span><br><span class="line">			SET b&#x3D;b*2;</span><br><span class="line">		END $</span><br><span class="line">	#调用</span><br><span class="line">		SET @m&#x3D;10$</span><br><span class="line">		SET @n&#x3D;20$</span><br><span class="line">		CALL myp8(@m,@n)$</span><br><span class="line">		SELECT @m,@n$</span><br></pre></td></tr></table></figure>

<p><strong>三、删除存储过程</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#语法：drop procedure 存储过程名</span><br><span class="line">DROP PROCEDURE p1;</span><br><span class="line">DROP PROCEDURE p2,p3;-- 错误的写法</span><br></pre></td></tr></table></figure>

<p><strong>四、查看存储过程的信息</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DESC myp2;-- 错误的写法</span><br><span class="line">SHOW CREATE PROCEDURE  myp2;</span><br></pre></td></tr></table></figure>

<h2 id="11-2-函数"><a href="#11-2-函数" class="headerlink" title="11.2 函数"></a>11.2 函数</h2><p>​    含义：一组预先编译好的SQL语句的集合，理解成批处理语句<br>​            1、提高代码的重用性<br>​            2、简化操作<br>​            3、减少了编译次数并且减少了和数据库服务器的连接次数，提高了效率</p>
<p>​    区别：</p>
<p>​            存储过程：可以有0个返回，也可以有多个返回，适合做批量插入、批量更新<br>​            函数：有且仅有1 个返回，适合做处理数据后返回一个结果</p>
<p><strong>一、创建语法</strong></p>
<p>​            CREATE FUNCTION 函数名(参数列表) RETURNS 返回类型<br>​            BEGIN<br>​                        函数体<br>​            END   结束标记</p>
<p>注意：<br>1.参数列表 包含两部分：<br>        参数名 参数类型</p>
<p>2.函数体：肯定会有return语句，如果没有会报错<br>        如果return语句没有放在函数体的最后也不报错，但不建议<br>3.函数体中仅有一句话，则可以省略begin end<br>4.使用 delimiter语句设置结束标记</p>
<p><strong>二、调用语法</strong></p>
<p>​        SELECT 函数名(参数列表)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">#1.无参有返回</span><br><span class="line">	#案例：返回公司的员工个数</span><br><span class="line">		CREATE FUNCTION myf1() RETURNS INT</span><br><span class="line">		BEGIN</span><br><span class="line">			DECLARE c INT DEFAULT 0;#定义局部变量</span><br><span class="line">			SELECT COUNT(*) INTO c#赋值</span><br><span class="line">			FROM employees;</span><br><span class="line">			RETURN c;</span><br><span class="line">			</span><br><span class="line">		END $</span><br><span class="line">	# 调用</span><br><span class="line">		SELECT myf1()$</span><br><span class="line">#2.有参有返回</span><br><span class="line">	#案例1：根据员工名，返回它的工资</span><br><span class="line">		CREATE FUNCTION myf2(empName VARCHAR(20)) RETURNS DOUBLE</span><br><span class="line">		BEGIN</span><br><span class="line">			SET @sal&#x3D;0;#定义用户变量 </span><br><span class="line">			SELECT salary INTO @sal   #赋值</span><br><span class="line">			FROM employees</span><br><span class="line">			WHERE last_name &#x3D; empName;</span><br><span class="line">			</span><br><span class="line">			RETURN @sal;</span><br><span class="line">		END $</span><br><span class="line">	# 调用</span><br><span class="line">		SELECT myf2(&#39;k_ing&#39;) $</span><br><span class="line">	#案例2：根据部门名，返回该部门的平均工资</span><br><span class="line">		CREATE FUNCTION myf3(deptName VARCHAR(20)) RETURNS DOUBLE</span><br><span class="line">		BEGIN</span><br><span class="line">			DECLARE sal DOUBLE ;</span><br><span class="line">			SELECT AVG(salary) INTO sal</span><br><span class="line">			FROM employees e</span><br><span class="line">			JOIN departments d ON e.department_id &#x3D; d.department_id</span><br><span class="line">			WHERE d.department_name&#x3D;deptName;</span><br><span class="line">			RETURN sal;</span><br><span class="line">		END $</span><br><span class="line">	# 调用</span><br><span class="line">		SELECT myf3(&#39;IT&#39;)$</span><br></pre></td></tr></table></figure>

<p><strong>三、查看函数</strong><br>        SHOW CREATE FUNCTION myf3;<br><strong>四、删除函数</strong><br>        DROP FUNCTION myf3;</p>
<h1 id="十二、流程控制结构"><a href="#十二、流程控制结构" class="headerlink" title="十二、流程控制结构"></a>十二、流程控制结构</h1><h2 id="12-1顺序结构"><a href="#12-1顺序结构" class="headerlink" title="12.1顺序结构"></a>12.1顺序结构</h2><h2 id="12-2分支结构"><a href="#12-2分支结构" class="headerlink" title="12.2分支结构"></a>12.2分支结构</h2><p> <strong>一.if函数</strong></p>
<p>​        语法：if(条件,值1，值2)<br>​        功能：实现双分支<br>​    应用在begin end中或外面</p>
<p><strong>二.case结构</strong></p>
<p>​    语法：<br>​    情况1：类似于switch<br>​        case 变量或表达式<br>​        when 值1 then 语句1;<br>​        when 值2 then 语句2;<br>​        …<br>​        else 语句n;<br>​        end </p>
<p>​    情况2：<br>​        case 类似于多重if，应用在begin end 中或外面<br>​        when 条件1 then 语句1;<br>​        when 条件2 then 语句2;<br>​        …<br>​        else 语句n;<br>​        end </p>
<p>case结构——作为表达式</p>
<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208170512.png"></p>
<p>case结构——作为独立的语句</p>
<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208170517.png"></p>
<p><strong>三.if结构</strong></p>
<p>​    语法：<br>​        if 条件1 then 语句1;<br>​        elseif 条件2 then 语句2;<br>​        ….<br>​        else 语句n;<br>​        end if;<br>​    功能：类似于多重if，只能应用在begin end 中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">#案例1：创建函数，实现传入成绩，如果成绩&gt;90,返回A，如果成绩&gt;80,返回B，如果成绩&gt;60,返回C，否则返回D</span><br><span class="line">	CREATE FUNCTION test_if(score FLOAT) RETURNS CHAR</span><br><span class="line">	BEGIN</span><br><span class="line">		DECLARE ch CHAR DEFAULT &#39;A&#39;;</span><br><span class="line">		IF score&gt;90 THEN SET ch&#x3D;&#39;A&#39;;</span><br><span class="line">		ELSEIF score&gt;80 THEN SET ch&#x3D;&#39;B&#39;;</span><br><span class="line">		ELSEIF score&gt;60 THEN SET ch&#x3D;&#39;C&#39;;</span><br><span class="line">		ELSE SET ch&#x3D;&#39;D&#39;;</span><br><span class="line">		END IF;</span><br><span class="line">		RETURN ch;</span><br><span class="line">	END $</span><br><span class="line"># 调用</span><br><span class="line">	SELECT test_if(87)$</span><br><span class="line">#案例2：创建存储过程，如果工资&lt;2000,则删除，如果5000&gt;工资&gt;2000,则涨工资1000，否则涨工资500</span><br><span class="line">	CREATE PROCEDURE test_if_pro(IN sal DOUBLE)</span><br><span class="line">	BEGIN</span><br><span class="line">		IF sal&lt;2000 THEN DELETE FROM employees WHERE employees.salary&#x3D;sal;</span><br><span class="line">		ELSEIF sal&gt;&#x3D;2000 AND sal&lt;5000 THEN UPDATE employees SET salary&#x3D;salary+1000 WHERE employees.&#96;salary&#96;&#x3D;sal;</span><br><span class="line">		ELSE UPDATE employees SET salary&#x3D;salary+500 WHERE employees.&#96;salary&#96;&#x3D;sal;</span><br><span class="line">		END IF;</span><br><span class="line">	END $</span><br><span class="line"># 调用</span><br><span class="line">	CALL test_if_pro(2100)$</span><br><span class="line"></span><br><span class="line">#案例1：创建函数，实现传入成绩，如果成绩&gt;90,返回A，如果成绩&gt;80,返回B，如果成绩&gt;60,返回C，否则返回D</span><br><span class="line">	CREATE FUNCTION test_case(score FLOAT) RETURNS CHAR</span><br><span class="line">	BEGIN </span><br><span class="line">		DECLARE ch CHAR DEFAULT &#39;A&#39;;</span><br><span class="line">		CASE </span><br><span class="line">		WHEN score&gt;90 THEN SET ch&#x3D;&#39;A&#39;;</span><br><span class="line">		WHEN score&gt;80 THEN SET ch&#x3D;&#39;B&#39;;</span><br><span class="line">		WHEN score&gt;60 THEN SET ch&#x3D;&#39;C&#39;;</span><br><span class="line">		ELSE SET ch&#x3D;&#39;D&#39;;</span><br><span class="line">		END CASE;</span><br><span class="line">		RETURN ch;</span><br><span class="line">	END $</span><br><span class="line"># 调用</span><br><span class="line">	SELECT test_case(56)$</span><br></pre></td></tr></table></figure>

<h2 id="12-3循环结构"><a href="#12-3循环结构" class="headerlink" title="12.3循环结构"></a>12.3循环结构</h2><p>​    分类： while、loop、repeat</p>
<p>​    循环控制：</p>
<p>​        iterate  类似于 continue，继续，结束本次循环，继续下一次<br>​        leave    类似于  break，跳出，结束当前所在的循环</p>
<p><img src="https://gitee.com/plumChuan/picture-bed/raw/master/img/20201208170556.png"></p>
<p><strong>一.while</strong></p>
<p>​    语法：</p>
<p>​        【标签:】while 循环条件 do<br>​            循环体;<br>​        end while【 标签】;</p>
<p>联想：类似与Java</p>
<p>​        while(循环条件){</p>
<p>​                循环体;</p>
<p>​        }</p>
<p><strong>二.loop</strong></p>
<p>​    语法：<br>​        【标签:】loop<br>​                循环体;<br>​        end loop 【标签】;</p>
<p>可以用来模拟简单的死循环</p>
<p><strong>三.repeat</strong><br>    语法：<br>        【标签：】repeat<br>            循环体;<br>            until 结束循环的条件<br>        end repeat 【标签】;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">#1.没有添加循环控制语句</span><br><span class="line">	#案例：批量插入，根据次数插入到admin表中多条记录</span><br><span class="line">		DROP PROCEDURE pro_while1$</span><br><span class="line">		CREATE PROCEDURE pro_while1(IN insertCount INT)</span><br><span class="line">		BEGIN</span><br><span class="line">			DECLARE i INT DEFAULT 1;</span><br><span class="line">			WHILE i&lt;&#x3D;insertCount DO</span><br><span class="line">				INSERT INTO admin(username,&#96;password&#96;) VALUES(CONCAT(&#39;Rose&#39;,i),&#39;666&#39;);</span><br><span class="line">				SET i&#x3D;i+1;</span><br><span class="line">			END WHILE;</span><br><span class="line">		END $</span><br><span class="line">	# 调用</span><br><span class="line">		CALL pro_while1(100)$</span><br><span class="line">-- 等价于Java</span><br><span class="line">&#x2F;*</span><br><span class="line">	int i&#x3D;1;</span><br><span class="line">	while(i&lt;&#x3D;insertcount)&#123;</span><br><span class="line">		&#x2F;&#x2F;插入</span><br><span class="line">		i++;</span><br><span class="line">	&#125;</span><br><span class="line">*&#x2F;</span><br><span class="line">#2.添加leave语句</span><br><span class="line">	#案例：批量插入，根据次数插入到admin表中多条记录，如果次数&gt;20则停止</span><br><span class="line">		TRUNCATE TABLE admin$</span><br><span class="line">		DROP PROCEDURE test_while1$</span><br><span class="line">		CREATE PROCEDURE test_while1(IN insertCount INT)</span><br><span class="line">		BEGIN</span><br><span class="line">			DECLARE i INT DEFAULT 1;</span><br><span class="line">			a:WHILE i&lt;&#x3D;insertCount DO</span><br><span class="line">				INSERT INTO admin(username,&#96;password&#96;) VALUES(CONCAT(&#39;xiaohua&#39;,i),&#39;0000&#39;);</span><br><span class="line">				IF i&gt;&#x3D;20 THEN LEAVE a;</span><br><span class="line">				END IF;</span><br><span class="line">				SET i&#x3D;i+1;</span><br><span class="line">			END WHILE a;</span><br><span class="line">		END $</span><br><span class="line">	# 调用</span><br><span class="line">		CALL test_while1(100)$</span><br><span class="line">#3.添加iterate语句</span><br><span class="line">	#案例：批量插入，根据次数插入到admin表中多条记录，只插入偶数次</span><br><span class="line">		TRUNCATE TABLE admin$</span><br><span class="line">		DROP PROCEDURE test_while1$</span><br><span class="line">		CREATE PROCEDURE test_while1(IN insertCount INT)</span><br><span class="line">		BEGIN</span><br><span class="line">			DECLARE i INT DEFAULT 0;</span><br><span class="line">			a:WHILE i&lt;&#x3D;insertCount DO</span><br><span class="line">				SET i&#x3D;i+1;</span><br><span class="line">				IF MOD(i,2)!&#x3D;0 THEN ITERATE a;</span><br><span class="line">				END IF;</span><br><span class="line">				INSERT INTO admin(username,&#96;password&#96;) VALUES(CONCAT(&#39;xiaohua&#39;,i),&#39;0000&#39;);</span><br><span class="line">			END WHILE a;</span><br><span class="line">		END $</span><br><span class="line">	# 调用</span><br><span class="line">		CALL test_while1(100)$</span><br><span class="line">-- 等价于Java</span><br><span class="line">&#x2F;*</span><br><span class="line">	int i&#x3D;0;</span><br><span class="line">	while(i&lt;&#x3D;insertCount)&#123;</span><br><span class="line">		i++;</span><br><span class="line">		if(i%2&#x3D;&#x3D;0)&#123;</span><br><span class="line">			continue;</span><br><span class="line">		&#125;</span><br><span class="line">		插入</span><br><span class="line">	&#125;</span><br><span class="line">*&#x2F;</span><br></pre></td></tr></table></figure>

<h1 id="十三，常见英文单词"><a href="#十三，常见英文单词" class="headerlink" title="十三，常见英文单词"></a>十三，常见英文单词</h1>
    </div>

    
    
    


      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/12/13/Java%E5%AD%A6%E4%B9%A0/Java%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/8-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%AD/" rel="prev" title="面向对象(中)">
      <i class="fa fa-chevron-left"></i> 面向对象(中)
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/12/15/Java%E5%AD%A6%E4%B9%A0/Java%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/9-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%8B/" rel="next" title="面向对象(下)">
      面向对象(下) <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%AD%A6%E4%B9%A0%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">1.</span> <span class="nav-text">一、为什么要学习数据库</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5"><span class="nav-number">2.</span> <span class="nav-text">二、数据库的相关概念</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%98%E5%82%A8%E6%95%B0%E6%8D%AE%E7%9A%84%E7%89%B9%E7%82%B9"><span class="nav-number">3.</span> <span class="nav-text">三、数据库存储数据的特点</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9B%9B%E3%80%81%E5%88%9D%E5%A7%8BMySQL"><span class="nav-number">4.</span> <span class="nav-text">四、初始MySQL</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1MySQL%E4%BA%A7%E5%93%81%E7%9A%84%E4%BB%8B%E7%BB%8D"><span class="nav-number">4.1.</span> <span class="nav-text">4.1MySQL产品的介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2MySQL%E4%BA%A7%E5%93%81%E7%9A%84%E5%AE%89%E8%A3%85"><span class="nav-number">4.2.</span> <span class="nav-text">4.2MySQL产品的安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-3MySQL%E6%9C%8D%E5%8A%A1%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E5%81%9C%E6%AD%A2"><span class="nav-number">4.3.</span> <span class="nav-text">4.3MySQL服务的启动和停止</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-4MySQL%E6%9C%8D%E5%8A%A1%E7%9A%84%E7%99%BB%E5%BD%95%E5%92%8C%E9%80%80%E5%87%BA"><span class="nav-number">4.4.</span> <span class="nav-text">4.4MySQL服务的登录和退出</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-5MySQL%E7%9A%84%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4%E5%92%8C%E8%AF%AD%E6%B3%95%E8%A7%84%E8%8C%83"><span class="nav-number">4.5.</span> <span class="nav-text">4.5MySQL的常见命令和语法规范</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-6MYSQL%E7%9A%84%E8%AF%AD%E8%A8%80%E5%88%86%E7%B1%BB"><span class="nav-number">4.6.</span> <span class="nav-text">4.6MYSQL的语言分类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-7MYSQL%E7%9A%84%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4"><span class="nav-number">4.7.</span> <span class="nav-text">4.7MYSQL的常见命令</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%94%E3%80%81DQL%E8%AF%AD%E8%A8%80%E7%9A%84%E5%AD%A6%E4%B9%A0"><span class="nav-number">5.</span> <span class="nav-text">五、DQL语言的学习</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-1%E5%9F%BA%E7%A1%80%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.1.</span> <span class="nav-text">5.1基础查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-2%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.2.</span> <span class="nav-text">5.2条件查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BD%AC%E7%A7%BB%E5%85%B3%E9%94%AE%E5%AD%97ESCAPE"><span class="nav-number">5.2.0.1.</span> <span class="nav-text">转移关键字ESCAPE</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-3%E6%8E%92%E5%BA%8F%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.3.</span> <span class="nav-text">5.3排序查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-4%E5%B8%B8%E8%A7%81%E5%87%BD%E6%95%B0"><span class="nav-number">5.4.</span> <span class="nav-text">5.4常见函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-5%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.5.</span> <span class="nav-text">5.5分组查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-6%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.6.</span> <span class="nav-text">5.6连接查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-7%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.7.</span> <span class="nav-text">5.7子查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-8%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.8.</span> <span class="nav-text">5.8分页查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-9union%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.9.</span> <span class="nav-text">5.9union联合查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-10%E6%80%BB%E7%BB%93"><span class="nav-number">5.10.</span> <span class="nav-text">5.10总结</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%85%AD%E3%80%81DML%E8%AF%AD%E8%A8%80%E7%9A%84%E5%AD%A6%E4%B9%A0"><span class="nav-number">6.</span> <span class="nav-text">六、DML语言的学习</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#6-1%E6%8F%92%E5%85%A5%E8%AF%AD%E5%8F%A5"><span class="nav-number">6.1.</span> <span class="nav-text">6.1插入语句</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-2%E4%BF%AE%E6%94%B9%E8%AF%AD%E5%8F%A5"><span class="nav-number">6.2.</span> <span class="nav-text">6.2修改语句</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-3%E5%88%A0%E9%99%A4%E8%AF%AD%E5%8F%A5"><span class="nav-number">6.3.</span> <span class="nav-text">6.3删除语句</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-4%E7%BB%83%E4%B9%A0"><span class="nav-number">6.4.</span> <span class="nav-text">6.4练习</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%83%E3%80%81DDL%E8%AF%AD%E8%A8%80%E7%9A%84%E5%AD%A6%E4%B9%A0"><span class="nav-number">7.</span> <span class="nav-text">七、DDL语言的学习</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#7-1%E5%BA%93%E5%92%8C%E8%A1%A8%E7%9A%84%E7%AE%A1%E7%90%86"><span class="nav-number">7.1.</span> <span class="nav-text">7.1库和表的管理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-2%E5%B8%B8%E8%A7%81%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%BB%8B%E7%BB%8D"><span class="nav-number">7.2.</span> <span class="nav-text">7.2常见数据类型介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-3%E5%B8%B8%E8%A7%81%E7%BA%A6%E6%9D%9F"><span class="nav-number">7.3.</span> <span class="nav-text">7.3常见约束</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-3-1%E6%A0%87%E8%AF%86%E5%88%97"><span class="nav-number">7.3.1.</span> <span class="nav-text">7.3.1标识列</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%85%AB%E3%80%81TCL%E8%AF%AD%E8%A8%80%E7%9A%84%E5%AD%A6%E4%B9%A0"><span class="nav-number">8.</span> <span class="nav-text">八、TCL语言的学习</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#8-1%E4%BA%8B%E5%8A%A1%E5%92%8C%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86"><span class="nav-number">8.1.</span> <span class="nav-text">8.1事务和事务处理</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B9%9D%E3%80%81%E8%A7%86%E5%9B%BE%E7%9A%84%E8%AE%B2%E8%A7%A3"><span class="nav-number">9.</span> <span class="nav-text">九、视图的讲解</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8D%81%E3%80%81%E5%8F%98%E9%87%8F"><span class="nav-number">10.</span> <span class="nav-text">十、变量</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8D%81%E4%B8%80%E3%80%81%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E5%92%8C%E5%87%BD%E6%95%B0"><span class="nav-number">11.</span> <span class="nav-text">十一、存储过程和函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#11-1-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">11.1.</span> <span class="nav-text">11.1 存储过程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-2-%E5%87%BD%E6%95%B0"><span class="nav-number">11.2.</span> <span class="nav-text">11.2 函数</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E7%BB%93%E6%9E%84"><span class="nav-number">12.</span> <span class="nav-text">十二、流程控制结构</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#12-1%E9%A1%BA%E5%BA%8F%E7%BB%93%E6%9E%84"><span class="nav-number">12.1.</span> <span class="nav-text">12.1顺序结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-2%E5%88%86%E6%94%AF%E7%BB%93%E6%9E%84"><span class="nav-number">12.2.</span> <span class="nav-text">12.2分支结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-3%E5%BE%AA%E7%8E%AF%E7%BB%93%E6%9E%84"><span class="nav-number">12.3.</span> <span class="nav-text">12.3循环结构</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8D%81%E4%B8%89%EF%BC%8C%E5%B8%B8%E8%A7%81%E8%8B%B1%E6%96%87%E5%8D%95%E8%AF%8D"><span class="nav-number">13.</span> <span class="nav-text">十三，常见英文单词</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Plum Reiver</p>
  <div class="site-description" itemprop="description">技术，日常，笔记</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">97</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">21</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
	
  </nav>
</div>


      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Plum Reiver</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
